import{b4 as pa,p as Oe,m as ga,a as fa,f as it,g as ze,l as vt,n as mt,_ as ct,b5 as pt,x as y,o as $,s as Wl,z as ae,b6 as gt,c as a,K as L,u as _e,ag as Bl,a_ as ft,b7 as bt,b8 as yt,b9 as ba,ba as Vt,F as ht,bb as Dt,ah as St,bc as kt,v as jl,X as xt,aP as ya,J as It,aS as wt,U as Ye,H as ce,aJ as Ct,bd as Pt,be as Nt,D as Va,bf as Ut,bg as Rt,bh as Et,h as $t,t as Ve,R as Tt,q as Bt,bi as la,bj as At,a6 as E,a7 as W,a8 as s,af as Y,ao as ue,ad as U,an as G,ac as t,ap as ha,ay as Hl,a0 as Da,a5 as Sa,ae as F,w as Mt,ai as El,ab as de,ax as k,a1 as Yt,a2 as Ot,P as zt,b3 as aa,A as ta,aw as _t,as as na,at as Lt,am as cl,bk as Wt,aj as jt,av as sa,aa as oa,a9 as Ht,b2 as qt}from"./index-EoLtR7Ym.js";import{l as ua}from"./lodash-DHyxJ22h.js";import{c as ra,a as h,d as K,f as Ll,g as da,h as ia,u as Xt,b}from"./index.esm-rH3HLLYp.js";import{u as oe,_ as Ft,E as Gt,a as Zt}from"./useROCDate-zKRRYIvN.js";import{C as Kt}from"./ConfirmDeleteDialogWithTextField-CMsJX0fm.js";import{V as Jt}from"./VCombobox-8nLyr3gO.js";import{V as M,a as r}from"./VRow-dqbYjOyI.js";import{V as Qt}from"./VContainer-DkdgYygS.js";import{V as X,a as en}from"./VDataTableServer-B-LcFFzZ.js";import{V as ln}from"./VForm-pYgC_4YV.js";import{V as an}from"./VTooltip-C1zG8ekc.js";import{V as Rl}from"./VDivider-DIT931LT.js";import{V as tn}from"./VHover-CBys7UOu.js";import{T as va}from"./index-EqHmgjHM.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VList-CyvEtY9o.js";import"./VCheckboxBtn-DGPE0p8X.js";const nn=o=>{const{touchstartX:v,touchendX:i,touchstartY:u,touchendY:V}=o,p=.5,m=16;o.offsetX=i-v,o.offsetY=V-u,Math.abs(o.offsetY)<p*Math.abs(o.offsetX)&&(o.left&&i<v-m&&o.left(o),o.right&&i>v+m&&o.right(o)),Math.abs(o.offsetX)<p*Math.abs(o.offsetY)&&(o.up&&V<u-m&&o.up(o),o.down&&V>u+m&&o.down(o))};function sn(o,v){var u;const i=o.changedTouches[0];v.touchstartX=i.clientX,v.touchstartY=i.clientY,(u=v.start)==null||u.call(v,{originalEvent:o,...v})}function on(o,v){var u;const i=o.changedTouches[0];v.touchendX=i.clientX,v.touchendY=i.clientY,(u=v.end)==null||u.call(v,{originalEvent:o,...v}),nn(v)}function un(o,v){var u;const i=o.changedTouches[0];v.touchmoveX=i.clientX,v.touchmoveY=i.clientY,(u=v.move)==null||u.call(v,{originalEvent:o,...v})}function rn(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const v={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:o.left,right:o.right,up:o.up,down:o.down,start:o.start,move:o.move,end:o.end};return{touchstart:i=>sn(i,v),touchend:i=>on(i,v),touchmove:i=>un(i,v)}}function dn(o,v){var I;const i=v.value,u=i!=null&&i.parent?o.parentElement:o,V=(i==null?void 0:i.options)??{passive:!0},p=(I=v.instance)==null?void 0:I.$.uid;if(!u||!p)return;const m=rn(v.value);u._touchHandlers=u._touchHandlers??Object.create(null),u._touchHandlers[p]=m,pa(m).forEach(w=>{u.addEventListener(w,m[w],V)})}function vn(o,v){var p,m;const i=(p=v.value)!=null&&p.parent?o.parentElement:o,u=(m=v.instance)==null?void 0:m.$.uid;if(!(i!=null&&i._touchHandlers)||!u)return;const V=i._touchHandlers[u];pa(V).forEach(I=>{i.removeEventListener(I,V[I])}),delete i._touchHandlers[u]}const ka={mounted:dn,unmounted:vn},xa=Symbol.for("vuetify:v-window"),Ia=Symbol.for("vuetify:v-window-group"),wa=Oe({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:o=>typeof o=="boolean"||o==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ga(),...fa(),...it()},"VWindow"),ma=ze()({name:"VWindow",directives:{Touch:ka},props:wa(),emits:{"update:modelValue":o=>!0},setup(o,v){let{slots:i}=v;const{themeClasses:u}=vt(o),{isRtl:V}=mt(),{t:p}=ct(),m=pt(o,Ia),I=y(),w=$(()=>V.value?!o.reverse:o.reverse),P=Wl(!1),D=$(()=>{const T=o.direction==="vertical"?"y":"x",j=(w.value?!P.value:P.value)?"-reverse":"";return`v-window-${T}${j}-transition`}),c=Wl(0),d=y(void 0),C=$(()=>m.items.value.findIndex(T=>m.selected.value.includes(T.id)));ae(C,(T,A)=>{const j=m.items.value.length,H=j-1;j<=2?P.value=T<A:T===H&&A===0?P.value=!0:T===0&&A===H?P.value=!1:P.value=T<A}),gt(xa,{transition:D,isReversed:P,transitionCount:c,transitionHeight:d,rootRef:I});const f=$(()=>o.continuous||C.value!==0),N=$(()=>o.continuous||C.value!==m.items.value.length-1);function x(){f.value&&m.prev()}function Q(){N.value&&m.next()}const te=$(()=>{const T=[],A={icon:V.value?o.nextIcon:o.prevIcon,class:`v-window__${w.value?"right":"left"}`,onClick:m.prev,"aria-label":p("$vuetify.carousel.prev")};T.push(f.value?i.prev?i.prev({props:A}):a(L,A,null):a("div",null,null));const j={icon:V.value?o.prevIcon:o.nextIcon,class:`v-window__${w.value?"left":"right"}`,onClick:m.next,"aria-label":p("$vuetify.carousel.next")};return T.push(N.value?i.next?i.next({props:j}):a(L,j,null):a("div",null,null)),T}),ne=$(()=>o.touch===!1?o.touch:{...{left:()=>{w.value?x():Q()},right:()=>{w.value?Q():x()},start:A=>{let{originalEvent:j}=A;j.stopPropagation()}},...o.touch===!0?{}:o.touch});return _e(()=>Bl(a(o.tag,{ref:I,class:["v-window",{"v-window--show-arrows-on-hover":o.showArrows==="hover"},u.value,o.class],style:o.style},{default:()=>{var T,A;return[a("div",{class:"v-window__container",style:{height:d.value}},[(T=i.default)==null?void 0:T.call(i,{group:m}),o.showArrows!==!1&&a("div",{class:"v-window__controls"},[te.value])]),(A=i.additional)==null?void 0:A.call(i,{group:m})]}}),[[ft("touch"),ne.value]])),{group:m}}}),Ca=Oe({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ga(),...bt(),...yt()},"VWindowItem"),ca=ze()({name:"VWindowItem",directives:{Touch:ka},props:Ca(),emits:{"group:selected":o=>!0},setup(o,v){let{slots:i}=v;const u=ba(xa),V=Vt(o,Ia),{isBooted:p}=ht();if(!u||!V)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const m=Wl(!1),I=$(()=>p.value&&(u.isReversed.value?o.reverseTransition!==!1:o.transition!==!1));function w(){!m.value||!u||(m.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,u.transitionCount.value===0&&(u.transitionHeight.value=void 0)))}function P(){var f;m.value||!u||(m.value=!0,u.transitionCount.value===0&&(u.transitionHeight.value=jl((f=u.rootRef.value)==null?void 0:f.clientHeight)),u.transitionCount.value+=1)}function D(){w()}function c(f){m.value&&xt(()=>{!I.value||!m.value||!u||(u.transitionHeight.value=jl(f.clientHeight))})}const d=$(()=>{const f=u.isReversed.value?o.reverseTransition:o.transition;return I.value?{name:typeof f!="string"?u.transition.value:f,onBeforeEnter:P,onAfterEnter:w,onEnterCancelled:D,onBeforeLeave:P,onAfterLeave:w,onLeaveCancelled:D,onEnter:c}:!1}),{hasContent:C}=Dt(o,V.isSelected);return _e(()=>a(kt,{transition:d.value,disabled:!p.value},{default:()=>{var f;return[Bl(a("div",{class:["v-window-item",V.selectedClass.value,o.class],style:o.style},[C.value&&((f=i.default)==null?void 0:f.call(i))]),[[St,V.isSelected.value]])]}})),{groupItem:V}}}),ql=Symbol.for("vuetify:v-tabs"),mn=Oe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ya(It({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),$l=ze()({name:"VTab",props:mn(),setup(o,v){let{slots:i,attrs:u}=v;const{textColorClasses:V,textColorStyles:p}=wt(o,"sliderColor"),m=y(),I=y(),w=$(()=>o.direction==="horizontal"),P=$(()=>{var c,d;return((d=(c=m.value)==null?void 0:c.group)==null?void 0:d.isSelected.value)??!1});function D(c){var C,f;let{value:d}=c;if(d){const N=(f=(C=m.value)==null?void 0:C.$el.parentElement)==null?void 0:f.querySelector(".v-tab--selected .v-tab__slider"),x=I.value;if(!N||!x)return;const Q=getComputedStyle(N).color,te=N.getBoundingClientRect(),ne=x.getBoundingClientRect(),T=w.value?"x":"y",A=w.value?"X":"Y",j=w.value?"right":"bottom",H=w.value?"width":"height",he=te[T],De=ne[T],ee=he>De?te[j]-ne[j]:te[T]-ne[T],Se=Math.sign(ee)>0?w.value?"right":"bottom":Math.sign(ee)<0?w.value?"left":"top":"center",ke=(Math.abs(ee)+(Math.sign(ee)<0?te[H]:ne[H]))/Math.max(te[H],ne[H])||0,xe=te[H]/ne[H]||0,Ie=1.5;Pt(x,{backgroundColor:[Q,"currentcolor"],transform:[`translate${A}(${ee}px) scale${A}(${xe})`,`translate${A}(${ee/Ie}px) scale${A}(${(ke-1)/Ie+1})`,"none"],transformOrigin:Array(3).fill(Se)},{duration:225,easing:Nt})}}return _e(()=>{const c=L.filterProps(o);return a(L,ce({symbol:ql,ref:m,class:["v-tab",o.class],style:o.style,tabindex:P.value?0:-1,role:"tab","aria-selected":String(P.value),active:!1},c,u,{block:o.fixed,maxWidth:o.fixed?300:void 0,"onGroup:selected":D}),{...i,default:()=>{var d;return a(Ye,null,[((d=i.default)==null?void 0:d.call(i))??o.text,!o.hideSlider&&a("div",{ref:I,class:["v-tab__slider",V.value],style:p.value},null)])}})}),Ct({},m)}}),cn=Oe({...ya(wa(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Pa=ze()({name:"VTabsWindow",props:cn(),emits:{"update:modelValue":o=>!0},setup(o,v){let{slots:i}=v;const u=ba(ql,null),V=Va(o,"modelValue"),p=$({get(){var m;return V.value!=null||!u?V.value:(m=u.items.value.find(I=>u.selected.value.includes(I.id)))==null?void 0:m.value},set(m){V.value=m}});return _e(()=>{const m=ma.filterProps(o);return a(ma,ce({_as:"VTabsWindow"},m,{modelValue:p.value,"onUpdate:modelValue":I=>p.value=I,class:["v-tabs-window",o.class],style:o.style,mandatory:!1,touch:!1}),i)}),{}}}),pn=Oe({...Ca()},"VTabsWindowItem"),Tl=ze()({name:"VTabsWindowItem",props:pn(),setup(o,v){let{slots:i}=v;return _e(()=>{const u=ca.filterProps(o);return a(ca,ce({_as:"VTabsWindowItem"},u,{class:["v-tabs-window-item",o.class],style:o.style}),i)}),{}}});function gn(o){return o?o.map(v=>At(v)?v:{text:v,value:v}):[]}const fn=Oe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ut({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Rt(),...fa()},"VTabs"),bn=ze()({name:"VTabs",props:fn(),emits:{"update:modelValue":o=>!0},setup(o,v){let{attrs:i,slots:u}=v;const V=Va(o,"modelValue"),p=$(()=>gn(o.items)),{densityClasses:m}=Et(o),{backgroundColorClasses:I,backgroundColorStyles:w}=$t(Ve(o,"bgColor")),{scopeId:P}=Tt();return Bt({VTab:{color:Ve(o,"color"),direction:Ve(o,"direction"),stacked:Ve(o,"stacked"),fixed:Ve(o,"fixedTabs"),sliderColor:Ve(o,"sliderColor"),hideSlider:Ve(o,"hideSlider")}}),_e(()=>{const D=la.filterProps(o),c=!!(u.window||o.items.length>0);return a(Ye,null,[a(la,ce(D,{modelValue:V.value,"onUpdate:modelValue":d=>V.value=d,class:["v-tabs",`v-tabs--${o.direction}`,`v-tabs--align-tabs-${o.alignTabs}`,{"v-tabs--fixed-tabs":o.fixedTabs,"v-tabs--grow":o.grow,"v-tabs--stacked":o.stacked},m.value,I.value,o.class],style:[{"--v-tabs-height":jl(o.height)},w.value,o.style],role:"tablist",symbol:ql},P,i),{default:()=>{var d;return[((d=u.default)==null?void 0:d.call(u))??p.value.map(C=>{var f;return((f=u.tab)==null?void 0:f.call(u,{item:C}))??a($l,ce(C,{key:C.text,value:C.value}),{default:u[`tab.${C.value}`]?()=>{var N;return(N=u[`tab.${C.value}`])==null?void 0:N.call(u,{item:C})}:void 0})})]}}),c&&a(Pa,ce({modelValue:V.value,"onUpdate:modelValue":d=>V.value=d,key:"tabs-window"},P),{default:()=>{var d;return[p.value.map(C=>{var f;return((f=u.item)==null?void 0:f.call(u,{item:C}))??a(Tl,{value:C.value},{default:()=>{var N;return(N=u[`item.${C.value}`])==null?void 0:N.call(u,{item:C})}})}),(d=u.window)==null?void 0:d.call(u)]}})])}),{}}}),J={0:"無",1:"華語導遊",2:"外語導遊",3:"華語領隊",4:"外語領隊"},yn={class:"d-flex align-center flex-wrap"},Vn={__name:"GuideLicenseSelection",props:{modelValue:{type:Array,default:()=>[]},errorMessages:{type:[String,Array],default:""}},emits:["update:modelValue"],setup(o,{emit:v}){const i=o,u=v,V=Object.entries(J).filter(([D])=>D!=="0").map(([D,c])=>({value:Number(D),title:c})),p=y(i.modelValue.length===0||i.modelValue.length===1&&i.modelValue[0]===0?[{value:0,title:J[0]}]:i.modelValue.filter(D=>D!==0).map(D=>({value:D,title:J[D]}))),m=$(()=>p.value.length===1&&p.value[0].value===0),I=D=>{if(!D||D.length===0){p.value=[{value:0,title:J[0]}],u("update:modelValue",[0]);return}const c=D.filter(d=>d&&(typeof d.value=="number"||typeof d=="number")).map(d=>typeof d=="number"?d:d.value).filter(d=>d!==0);c.length===0?(p.value=[{value:0,title:J[0]}],u("update:modelValue",[0])):(p.value=c.map(d=>({value:d,title:J[d]})),u("update:modelValue",c))},w=()=>{p.value=[{value:0,title:J[0]}],u("update:modelValue",[0])},P=D=>{const c=p.value.filter(d=>d.value!==D.value);c.length===0?(p.value=[{value:0,title:J[0]}],u("update:modelValue",[0])):(p.value=c,u("update:modelValue",c.map(d=>d.value)))};return ae(()=>i.modelValue,D=>{D.length===0||D.length===1&&D[0]===0?p.value=[{value:0,title:J[0]}]:p.value=D.filter(c=>c!==0).map(c=>({value:c,title:J[c]}))},{deep:!0}),(D,c)=>(E(),W(Jt,{modelValue:p.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>p.value=d),I],items:t(V),label:"導遊領隊證",variant:"outlined",density:"compact","error-messages":i.errorMessages,multiple:"",chips:!m.value,clearable:"","onClick:clear":w},{selection:s(()=>[Y("div",yn,[m.value?(E(),ue(Ye,{key:0},[U(G(t(J)[0]),1)],64)):(E(!0),ue(Ye,{key:1},ha(p.value,d=>(E(),W(Hl,{key:d.value,class:"ma-1",closable:"",size:"small","onClick:close":C=>P(d)},{default:s(()=>[U(G(t(J)[d.value]),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1},8,["modelValue","items","error-messages","chips"]))}},hn={class:"d-flex justify-space-between align-center mb-4"},Dn={class:"d-flex justify-space-between align-center mb-4 mt-2"},Sn={__name:"DependentInsurance",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(o,{emit:v}){const{convertToROCDate:i}=oe(),u=o,V=v,p=y(u.modelValue),m=y({}),I=(c,d)=>{var N;const C=`${c}-${d}`;if(!m.value[C])return"";const f=p.value[c];if(d==="dependentName"&&!((N=f.dependentName)!=null&&N.trim()))return"請輸入受保人姓名";if(d==="dependentIDNumber"){const x=/^[A-Za-z][12]\d{8}$/,Q=f.dependentIDNumber;if(!(Q!=null&&Q.trim()))return"請輸入身分證號碼";if(!x.test(Q))return"身分證號碼格式錯誤"}return d==="dependentBirthDate"&&!f.dependentBirthDate?"請選擇出生日期":""},w=()=>{p.value.length<4&&p.value.push({dependentName:"",dependentIDNumber:"",dependentRelationship:"",dependentBirthDate:null,dependentInsuranceStartDate:null,dependentInsuranceEndDate:null})},P=c=>{p.value.splice(c,1),Object.keys(m.value).forEach(d=>{d.startsWith(`${c}-`)&&delete m.value[d]})},D=(c,d)=>{m.value[`${c}-${d}`]=!0};return ae(()=>u.modelValue,c=>{p.value=c},{deep:!0}),ae(p,c=>{V("update:modelValue",c)},{deep:!0}),(c,d)=>{const C=Sa("v-date-input");return E(),W(r,{cols:"12",class:"px-0"},{default:s(()=>[Y("div",hn,[d[1]||(d[1]=Y("h4",{class:"text-blue-grey-darken-2 ms-1"}," 眷屬加保資料 ",-1)),p.value.length<4?(E(),W(L,{key:0,color:"blue-grey-darken-2",variant:"outlined",size:"small","prepend-icon":"mdi-account-plus",onClick:w},{default:s(()=>d[0]||(d[0]=[U(" 新增眷屬 ")])),_:1})):F("",!0)]),a(Mt,{group:""},{default:s(()=>[(E(!0),ue(Ye,null,ha(p.value,(f,N)=>(E(),W(El,{key:N,class:"px-4 mb-3",variant:"outlined"},{default:s(()=>[Y("div",Dn,[Y("h5",null,"眷屬 "+G(N+1),1),a(L,{icon:"",color:"red-lighten-1",variant:"plain",size:"small",onClick:x=>P(N)},{default:s(()=>[a(de,null,{default:s(()=>d[2]||(d[2]=[U("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),a(M,{class:"mb-2"},{default:s(()=>[a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:f.dependentName,"onUpdate:modelValue":x=>f.dependentName=x,"error-messages":I(N,"dependentName"),label:"*眷屬姓名",variant:"outlined",density:"compact",clearable:"",onBlur:x=>D(N,"dependentName")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:f.dependentIDNumber,"onUpdate:modelValue":x=>f.dependentIDNumber=x,"error-messages":I(N,"dependentIDNumber"),label:"*眷屬身分證號",variant:"outlined",density:"compact",clearable:"",maxlength:"10",onBlur:x=>D(N,"dependentIDNumber")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(C,{modelValue:f.dependentBirthDate,"onUpdate:modelValue":x=>f.dependentBirthDate=x,"error-messages":I(N,"dependentBirthDate"),label:"*眷屬生日","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentBirthDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認",onBlur:x=>D(N,"dependentBirthDate"),"onClick:clear":x=>f.dependentBirthDate=null},null,8,["modelValue","onUpdate:modelValue","error-messages","hint","onBlur","onClick:clear"])]),_:2},1024),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:f.dependentRelationship,"onUpdate:modelValue":x=>f.dependentRelationship=x,label:"眷屬關係",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(C,{modelValue:f.dependentInsuranceStartDate,"onUpdate:modelValue":x=>f.dependentInsuranceStartDate=x,label:"加保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentInsuranceStartDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":x=>f.dependentInsuranceStartDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(C,{modelValue:f.dependentInsuranceEndDate,"onUpdate:modelValue":x=>f.dependentInsuranceEndDate=x,label:"退保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentInsuranceEndDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":x=>f.dependentInsuranceEndDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},kn=Da(Sn,[["__scopeId","data-v-d20631a1"]]),xn={class:"d-flex flex-column gap-2"},In={key:0},wn={key:1},Cn={key:2},Pn={key:3},Nn={key:4},Un={key:5},Rn={class:"d-flex align-center overflow-hidden h-25"},En={class:"list-content ps-4 py-3 mb-4"},$n={style:{"font-weight":"800"},class:"text-cyan-darken-2"},Tn={class:"card-title ps-4 py-3"},Bn={class:"mb-4"},An={__name:"user",setup(o){const{apiAuth:v}=Lt(),i=Yt(),u=Ot(),{smAndUp:V,mdAndUp:p,lgAndUp:m,xlAndUp:I,name:w}=zt(),P=$(()=>V.value?"default":"small"),D=$(()=>V.value?"64":"default"),c=y(!1),d=y(null),C=y(1),f=y(!1),N={class:"header-bg"},x=y([]),Q=$(()=>{const l={};return(x.value||[]).forEach((g,R)=>{var B,z;(B=g.dependentName)!=null&&B.trim()||(l[`dependentInsurance.${R}.dependentName`]="請輸入受保人姓名"),(z=g.dependentIDNumber)!=null&&z.trim()||(l[`dependentInsurance.${R}.dependentIDNumber`]="請輸入身分證號碼"),g.dependentBirthDate||(l[`dependentInsurance.${R}.dependentBirthDate`]="請選擇出生日期")}),l}),te=y([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),ne=[{title:"否",value:!1},{title:"是",value:!0}],T=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],A=[{title:"否",value:!1},{title:"是",value:!0}],j=[{title:"1%",value:1},{title:"2%",value:2},{title:"3%",value:3},{title:"4%",value:4},{title:"5%",value:5},{title:"6%",value:6}],H=y("basic"),he=y(!1),De=y(!1),ee=y(!1),Se=y(!1),Le=y(!1),ke=y(!1),xe=y(!1),Ie=y(null),pl=y(""),Al=y(!1),We=y(!1),le=y({open:!1,id:""}),Ml=y(null),Xl=y(null),se=y({open:!1,userId:"",userName:"",loading:!1}),Z=y(null),_=y([]),Na=y([]),Fl=y(Object.entries(aa).map(([l,e])=>({value:Number(l),title:e}))),Ua=$(()=>[...gl.value].sort((l,e)=>{const g=l.companyId||"",R=e.companyId||"";return g.localeCompare(R)}).map(l=>({title:`${l.name}`,value:l._id}))),gl=y([]),Ra=$(()=>[{title:"全部",value:""},...[...gl.value].sort((l,e)=>{const g=l.companyId||"",R=e.companyId||"";return g.localeCompare(R)}).map(l=>({title:l.name,value:l._id}))]),Gl=y([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),Ea=y([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),$a=$(()=>I.value?"1280":m.value?"1080":p.value?"800":V.value?"600":"100%"),Ta=ra({dependentName:h().required("請輸入受保人姓名"),dependentRelationship:h(),dependentBirthDate:K().nullable().required("請輸入受保人生日"),dependentIDNumber:h().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入受保人身分證號碼"),dependentInsuranceStartDate:K().nullable(),dependentInsuranceEndDate:K().nullable()}),Ba=ra({email:h().email("請輸入正確的 email 格式"),personalEmail:h().email("請輸入正確的 email 格式").nullable(),IDNumber:h().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入身分證號碼"),gender:h().required("請選擇姓別"),name:h().required("請輸入姓名"),englishName:h().nullable(),phoneNumber:h().nullable(),cellphone:h().min(10,"手機號碼需為10位數字").max(10,"手機號碼勿超過10位數字").nullable(),salary:h().nullable(),extNumber:h().nullable(),printNumber:h().nullable(),birthDate:K().nullable().required("請選擇生日"),permanentAddress:h().required("請輸入戶籍地址"),contactAddress:h().required("請輸入聯絡地址"),company:h().nullable().required("請選擇公司"),department:h().required("請選擇部門"),jobTitle:h().nullable(),role:Ll().required("請選擇使用者身分別"),cowellAccount:h().nullable(),cowellPassword:h().nullable(),userId:h(),employmentStatus:h().required("請選擇任職狀態"),hireDate:K().required("請選擇入職日期"),resignationDate:K().nullable(),emergencyName:h().nullable(),emergencyPhoneNumber:h().nullable(),emergencyCellphone:h().nullable(),emergencyRelationship:h().nullable(),note:h().nullable(),healthInsuranceStartDate:K().nullable(),healthInsuranceEndDate:K().nullable(),laborInsuranceStartDate:K().nullable(),laborInsuranceEndDate:K().nullable(),salaryBank:h().nullable(),salaryBankBranch:h().nullable(),salaryAccountNumber:h().nullable(),guideLicense:da().of(Ll().oneOf([0,1,2,3,4],"導遊證類型必須是 0, 1, 2, 3,4 之一")).default([]),tourManager:ia(),YSRCAccount:h().nullable(),YSRCPassword:h().nullable(),YS168Account:h().nullable(),YS168Password:h().nullable(),disabilityStatus:h().nullable(),indigenousStatus:ia().nullable(),voluntaryPensionRate:Ll().nullable().transform((l,e)=>e===""?null:l),voluntaryPensionStartDate:K().nullable(),voluntaryPensionEndDate:K().nullable(),dependentInsurance:da().of(Ta).default([])}),{handleSubmit:Aa,isSubmitting:Yl,resetForm:Zl}=Xt({validationSchema:Ba,initialValues:{email:"",personalEmail:"",IDNumber:"",gender:"",name:"",englishName:"",phoneNumber:"",cellphone:"",salary:"",extNumber:"",printNumber:"",birthDate:null,permanentAddress:"",contactAddress:"",company:1,department:"",jobTitle:"",role:0,cowellAccount:"",cowellPassword:"",userId:"",employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyPhoneNumber:"",emergencyCellphone:"",emergencyRelationship:"",note:"",healthInsuranceStartDate:null,healthInsuranceEndDate:null,laborInsuranceStartDate:null,laborInsuranceEndDate:null,salaryBank:"",salaryBankBranch:"",salaryAccountNumber:"",guideLicense:[],tourManager:!1,YSRCAccount:"",YSRCPassword:"",YS168Account:"",YS168Password:"",disabilityStatus:"否",indigenousStatus:!1,voluntaryPensionRate:null,voluntaryPensionStartDate:null,voluntaryPensionEndDate:null,dependentInsurance:[]},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:$(()=>({isEditing:c.value}))}),je=b("email"),He=b("personalEmail"),we=b("IDNumber"),ie=b("gender"),qe=b("name"),Xe=b("englishName"),fl=b("phoneNumber"),Fe=b("cellphone"),Ge=b("salary"),Ze=b("extNumber"),Ke=b("printNumber"),pe=b("birthDate"),ge=b("permanentAddress"),Ce=b("contactAddress"),Je=b("company"),fe=b("department",void 0,{validateOnValueUpdate:!1}),Qe=b("jobTitle"),el=b("role"),ll=b("cowellAccount"),al=b("cowellPassword"),tl=b("userId",void 0,{validateOnValueUpdate:!1,transform:l=>l??""}),be=b("employmentStatus"),ve=b("hireDate"),re=b("resignationDate"),nl=b("emergencyName"),bl=b("emergencyPhoneNumber"),sl=b("emergencyCellphone"),ol=b("emergencyRelationship",void 0,{validateOnValueUpdate:!1,transform:l=>l??""}),ul=b("note",void 0,{validateOnValueUpdate:!1,transform:l=>l??""}),Pe=b("healthInsuranceStartDate"),Ne=b("healthInsuranceEndDate"),Ue=b("laborInsuranceStartDate"),Re=b("laborInsuranceEndDate"),yl=b("salaryBank"),Vl=b("salaryBankBranch"),hl=b("salaryAccountNumber"),rl=b("guideLicense"),Dl=b("tourManager"),Sl=b("YSRCAccount"),kl=b("YSRCPassword"),xl=b("YS168Account"),Il=b("YS168Password"),wl=b("disabilityStatus"),Cl=b("indigenousStatus"),Pl=b("voluntaryPensionRate"),Ee=b("voluntaryPensionStartDate"),$e=b("voluntaryPensionEndDate"),Ma=b("dependentInsurance"),{rocDate:Ya}=oe(pe),{rocDate:Oa}=oe(ve),{rocDate:za}=oe(re),{rocDate:_a}=oe(Pe),{rocDate:La}=oe(Ne),{rocDate:Wa}=oe(Ue),{rocDate:ja}=oe(Re),{rocDate:Ha}=oe(Ee),{rocDate:qa}=oe($e),Nl=y(10),Ul=y([{key:"userId",order:"asc"}]),q=y(1),Te=y([]),Ol=y(0),dl=[{title:"員編",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],Be=y(!0),zl=y(0),Kl=y(""),S=y({role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]}),il=y(""),Xa=l=>aa[l]||"未知",O=l=>l?new Date(l):null,Fa=$(()=>i.isSuperAdmin||i.isHR||i.isAdmin),Ga=$(()=>["xl","xxl"].includes(w.value)?dl:["lg"].includes(w.value)?dl.filter(l=>l.key!=="employmentStatus"):["md"].includes(w.value)?dl.filter(l=>l.key!=="cellphone"&&l.key!=="email"&&l.key!=="employmentStatus"):["sm"].includes(w.value)?dl.filter(l=>l.key!=="company.name"&&l.key!=="department.name"&&l.key!=="cellphone"&&l.key!=="email"&&l.key!=="employmentStatus"):dl.filter(l=>l.key!=="company.name"&&l.key!=="department.name"&&l.key!=="cellphone"&&l.key!=="email"&&l.key!=="role"&&l.key!=="employmentStatus")),Za=async()=>{try{const{data:l}=await v.get("/department/all");Na.value=l.result}catch(l){console.error("加載部門失敗",l),u({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},Ka=async()=>{try{const{data:l}=await v.get("/company/all");l.success&&(gl.value=l.result)}catch(l){console.error("載入公司列表失敗:",l),u({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},Ja=async()=>{if(!S.value.companyId){_.value=[];return}try{const{data:l}=await v.get("/department/all",{params:{companyId:S.value.companyId}});l.success?_.value=l.result||[]:(console.warn("找不到該公司的部門"),_.value=[])}catch(l){console.error("載入部門失敗:",l),u({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),_.value=[]}},ye=async(l,e)=>{l?q.value=1:e&&(q.value=e),await vl()},vl=async()=>{var l,e,g,R;Be.value=!0,console.log("Selected date range:",S.value.dateRange);try{const B={page:q.value,itemsPerPage:Nl.value,sortBy:((l=Ul.value[0])==null?void 0:l.key)||"userId",sortOrder:((e=Ul.value[0])==null?void 0:e.order)||"asc",quickSearch:il.value,...S.value,department:S.value.department};S.value.dateType&&S.value.dateRange&&S.value.dateRange.length>0&&(B.dateType=S.value.dateType,B.startDate=S.value.dateRange[0].toISOString(),B.endDate=S.value.dateRange[S.value.dateRange.length-1].toISOString()),console.log("Query params:",B);const{data:z}=await v.get("/user/search",{params:B});z.success&&(Te.value=z.result.data,zl.value=z.result.totalItems)}catch(B){console.error("搜索失败:",B),u({text:((R=(g=B==null?void 0:B.response)==null?void 0:g.data)==null?void 0:R.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{Be.value=!1}},Qa=async()=>{var l,e;try{se.value.loading=!0,await v.post(`/user/${se.value.userId}/send-initial-password`);const g=Te.value.findIndex(R=>R._id===se.value.userId);g!==-1&&(Te.value[g].isFirstLogin=!1),u({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),Ql()}catch(g){console.error("發送初始密碼失敗:",g),u({text:((e=(l=g==null?void 0:g.response)==null?void 0:l.data)==null?void 0:e.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{se.value.loading=!1}},et=Aa(async l=>{var e,g,R,B;try{if(c.value){const z=q.value,n={...l,company:Z.value,healthInsuranceStartDate:l.healthInsuranceStartDate||null,healthInsuranceEndDate:l.healthInsuranceEndDate||null,laborInsuranceStartDate:l.laborInsuranceStartDate||null,laborInsuranceEndDate:l.laborInsuranceEndDate||null,voluntaryPensionStartDate:l.voluntaryPensionStartDate||null,voluntaryPensionEndDate:l.voluntaryPensionEndDate||null,birthDate:l.birthDate||null,hireDate:l.hireDate||null,resignationDate:l.resignationDate||null},{data:Ae}=await v.patch(`/user/${le.value.id}`,n),Me=Te.value.findIndex(me=>me._id===le.value.id);Me!==-1&&(Te.value[Me]={...Ae.result,company:gl.value.find(me=>me._id===Z.value),department:{_id:l.department,name:((e=_.value.find(me=>me._id===l.department))==null?void 0:e.name)||""}}),await ye(!1,z)}else await v.post("/user",{...l,company:Z.value}),await ye(!0);await Promise.all([(g=Ie.value)==null?void 0:g.refreshChart(),(R=Ml.value)==null?void 0:R.refreshChart(),(B=Xl.value)==null?void 0:B.refreshData()]),u({text:c.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),_l()}catch(z){const n=lt(z);u({text:n,snackbarProps:{color:"red-lighten-1"}})}}),lt=l=>l.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[l.response.data.message]||l.response.data.message:"發生錯誤",Jl=async l=>{var e,g;if(We.value=!0,!Fa.value){u({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}We.value=!0,Al.value=!0,C.value=q.value,le.value.open=!0,l?(c.value=!0,le.value.id=l._id,l.company&&(Z.value=l.company._id,Je.value.value=l.company._id,await ml(l.company._id),l.department&&l.department._id&&(fe.value.value=l.department._id)),je.value.value=l.email,He.value.value=l.personalEmail,qe.value.value=l.name,Xe.value.value=l.englishName,ie.value.value=l.gender,we.value.value=l.IDNumber,fl.value.value=l.phoneNumber,Fe.value.value=l.cellphone,pe.value.value=O(l.birthDate),ge.value.value=l.permanentAddress,Ce.value.value=l.contactAddress,nl.value.value=l.emergencyName,bl.value.value=l.emergencyPhoneNumber,sl.value.value=l.emergencyCellphone,ol.value.value=l.emergencyRelationship??"",tl.value.value=l.userId??"",Qe.value.value=l.jobTitle,Ge.value.value=l.salary,el.value.value=l.role,Ze.value.value=l.extNumber,Ke.value.value=l.printNumber,be.value.value=l.employmentStatus,ve.value.value=O(l.hireDate),re.value.value=O(l.resignationDate),ul.value.value=l.note??"",ll.value.value=l.cowellAccount,al.value.value=l.cowellPassword,Sl.value.value=l.YSRCAccount,kl.value.value=l.YSRCPassword,xl.value.value=l.YS168Account,Il.value.value=l.YS168Password,rl.value.value=l.guideLicense,Dl.value.value=l.tourManager,wl.value.value=l.disabilityStatus,Cl.value.value=l.indigenousStatus,Pe.value.value=O(l.healthInsuranceStartDate),Ne.value.value=O(l.healthInsuranceEndDate),Ue.value.value=O(l.laborInsuranceStartDate),Re.value.value=O(l.laborInsuranceEndDate),Pl.value.value=l.voluntaryPensionRate,Ee.value.value=O(l.voluntaryPensionStartDate),$e.value.value=O(l.voluntaryPensionEndDate),yl.value.value=l.salaryBank,Vl.value.value=l.salaryBankBranch,hl.value.value=l.salaryAccountNumber,Ma.value.value=l.dependentInsurance||[],d.value={email:l.email,personalEmail:l.personalEmail,name:l.name,englishName:l.englishName,gender:l.gender,IDNumber:l.IDNumber,phoneNumber:l.phoneNumber,cellphone:l.cellphone,birthDate:O(l.birthDate),permanentAddress:l.permanentAddress,contactAddress:l.contactAddress,emergencyName:l.emergencyName,emergencyPhoneNumber:l.emergencyPhoneNumber,emergencyCellphone:l.emergencyCellphone,emergencyRelationship:l.emergencyRelationship??"",company:(e=l.company)==null?void 0:e._id,department:(g=l.department)==null?void 0:g._id,userId:l.userId??"",jobTitle:l.jobTitle,salary:l.salary,role:l.role,extNumber:l.extNumber,printNumber:l.printNumber,employmentStatus:l.employmentStatus,hireDate:O(l.hireDate),resignationDate:O(l.resignationDate),note:l.note??"",cowellAccount:l.cowellAccount,cowellPassword:l.cowellPassword,YSRCAccount:l.YSRCAccount,YSRCPassword:l.YSRCPassword,YS168Account:l.YS168Account,YS168Password:l.YS168Password,guideLicense:l.guideLicense,tourManager:l.tourManager,disabilityStatus:l.disabilityStatus,indigenousStatus:l.indigenousStatus,healthInsuranceStartDate:O(l.healthInsuranceStartDate),healthInsuranceEndDate:O(l.healthInsuranceEndDate),laborInsuranceStartDate:O(l.laborInsuranceStartDate),laborInsuranceEndDate:O(l.laborInsuranceEndDate),voluntaryPensionRate:l.voluntaryPensionRate,voluntaryPensionStartDate:O(l.voluntaryPensionStartDate),voluntaryPensionEndDate:O(l.voluntaryPensionEndDate),salaryBank:l.salaryBank,salaryBankBranch:l.salaryBankBranch,salaryAccountNumber:l.salaryAccountNumber,dependentInsurance:l.dependentInsurance||[]},localStorage.setItem("userTablePage",q.value.toString())):(c.value=!1,le.value.id="",d.value=null,Z.value=null,_.value=[],Zl(),ve.value.value=new Date),setTimeout(()=>{We.value=!1,Al.value=!1},300)},_l=()=>{le.value.open=!1,Z.value=null,_.value=[],d.value=null,Zl()},at=l=>{se.value={open:!0,userId:l._id,userName:l.name,loading:!1}},Ql=()=>{se.value={open:!1,userId:"",userName:"",loading:!1}},tt=async()=>{var l,e,g,R,B;try{Be.value=!0,await v.delete(`/user/${le.value.id}`),_l(),await ye(!0),await((l=Ie.value)==null?void 0:l.refreshChart()),await((e=Ml.value)==null?void 0:e.refreshChart()),await((g=Xl.value)==null?void 0:g.refreshData()),u({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(z){console.error("Delete user error:",z),u({text:((B=(R=z==null?void 0:z.response)==null?void 0:R.data)==null?void 0:B.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{Be.value=!1,f.value=!1}},nt=()=>{ge.value.value&&(Ce.value.value=ge.value.value)},st=l=>{l<1&&(l=1);const e=Math.ceil(zl.value/Nl.value);l>e&&(l=e),q.value!==l&&(q.value=l,localStorage.removeItem("userTablePage"),ye(!1))},ot=()=>{S.value={role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]},_.value=[],Kl.value="",il.value="",q.value=1,vl()},ut=$(()=>{if(!c.value)return!0;if(!d.value)return!1;const l={email:je.value.value,personalEmail:He.value.value,name:qe.value.value,englishName:Xe.value.value,gender:ie.value.value,IDNumber:we.value.value,permanentAddress:ge.value.value,contactAddress:Ce.value.value,birthDate:pe.value.value,company:Z.value,department:fe.value.value,cellphone:Fe.value.value,salary:Ge.value.value,extNumber:Ze.value.value,printNumber:Ke.value.value,guideLicense:rl.value.value,jobTitle:Qe.value.value,role:el.value.value,employmentStatus:be.value.value,hireDate:ve.value.value,resignationDate:re.value.value,emergencyName:nl.value.value,emergencyCellphone:sl.value.value,emergencyRelationship:ol.value.value??"",note:ul.value.value??"",userId:tl.value.value??"",cowellAccount:ll.value,cowellPassword:al.value};return Object.keys(d.value).some(e=>{if(["note","emergencyRelationship"].includes(e)){const g=d.value[e]??"",R=l[e]??"";return g!==R}if(e==="birthDate"||e==="hireDate"||e==="resignationDate"){const g=d.value[e]?new Date(d.value[e]).toISOString():null,R=l[e]?new Date(l[e]).toISOString():null;return g!==R}return d.value[e]!==l[e]})}),ml=async l=>{var e;try{if(le.value.open?Z.value=l:S.value={...S.value,companyId:l,department:""},!l){_.value=[];return}console.log("正在載入公司ID的部門:",l);const{data:g}=await v.get("/department/all",{params:{companyId:l,itemsPerPage:100}});console.log("API 返回的部門數據:",g),g.success?(_.value=((e=g.result)==null?void 0:e.data)||[],console.log("設置過濾後的部門列表:",_.value)):(console.warn("找不到該公司的部門"),_.value=[])}catch(g){console.error("載入部門失敗:",g),u({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),_.value=[]}},rt=ua.debounce(l=>{ye(!0)},300),ea=ua.debounce(l=>{q.value=1,vl()},300);return ae(il,l=>{ea(l)}),ae(Z,async l=>{l!=null?(Je.value.value=l,fe.value.value="",await ml(l)):(Je.value.value=null,fe.value.value="",_.value=[])}),ae(()=>S.value.companyId,async l=>{l?await ml(l):_.value=[]}),ae(()=>S.value.dateRange,l=>{console.log("選擇的日期區間:",l)}),ae(Je.value,l=>{l&&l.value!==null&&l.value!==void 0&&(Z.value=l.value)}),ae(be.value,l=>{We.value||(l==="離職"?xe.value=!0:(xe.value=!1,re.value.value=null))}),ae(()=>we.value.value,l=>{if(!l){ie.value.value=null,pl.value="";return}if(l.length===10&&l!==pl.value&&!Al.value&&/^[A-Za-z][12]\d{8}$/.test(l)){const g=l.charAt(1);g==="1"?(ie.value.value="男性",pl.value=l,u({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):g==="2"&&(ie.value.value="女性",pl.value=l,u({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),ta(async()=>{const l=localStorage.getItem("userTablePage");l&&(q.value=parseInt(l),Ol.value++),await Ka(),await Za(),await Ja(),await vl()}),ta(()=>{const l=localStorage.getItem("userTablePage");l&&parseInt(l)>0?(q.value=parseInt(l),Ol.value++,localStorage.removeItem("userTablePage")):q.value=1}),_t(()=>{rt.cancel(),ea.cancel()}),(l,e)=>{var R,B,z;const g=Sa("v-date-input");return E(),ue(Ye,null,[a(Qt,{"max-width":"2500"},{default:s(()=>[a(M,{class:"rounded-xl py-0 mt-2 ma-sm-1 ma-md-6"},{default:s(()=>[t(I)?(E(),W(r,{key:0,class:"ps-4 py-0"},{default:s(()=>[a(Gt,{ref_key:"chartRef",ref:Ie},null,512)]),_:1})):F("",!0),t(p)?(E(),W(r,{key:1,class:"ps-4 py-0"},{default:s(()=>[a(Zt,{ref_key:"turnoverChartRef",ref:Ml},null,512)]),_:1})):F("",!0),a(r,{class:"pa-0 mb-6 mb-sm-0"},{default:s(()=>[a(El,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-5 pb-4 pb-sm-5",elevation:"4",rounded:"xl",height:"100%"},{default:s(()=>[a(cl,{class:"d-flex align-center"},{default:s(()=>[a(M,{class:"h-100"},{default:s(()=>[a(r,{cols:"12",class:"d-flex flex-column justify-center"},{default:s(()=>[a(M,null,{default:s(()=>e[86]||(e[86]=[Y("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),a(M,null,{default:s(()=>[a(r,{cols:"12",sm:"6"},{default:s(()=>[a(X,{modelValue:S.value.companyId,"onUpdate:modelValue":[e[0]||(e[0]=n=>S.value.companyId=n),ml],items:Ra.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:s(()=>[a(X,{modelValue:S.value.department,"onUpdate:modelValue":e[1]||(e[1]=n=>S.value.department=n),items:_.value,label:"部門","item-title":"name","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!S.value.companyId},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),a(M,null,{default:s(()=>[a(r,{cols:"12",sm:"6"},{default:s(()=>[a(X,{modelValue:S.value.role,"onUpdate:modelValue":e[2]||(e[2]=n=>S.value.role=n),items:Fl.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:s(()=>[a(X,{modelValue:S.value.employmentStatus,"onUpdate:modelValue":e[3]||(e[3]=n=>S.value.employmentStatus=n),items:Gl.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),a(M,null,{default:s(()=>[a(r,{cols:"12",sm:"6"},{default:s(()=>[a(X,{modelValue:S.value.dateType,"onUpdate:modelValue":e[4]||(e[4]=n=>S.value.dateType=n),items:te.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:s(()=>[a(g,{modelValue:S.value.dateRange,"onUpdate:modelValue":e[5]||(e[5]=n=>S.value.dateRange=n),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1}),a(M,null,{default:s(()=>[a(r,{cols:"6",class:"pe-0 py-0"},{default:s(()=>[Y("div",xn,[e[89]||(e[89]=Y("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),a(Wt,{modelValue:S.value.gender,"onUpdate:modelValue":e[6]||(e[6]=n=>S.value.gender=n),column:"",class:"custom-chip-group"},{default:s(()=>[a(Hl,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:s(()=>e[87]||(e[87]=[U(" 男性 ")])),_:1}),a(Hl,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:s(()=>e[88]||(e[88]=[U(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(M,null,{default:s(()=>[a(r,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[a(M,null,{default:s(()=>[a(r,{cols:"3"},{default:s(()=>[a(L,{color:"grey",block:"",onClick:ot},{default:s(()=>[a(de,null,{default:s(()=>e[90]||(e[90]=[U("mdi-refresh")])),_:1})]),_:1})]),_:1}),a(r,null,{default:s(()=>[a(L,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:Be.value,block:"",onClick:e[7]||(e[7]=()=>{console.log("Current search criteria:",S.value.value),vl()})},{default:s(()=>e[91]||(e[91]=[U(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(M,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:s(()=>[a(r,{cols:"12",class:"ps-3 pb-6"},{default:s(()=>e[92]||(e[92]=[Y("h3",null," 員工管理 ",-1)])),_:1}),a(r,{cols:"12"},{default:s(()=>[a(M,null,{default:s(()=>[a(r,null,{default:s(()=>[a(M,null,{default:s(()=>[a(r,null,{default:s(()=>[a(L,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:e[8]||(e[8]=n=>Jl(null))},{default:s(()=>e[93]||(e[93]=[U(" 新增使用者 ")])),_:1})]),_:1}),a(r,{sm:"4",lg:"3",xl:"2"},{default:s(()=>[a(M,{class:"d-flex align-center"},{default:s(()=>[t(p)?(E(),W(r,{key:0,cols:"2",class:"ps-lg-5"},{default:s(()=>[Bl(a(de,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[va,"可搜尋員編、姓名、公司Email、手機、分機、職稱、備註","start"]])]),_:1})):F("",!0),a(r,null,{default:s(()=>[a(k,{modelValue:il.value,"onUpdate:modelValue":e[9]||(e[9]=n=>il.value=n),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(r,{cols:"12"},{default:s(()=>[(E(),W(en,{key:Ol.value,"items-per-page":Nl.value,"onUpdate:itemsPerPage":[e[10]||(e[10]=n=>Nl.value=n),e[12]||(e[12]=n=>ye(!1))],"sort-by":Ul.value,"onUpdate:sortBy":[e[11]||(e[11]=n=>Ul.value=n),e[13]||(e[13]=n=>ye(!1))],page:q.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:Te.value,headers:Ga.value,"header-props":N,loading:Be.value,"items-length":zl.value,search:Kl.value,hover:"","onUpdate:page":st},{item:s(({item:n,index:Ae})=>{var Me,me;return[Y("tr",{class:jt({"odd-row":Ae%2===0,"even-row":Ae%2!==0})},[Y("td",null,G(n.userId),1),Y("td",null,G(n.name),1),t(m)?(E(),ue("td",In,G(n.email),1)):F("",!0),t(m)?(E(),ue("td",wn,G(n.cellphone),1)):F("",!0),t(p)?(E(),ue("td",Cn,G(((Me=n.company)==null?void 0:Me.name)||""),1)):F("",!0),t(p)?(E(),ue("td",Pn,G(((me=n.department)==null?void 0:me.name)||""),1)):F("",!0),Y("td",null,G(n.extNumber),1),t(V)?(E(),ue("td",Nn,G(Xa(n.role)),1)):F("",!0),t(I)?(E(),ue("td",Un,G(n.employmentStatus),1)):F("",!0),Y("td",Rn,[a(L,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:P.value,ripple:!1,onClick:dt=>Jl(n)},{default:s(()=>[a(de,null,{default:s(()=>e[94]||(e[94]=[U("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),n.isFirstLogin?Bl((E(),W(L,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:P.value,ripple:!1,onClick:dt=>at(n)},{default:s(()=>[a(de,null,{default:s(()=>e[95]||(e[95]=[U("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[va,"發送初始密碼"]]):F("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(na,{modelValue:se.value.open,"onUpdate:modelValue":e[14]||(e[14]=n=>se.value.open=n),persistent:"","max-width":"360"},{default:s(()=>[a(El,{class:"rounded-lg pa-4"},{default:s(()=>[e[100]||(e[100]=Y("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),Y("div",En,[e[96]||(e[96]=U(" 確定要發送系統生成的初始密碼給 ")),Y("span",$n,G(se.value.userName),1),e[97]||(e[97]=U(" 嗎？ "))]),a(sa,{class:"pa-4 pt-0"},{default:s(()=>[a(oa),a(L,{color:"grey",variant:"outlined",size:P.value,onClick:Ql},{default:s(()=>e[98]||(e[98]=[U(" 取消 ")])),_:1},8,["size"]),a(L,{color:"teal-darken-1",variant:"outlined",size:P.value,loading:se.value.loading,onClick:Qa},{default:s(()=>e[99]||(e[99]=[U(" 確認發送 ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(na,{modelValue:le.value.open,"onUpdate:modelValue":e[81]||(e[81]=n=>le.value.open=n),persistent:"",width:$a.value},{default:s(()=>[a(ln,{disabled:t(Yl),onSubmit:Ht(t(et),["prevent"])},{default:s(()=>[a(El,{class:"rounded-lg px-4 py-6"},{default:s(()=>[Y("div",Tn,G(le.value.id?"員工資料編輯":"新增員工"),1),Y("div",Bn,[a(bn,{modelValue:H.value,"onUpdate:modelValue":e[15]||(e[15]=n=>H.value=n),color:"blue-grey-darken-2","align-tabs":"center","mobile-breakpoint":"sm",density:"compact",height:"40"},{default:s(()=>[a($l,{value:"basic",class:"tab-title"},{default:s(()=>[a(de,{start:""},{default:s(()=>e[101]||(e[101]=[U(" mdi-account-outline ")])),_:1}),e[102]||(e[102]=U(" 個人資訊 "))]),_:1}),a($l,{value:"employment",class:"tab-title"},{default:s(()=>[a(de,{start:""},{default:s(()=>e[103]||(e[103]=[U(" mdi-briefcase-outline ")])),_:1}),e[104]||(e[104]=U(" 任職資訊 "))]),_:1}),a($l,{value:"insurance",class:"tab-title"},{default:s(()=>[a(de,{start:""},{default:s(()=>e[105]||(e[105]=[U(" mdi-shield-account-outline ")])),_:1}),e[106]||(e[106]=U(" 保險及薪轉資訊 "))]),_:1})]),_:1},8,["modelValue"])]),We.value&&c.value?(E(),W(cl,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:s(()=>[a(qt,{indeterminate:"",color:"blue-grey-darken-2",size:D.value},null,8,["size"])]),_:1})):(E(),W(Pa,{key:1,modelValue:H.value,"onUpdate:modelValue":e[79]||(e[79]=n=>H.value=n),class:"overflow-y-auto mx-1"},{default:s(()=>[a(Tl,{value:"basic"},{default:s(()=>[a(cl,{class:"mt-3 pa-3"},{default:s(()=>[a(M,null,{default:s(()=>[a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(qe).value.value,"onUpdate:modelValue":e[16]||(e[16]=n=>t(qe).value.value=n),"error-messages":t(qe).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Xe).value.value,"onUpdate:modelValue":e[17]||(e[17]=n=>t(Xe).value.value=n),"error-messages":t(Xe).errorMessage.value,label:"英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(we).value.value,"onUpdate:modelValue":e[18]||(e[18]=n=>t(we).value.value=n),"error-messages":t(we).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(ie).value.value,"onUpdate:modelValue":e[19]||(e[19]=n=>t(ie).value.value=n),items:Ea.value,"error-messages":t(ie).errorMessage.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(wl).value.value,"onUpdate:modelValue":e[20]||(e[20]=n=>t(wl).value.value=n),"error-messages":t(wl).errorMessage.value,items:T,"item-title":"title","item-value":"value",label:"身心障礙身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(Cl).value.value,"onUpdate:modelValue":e[21]||(e[21]=n=>t(Cl).value.value=n),"error-messages":t(Cl).errorMessage.value,items:A,"item-title":"title","item-value":"value",label:"原住民身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(pe).value.value,"onUpdate:modelValue":e[22]||(e[22]=n=>t(pe).value.value=n),"error-messages":t(pe).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:t(Ya),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[23]||(e[23]=n=>t(pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(fl).value.value,"onUpdate:modelValue":e[24]||(e[24]=n=>t(fl).value.value=n),"error-messages":t(fl).errorMessage.value,label:"室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Fe).value.value,"onUpdate:modelValue":e[25]||(e[25]=n=>t(Fe).value.value=n),"error-messages":t(Fe).errorMessage.value,label:"手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"6",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(He).value.value,"onUpdate:modelValue":e[26]||(e[26]=n=>t(He).value.value=n),"error-messages":t(He).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(ge).value.value,"onUpdate:modelValue":e[27]||(e[27]=n=>t(ge).value.value=n),"error-messages":t(ge).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Ce).value.value,"onUpdate:modelValue":e[28]||(e[28]=n=>t(Ce).value.value=n),"error-messages":t(Ce).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":s(()=>[a(an,{location:"top","close-delay":"200"},{activator:s(({tprops:n})=>[a(de,ce(n,{icon:"mdi-content-copy",onClick:nt}),null,16)]),default:s(()=>[e[107]||(e[107]=U(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(M,{class:"d-flex align-center my-2"},{default:s(()=>[a(r,{cols:"4"},{default:s(()=>[a(Rl)]),_:1}),a(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[108]||(e[108]=[U(" 緊急連絡人資訊 ")])),_:1}),a(r,{cols:"4"},{default:s(()=>[a(Rl)]),_:1})]),_:1})]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(nl).value.value,"onUpdate:modelValue":e[29]||(e[29]=n=>t(nl).value.value=n),"error-messages":t(nl).errorMessage.value,label:"緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(bl).value.value,"onUpdate:modelValue":e[30]||(e[30]=n=>t(bl).value.value=n),"error-messages":t(bl).errorMessage.value,label:"緊急聯絡人室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(sl).value.value,"onUpdate:modelValue":e[31]||(e[31]=n=>t(sl).value.value=n),"error-messages":t(sl).errorMessage.value,label:"緊急聯絡人手機",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(ol).value.value,"onUpdate:modelValue":e[32]||(e[32]=n=>t(ol).value.value=n),"error-messages":t(ol).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),a(Tl,{value:"employment"},{default:s(()=>[a(cl,{class:"mt-3 pa-3"},{default:s(()=>[a(M,null,{default:s(()=>[c.value?(E(),W(r,{key:0,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(tl).value.value,"onUpdate:modelValue":e[33]||(e[33]=n=>t(tl).value.value=n),"error-messages":t(tl).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",maxlength:"4",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):F("",!0),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:Z.value,"onUpdate:modelValue":[e[34]||(e[34]=n=>Z.value=n),ml],"error-messages":t(Je).errorMessage.value,items:Ua.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(fe).value.value,"onUpdate:modelValue":e[35]||(e[35]=n=>t(fe).value.value=n),items:_.value,"error-messages":t(fe).errorMessage.value,"item-title":"name","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Qe).value.value,"onUpdate:modelValue":e[36]||(e[36]=n=>t(Qe).value.value=n),"error-messages":t(Qe).errorMessage.value,label:"職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(el).value.value,"onUpdate:modelValue":e[37]||(e[37]=n=>t(el).value.value=n),"error-messages":t(el).errorMessage.value,items:Fl.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(ve).value.value,"onUpdate:modelValue":e[38]||(e[38]=n=>t(ve).value.value=n),"error-messages":t(ve).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:t(Oa),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[39]||(e[39]=n=>t(ve).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(be).value.value,"onUpdate:modelValue":e[40]||(e[40]=n=>t(be).value.value=n),"error-messages":t(be).errorMessage.value,items:Gl.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),t(re).value.value?(E(),W(r,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(re).value.value,"onUpdate:modelValue":e[41]||(e[41]=n=>t(re).value.value=n),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(za),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[42]||(e[42]=n=>t(re).value.value=null)},null,8,["modelValue","hint"])]),_:1})):F("",!0),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Ze).value.value,"onUpdate:modelValue":e[43]||(e[43]=n=>t(Ze).value.value=n),"error-messages":t(Ze).errorMessage.value,label:"分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Ke).value.value,"onUpdate:modelValue":e[44]||(e[44]=n=>t(Ke).value.value=n),"error-messages":t(Ke).errorMessage.value,label:"列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Ge).value.value,"onUpdate:modelValue":e[45]||(e[45]=n=>t(Ge).value.value=n),"error-messages":t(Ge).errorMessage.value,label:"基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(Dl).value.value,"onUpdate:modelValue":e[46]||(e[46]=n=>t(Dl).value.value=n),"error-messages":t(Dl).errorMessage.value,items:ne,"item-title":"title","item-value":"value",label:"旅遊經理人",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",md:"8",lg:"6",class:"pb-0"},{default:s(()=>[a(Vn,{modelValue:t(rl).value.value,"onUpdate:modelValue":e[47]||(e[47]=n=>t(rl).value.value=n),"error-messages":t(rl).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(M,{class:"d-flex align-center my-2"},{default:s(()=>[a(r,{cols:"4"},{default:s(()=>[a(Rl)]),_:1}),a(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[109]||(e[109]=[U(" 系統帳號資訊 ")])),_:1}),a(r,{cols:"4"},{default:s(()=>[a(Rl)]),_:1})]),_:1})]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(je).value.value,"onUpdate:modelValue":e[48]||(e[48]=n=>t(je).value.value=n),"error-messages":t(je).errorMessage.value,label:"公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(ll).value.value,"onUpdate:modelValue":e[49]||(e[49]=n=>t(ll).value.value=n),"error-messages":t(ll).errorMessage.value,label:"科威帳號",type:he.value?"text":"password","append-inner-icon":he.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[50]||(e[50]=n=>he.value=!he.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(al).value.value,"onUpdate:modelValue":e[51]||(e[51]=n=>t(al).value.value=n),"error-messages":t(al).errorMessage.value,label:"科威密碼",type:De.value?"text":"password","append-inner-icon":De.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[52]||(e[52]=n=>De.value=!De.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Sl).value.value,"onUpdate:modelValue":e[53]||(e[53]=n=>t(Sl).value.value=n),"error-messages":t(Sl).errorMessage.value,label:"YSRC帳號",type:ee.value?"text":"password","append-inner-icon":ee.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[54]||(e[54]=n=>ee.value=!ee.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(kl).value.value,"onUpdate:modelValue":e[55]||(e[55]=n=>t(kl).value.value=n),"error-messages":t(kl).errorMessage.value,label:"YSRC密碼",type:Se.value?"text":"password","append-inner-icon":Se.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[56]||(e[56]=n=>Se.value=!Se.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(xl).value.value,"onUpdate:modelValue":e[57]||(e[57]=n=>t(xl).value.value=n),"error-messages":t(xl).errorMessage.value,label:"YS168帳號",type:Le.value?"text":"password","append-inner-icon":Le.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[58]||(e[58]=n=>Le.value=!Le.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Il).value.value,"onUpdate:modelValue":e[59]||(e[59]=n=>t(Il).value.value=n),"error-messages":t(Il).errorMessage.value,label:"YS168密碼",type:ke.value?"text":"password","append-inner-icon":ke.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[60]||(e[60]=n=>ke.value=!ke.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(ul).value.value,"onUpdate:modelValue":e[61]||(e[61]=n=>t(ul).value.value=n),"error-messages":t(ul).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),a(Tl,{value:"insurance"},{default:s(()=>[a(cl,{class:"mt-3 pa-3"},{default:s(()=>[a(M,null,{default:s(()=>[a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(Pe).value.value,"onUpdate:modelValue":e[62]||(e[62]=n=>t(Pe).value.value=n),"error-messages":t(Pe).errorMessage.value,label:"健保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(_a),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[63]||(e[63]=n=>t(Pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(Ne).value.value,"onUpdate:modelValue":e[64]||(e[64]=n=>t(Ne).value.value=n),"error-messages":t(Ne).errorMessage.value,label:"健保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(La),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[65]||(e[65]=n=>t(Ne).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(Ue).value.value,"onUpdate:modelValue":e[66]||(e[66]=n=>t(Ue).value.value=n),"error-messages":t(Ue).errorMessage.value,label:"勞保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Wa),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[67]||(e[67]=n=>t(Ue).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(Re).value.value,"onUpdate:modelValue":e[68]||(e[68]=n=>t(Re).value.value=n),"error-messages":t(Re).errorMessage.value,label:"勞保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(ja),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[69]||(e[69]=n=>t(Re).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(X,{modelValue:t(Pl).value.value,"onUpdate:modelValue":e[70]||(e[70]=n=>t(Pl).value.value=n),"error-messages":t(Pl).errorMessage.value,items:j,"item-title":"title","item-value":"value",label:"勞退自提比率",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t(Ee).value.value,"onUpdate:modelValue":e[71]||(e[71]=n=>t(Ee).value.value=n),"error-messages":t(Ee).errorMessage.value,label:"勞退自提加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Ha),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[72]||(e[72]=n=>t(Ee).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[a(g,{modelValue:t($e).value.value,"onUpdate:modelValue":e[73]||(e[73]=n=>t($e).value.value=n),"error-messages":t($e).errorMessage.value,label:"勞保自提退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(qa),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[74]||(e[74]=n=>t($e).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(yl).value.value,"onUpdate:modelValue":e[75]||(e[75]=n=>t(yl).value.value=n),"error-messages":t(yl).errorMessage.value,label:"薪轉銀行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(Vl).value.value,"onUpdate:modelValue":e[76]||(e[76]=n=>t(Vl).value.value=n),"error-messages":t(Vl).errorMessage.value,label:"薪轉分行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[a(k,{modelValue:t(hl).value.value,"onUpdate:modelValue":e[77]||(e[77]=n=>t(hl).value.value=n),"error-messages":t(hl).errorMessage.value,label:"薪轉帳戶號碼",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12"},{default:s(()=>[a(kn,{modelValue:x.value,"onUpdate:modelValue":e[78]||(e[78]=n=>x.value=n),errors:Q.value},null,8,["modelValue","errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(sa,{class:"px-3 mt-4"},{default:s(()=>[a(tn,null,{default:s(({isHovering:n,props:Ae})=>[c.value?(E(),W(L,ce({key:0},Ae,{color:n?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:P.value,onClick:e[80]||(e[80]=Me=>f.value=!0)}),{default:s(()=>e[110]||(e[110]=[U(" 永久刪除 ")])),_:2},1040,["color","size"])):F("",!0)]),_:1}),a(oa),a(L,{color:"red-lighten-1",variant:"outlined",size:P.value,loading:t(Yl),onClick:_l},{default:s(()=>e[111]||(e[111]=[U(" 取消 ")])),_:1},8,["size","loading"]),a(L,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:P.value,loading:t(Yl),disabled:c.value&&!ut.value},{default:s(()=>e[112]||(e[112]=[U(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),a(Ft,{modelValue:xe.value,"onUpdate:modelValue":e[82]||(e[82]=n=>xe.value=n),onConfirm:e[83]||(e[83]=n=>{t(re).value.value=n}),onCancel:e[84]||(e[84]=n=>t(be).value.value="在職")},null,8,["modelValue"]),a(Kt,{modelValue:f.value,"onUpdate:modelValue":e[85]||(e[85]=n=>f.value=n),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((R=d.value)==null?void 0:R.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${((B=d.value)==null?void 0:B.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((z=d.value)==null?void 0:z.name)||"","input-label":"員工姓名",onConfirm:tt},null,8,["modelValue","message","expected-name"])],64)}}},es=Da(An,[["__scopeId","data-v-b93daf75"]]);export{es as default};
