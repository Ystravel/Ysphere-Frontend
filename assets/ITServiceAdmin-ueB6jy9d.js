import{aH as De,x as k,aI as Pe,o as W,z as Se,A as vt,B as bt,c as e,T as Xe,aJ as ft,aK as yt,X as Qe,a4 as mt,U as Ce,_ as ht,Z as xt,P as kt,a2 as O,a3 as s,an as wt,a1 as D,ad as Ee,ae as _t,a8 as z,ag as Ne,a7 as je,ah as h,K as F,a6 as ve,aa as d,ab as me,a9 as He,as as zt,aL as et,at as Oe,H as tt,ai as ge,aj as lt,aq as at,a5 as ot,am as st}from"./index-CjvnmibE.js";import{l as It}from"./lodash-DHyxJ22h.js";import{V as Vt}from"./VContainer-DWVRi4H_.js";import{a as S,V as R}from"./VRow-ds3MicoJ.js";import{V as St}from"./VAutocomplete-RwAVVNYV.js";import{V as Fe,a as Ct}from"./VDataTableServer-B5WpIS_H.js";import{b as nt,V as Re,a as We}from"./VList-DLLgVg6g.js";import{V as M}from"./VDivider-F13Wpc2o.js";import{T as be}from"./index-D02Xd6EV.js";import{V as Dt}from"./VForm-BgrLBsai.js";import{V as Tt}from"./VTextarea-Bi_EYvtT.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-CwylDLc6.js";import"./VTooltip-Cj7i4HeH.js";function se(a,m){m===void 0&&(m={});var v=m.insertAt;if(a&&typeof document<"u"){var g=document.head||document.getElementsByTagName("head")[0],L=document.createElement("style");L.type="text/css",v==="top"&&g.firstChild?g.insertBefore(L,g.firstChild):g.appendChild(L),L.styleSheet?L.styleSheet.cssText=a:L.appendChild(document.createTextNode(a))}}se(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");se('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');se(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");se(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");se(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");se(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const T="vel",$=De({name:"SvgIcon",props:{type:{type:String,default:""}},setup:a=>()=>e("svg",{class:`${T}-icon icon`,"aria-hidden":"true"},[e("use",{"xlink:href":`#icon-${a.type}`},null)])}),Te=typeof window<"u",oe=()=>{};let gt=!1;if(Te)try{const a={};Object.defineProperty(a,"passive",{get(){gt=!0}}),window.addEventListener("test-passive",oe,a)}catch{}const it=function(a,m,v){let g=arguments.length>3&&arguments[3]!==void 0&&arguments[3];Te&&a.addEventListener(m,v,!!gt&&{capture:!1,passive:g})},rt=(a,m,v)=>{Te&&a.removeEventListener(m,v)},Mt=a=>{a.preventDefault()},$t=Object.prototype.toString,Ge=a=>m=>$t.call(m).slice(8,-1)===a,Lt=a=>!!a&&Ge("Object")(a),ut=a=>!!a&&Ge("String")(a);function Bt(a){return a!=null}const qt=De({name:"Toolbar",props:{zoomIn:{type:Function,default:oe},zoomOut:{type:Function,default:oe},rotateLeft:{type:Function,default:oe},rotateRight:{type:Function,default:oe},resize:{type:Function,default:oe},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:a=>()=>e("div",{class:`${T}-toolbar`},[!a.zoomDisabled&&e(Ce,null,[e("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:a.zoomIn},[e($,{type:"zoomin"},null)]),e("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:a.zoomOut},[e($,{type:"zoomout"},null)])]),e("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:a.resize},[e($,{type:"resize"},null)]),!a.rotateDisabled&&e(Ce,null,[e("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:a.rotateLeft},[e($,{type:"rotate-left"},null)]),e("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:a.rotateRight},[e($,{type:"rotate-right"},null)])])])}),At=()=>e("div",{class:`${T}-loading`},[e("div",{class:"ring"},null)]),Yt=()=>e("div",{class:`${T}-on-error`},[e("div",{class:"ring"},null),e($,{type:"img-broken"},null)]),Ut=(a,m)=>{let{slots:v}=m;return e("div",{class:`${T}-img-title`},[v.default?v.default():""])},Pt=De({name:"DefaultIcons",setup:()=>()=>e("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[e("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[e("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),e("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[e("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),e("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[e("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),e("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[e("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),e("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[e("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),e("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[e("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),e("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[e("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),e("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),e("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),e("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[e("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),e("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[e("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),e("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),fe=Te?window:global;let dt=Date.now();function Xt(a){const m=Date.now(),v=Math.max(0,16-(m-dt)),g=setTimeout(a,v);return dt=m+v,g}function Ze(a){return(fe.requestAnimationFrame||Xt).call(fe,a)}function ct(a){(fe.cancelAnimationFrame||fe.clearTimeout).call(fe,a)}function pt(a,m){const v=a.clientX-m.clientX,g=a.clientY-m.clientY;return Math.sqrt(v*v+g*g)}function Ke(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!yt(a)}var Je=De({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":a=>!0,"on-prev":(a,m)=>!0,"on-next":(a,m)=>!0,"on-prev-click":(a,m)=>!0,"on-next-click":(a,m)=>!0,"on-index-change":(a,m)=>!0,"on-rotate":a=>!0},setup(a,m){let{emit:v,slots:g}=m;const{imgRef:L,imgState:P,setImgSize:ye}=(()=>{const t=k(),n=Pe({width:0,height:0,maxScale:1});return{imgRef:t,imgState:n,setImgSize:()=>{if(t.value){const{width:r,height:b,naturalWidth:I}=t.value;n.maxScale=I/r,n.width=r,n.height=b}}}})(),w=k(a.index),ne=k(""),p=Pe({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),c=Pe({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),V=W(()=>{return t=a.imgs,Ge("Array")(t)?a.imgs.map(n=>typeof n=="string"?{src:n}:function(r){return Lt(r)&&ut(r.src)}(n)?n:void 0).filter(Bt):ut(a.imgs)?[{src:a.imgs}]:[];var t}),ie=W(()=>V.value[w.value]),X=W(()=>{var t;return(t=V.value[w.value])==null?void 0:t.src}),E=W(()=>{var t;return(t=V.value[w.value])==null?void 0:t.title}),Q=W(()=>{var t;return(t=V.value[w.value])==null?void 0:t.alt}),Me=W(()=>({cursor:c.loadError?"default":a.moveDisabled?c.dragging?"grabbing":"grab":"move",top:`calc(50% + ${p.top}px)`,left:`calc(50% + ${p.left}px)`,transition:c.dragging||c.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${p.scale}) rotate(${p.rotateDeg}deg)`})),q=()=>{v("hide")},ee=()=>{p.scale=1,p.lastScale=1,p.rotateDeg=0,p.top=0,p.left=0,c.loadError=!1,c.dragging=!1,c.loading=!0},Z=(t,n)=>{const r=w.value;ee(),w.value=t,V.value[w.value]===V.value[t]&&Qe(()=>{c.loading=!1}),a.visible&&r!==t&&(n&&n(r,t),v("on-index-change",r,t))},B=()=>{const t=w.value,n=a.loop?(t+1)%V.value.length:t+1;!a.loop&&n>V.value.length-1||Z(n,(r,b)=>{v("on-next",r,b),v("on-next-click",r,b)})},N=()=>{const t=w.value;let n=t-1;if(t===0){if(!a.loop)return;n=V.value.length-1}Z(n,(r,b)=>{v("on-prev",r,b),v("on-prev-click",r,b)})},he=t=>{Math.abs(1-t)<.05?t=1:Math.abs(P.maxScale-t)<.05&&(t=P.maxScale),p.lastScale=p.scale,p.scale=t},K=()=>{const t=p.scale+a.zoomScale;t<P.maxScale*a.maxZoom&&he(t)},te=()=>{const t=p.scale-a.zoomScale;t>a.minZoom&&he(t)},re=()=>{const t=p.rotateDeg%360;v("on-rotate",Math.abs(t<0?t+360:t))},A=()=>{p.rotateDeg-=90,re()},x=()=>{p.rotateDeg+=90,re()},j=()=>{p.scale=1,p.top=0,p.left=0},ue=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!a.moveDisabled&&t===0},{onMouseDown:J,onMouseMove:y,onMouseUp:_}=((t,n,r)=>{let b,I=!1;return{onMouseDown:f=>{t.initX=t.lastX=f.clientX,t.initY=t.lastY=f.clientY,n.dragging=!0,I=!1,f.stopPropagation()},onMouseUp:f=>{r(f.button)&&ct(b),n.dragging=!1,I=!1},onMouseMove:f=>{if(n.dragging)if(r(f.button)){if(I)return;I=!0,b=Ze(()=>{const{top:Y,left:U,lastY:C,lastX:ae}=t;t.top=Y-C+f.clientY,t.left=U-ae+f.clientX,t.lastX=f.clientX,t.lastY=f.clientY,I=!1})}else t.lastX=f.clientX,t.lastY=f.clientY;f.stopPropagation()}}})(p,c,ue),{onTouchStart:$e,onTouchMove:Le,onTouchEnd:Be}=((t,n,r,b,I)=>{let f,Y=!1;return{onTouchStart:U=>{const{touches:C}=U;C.length>1&&I()?(r.gesturing=!0,n.touches=C):(n.initX=n.lastX=C[0].clientX,n.initY=n.lastY=C[0].clientY,r.dragging=!0),U.stopPropagation()},onTouchMove:U=>{if(Y)return;const{touches:C}=U,{lastX:ae,lastY:_e,left:ze,top:Ie,scale:Ve}=n;if(!r.gesturing&&r.dragging){if(!C[0])return;const{clientX:H,clientY:G}=C[0];b()?f=Ze(()=>{n.lastX=H,n.lastY=G,n.top=Ie-_e+G,n.left=ze-ae+H,Y=!1}):(n.lastX=H,n.lastY=G)}else r.gesturing&&n.touches.length>1&&C.length>1&&I()&&(f=Ze(()=>{const H=(pt(n.touches[0],n.touches[1])-pt(C[0],C[1]))/t.width;n.touches=C;const G=Ve-1.3*H;G>.5&&G<1.5*t.maxScale&&(n.scale=G),Y=!1}))},onTouchEnd:()=>{ct(f),r.dragging=!1,r.gesturing=!1,Y=!1}}})(P,p,c,ue,()=>!a.pinchDisabled),qe=()=>{a.dblclickDisabled||(p.scale!==P.maxScale?(p.lastScale=p.scale,p.scale=P.maxScale):p.scale=p.lastScale)},xe=t=>{c.loadError||c.gesturing||c.loading||c.dragging||c.wheeling||!a.scrollDisabled||a.zoomDisabled||(c.wheeling=!0,setTimeout(()=>{c.wheeling=!1},80),t.deltaY<0?K():te())},ke=t=>{const n=t;a.visible&&(!a.escDisabled&&n.key==="Escape"&&a.visible&&q(),n.key==="ArrowLeft"&&(a.rtl?B():N()),n.key==="ArrowRight"&&(a.rtl?N():B()))},Ae=()=>{a.maskClosable&&q()},le=()=>{ye()},de=()=>{c.loading=!1},Ye=t=>{c.loading=!1,c.loadError=!0,v("on-error",t)},ce=()=>{a.visible&&ye()};Se(()=>a.index,t=>{t<0||t>=V.value.length||Z(t)}),Se(()=>c.dragging,(t,n)=>{const r=!t&&n;if(!ue()&&r){const b=p.lastX-p.initX,I=p.lastY-p.initY,f=a.swipeTolerance;Math.abs(b)>Math.abs(I)&&(b<-1*f?B():b>f&&N())}}),Se(()=>a.visible,t=>{if(t){ee();const n=V.value.length;if(n===0)return w.value=0,c.loading=!1,void Qe(()=>c.loadError=!0);w.value=a.index>=n?n-1:a.index<0?0:a.index,a.scrollDisabled&&we()}else a.scrollDisabled&&pe()});const we=()=>{document&&(ne.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},pe=()=>{document&&(document.body.style.overflowY=ne.value)};vt(()=>{it(document,"keydown",ke),it(window,"resize",ce)}),bt(()=>{rt(document,"keydown",ke),rt(window,"resize",ce),a.scrollDisabled&&pe()});const Ue=()=>c.loading?g.loading?g.loading({key:"loading"}):e(At,{key:"img-loading"},null):c.loadError?g.onerror?g.onerror({key:"onerror"}):e(Yt,{key:"img-on-error"},null):e("div",{class:`${T}-img-wrapper`,style:Me.value,key:"img-wrapper"},[e("img",{alt:Q.value,ref:L,draggable:"false",class:`${T}-img`,src:X.value,onMousedown:J,onMouseup:_,onMousemove:y,onTouchstart:$e,onTouchmove:Le,onTouchend:Be,onLoad:le,onDblclick:qe,onDragstart:t=>{t.preventDefault()}},null)]),u=()=>{if(g["prev-btn"])return g["prev-btn"]({prev:N});if(V.value.length<=1)return;const t=!a.loop&&w.value<=0;return e("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(t?"disable":""),onClick:N},[a.rtl?e($,{type:"next"},null):e($,{type:"prev"},null)])},l=()=>{if(g["next-btn"])return g["next-btn"]({next:B});if(V.value.length<=1)return;const t=!a.loop&&w.value>=V.value.length-1;return e("div",{role:"button","aria-label":"next image button",class:"btn__next "+(t?"disable":""),onClick:B},[a.rtl?e($,{type:"prev"},null):e($,{type:"next"},null)])},o=()=>{if(!(a.titleDisabled||c.loading||c.loadError))return g.title?g.title({currentImg:ie.value}):E.value?e(Ut,null,{default:()=>[E.value]}):void 0},i=()=>{let t;if(a.visible)return e("div",{onTouchmove:Mt,class:[`${T}-modal`,a.rtl?"is-rtl":""],onClick:mt(Ae,["self"]),onWheel:xe},[e(Pt,null,null),e(Xe,{name:`${T}-fade`,mode:"out-in"},Ke(t=Ue())?t:{default:()=>[t]}),e("img",{style:"display:none;",src:X.value,onError:Ye,onLoad:de},null),e("div",{class:`${T}-btns-wrapper`},[u(),l(),o(),g["close-btn"]?g["close-btn"]({close:q}):e("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:q},[e($,{type:"close"},null)]),g.toolbar?g.toolbar({toolbarMethods:{zoomIn:K,zoomOut:te,rotate:A,rotateLeft:A,rotateRight:x,resize:j},zoomIn:K,zoomOut:te,rotate:A,rotateLeft:A,rotateRight:x,resize:j}):e(qt,{zoomIn:K,zoomOut:te,resize:j,rotateLeft:A,rotateRight:x,rotateDisabled:a.rotateDisabled,zoomDisabled:a.zoomDisabled},null)])])};return()=>{let t;if(a.teleport){let n;return e(ft,{to:a.teleport},{default:()=>[e(Xe,{name:`${T}-fade`},Ke(n=i())?n:{default:()=>[n]})]})}return e(Xe,{name:`${T}-fade`},Ke(t=i())?t:{default:()=>[t]})}}});const Et=Object.assign(Je,{install:a=>{a.component(Je.name,Je)}}),Nt={class:"d-flex justify-space-between align-center mb-2 mb-sm-4"},jt={class:"ms-1"},Ht={key:1},Ot={class:"d-flex justify-center align-center"},Ft={class:"ps-3 pt-3 pb-5 card-title d-inline"},Rt={key:0,style:{"font-size":"12px"},class:"text-grey-darken-1"},Wt={class:"d-flex flex-column gap-4"},Zt={class:"list-content"},Kt={class:"list-content"},Jt={class:"list-content"},Gt={class:"list-content"},Qt={class:"list-content"},el={class:"list-content"},tl={class:"list-content"},ll={class:"list-content"},al={style:{"white-space":"pre-wrap"},class:"list-content"},ol={class:"list-content"},sl={style:{"white-space":"pre-wrap"},class:"list-content"},nl={key:0,class:"text-grey text-caption mt-1"},il={__name:"ITServiceAdmin",setup(a){const{apiAuth:m}=wt(),v=xt(),{smAndUp:g,mdAndUp:L,lgAndUp:P,xlAndUp:ye}=kt(),w=W(()=>g.value?"default":"small"),ne=u=>{if(!u)return"";const l=new Date(u),o=f=>String(f).padStart(2,"0"),i=l.getFullYear(),t=o(l.getMonth()+1),n=o(l.getDate()),r=o(l.getHours()),b=o(l.getMinutes()),I=o(l.getSeconds());return`${i}/${t}/${n} ${r}:${b}:${I}`},p=k(!1),c=k([]),V=k(0),ie=k(10),X=k(1),E=k([]),Q=k(""),Me={class:"header-bg"},q=k([]),ee=k(!1),Z=k(""),B=k([]),N=k(!1),he=async()=>{var u,l;try{console.log("開始載入處理者清單");const{data:o}=await m.get("/serviceTicket/assignees");console.log("API 回應資料:",o),o.success&&Array.isArray(o.result)?B.value=o.result:(console.error("API 回傳的資料格式不正確:",o),B.value=[])}catch(o){console.error("載入處理者清單失敗:",o),o.response&&console.error("錯誤回應:",o.response.data),v({text:((l=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:l.message)||"載入處理者清單失敗",snackbarProps:{color:"error"}}),B.value=[]}},K=k(0),te=()=>{K.value+=1},re=async(u,l)=>{var o,i;try{N.value=!0;const{data:t}=await m.patch(`/serviceTicket/${u._id}`,{assigneeId:l}),n=t.result.assigneeId,r=c.value.findIndex(b=>b._id===u._id);r!==-1&&(c.value[r]={...c.value[r],assigneeId:n}),v({text:l?"處理者更新成功":"已移除指派",snackbarProps:{color:"success"}}),te()}catch(t){console.error("更新處理者失敗:",t),v({text:((i=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:i.message)||"更新處理者失敗",snackbarProps:{color:"error"}})}finally{N.value=!1}},A=k({status:null,category:null,priority:null}),x=k({requesterId:null,category:null,priority:null,status:null}),j=[{title:"維修編號",align:"start",key:"ticketId",sortable:!0,minWidth:"120px"},{title:"標題",align:"start",key:"title",sortable:!0,minWidth:"120px"},{title:"申請人",align:"start",key:"requesterId.name",sortable:!0,minWidth:"100px"},{title:"分機",align:"start",key:"requesterId.extNumber",sortable:!0,minWidth:"100px"},{title:"類別",align:"start",key:"category",sortable:!0},{title:"優先度",align:"start",key:"priority",sortable:!0,minWidth:"100px"},{title:"狀態",align:"start",key:"status",sortable:!0},{title:"地點",align:"start",key:"location",sortable:!0,minWidth:"64px"},{title:"圖片",align:"center",key:"attachments",sortable:!1,minWidth:"100px"},{title:"處理者",align:"start",key:"assigneeId",sortable:!0,minWidth:"100px"},{title:"問題描述",align:"start",key:"description",sortable:!1},{title:"操作",align:"center",key:"actions",sortable:!1}],ue=W(()=>ye.value?j:P.value?j.filter(u=>!["description"].includes(u.key)):L.value?j.filter(u=>!["description","category","location","assigneeId.name"].includes(u.key)):j.filter(u=>["ticketId","requesterId.name","requesterId.extNumber","title","status","actions","attachments"].includes(u.key))),J=k({visible:!1,index:0,imgs:[]}),y=k({show:!1,ticket:null,solution:"",loading:!1,error:"",pendingStatus:null}),_=k({show:!1,ticket:null}),$e=u=>{_.value={show:!0,ticket:u}},Le=u=>({待處理:"grey-darken-1",處理中:"blue",待確認:"orange-darken-1",已完成:"green",已取消:"red"})[u]||"grey",Be=u=>({低:"green",中:"blue",高:"orange-darken-1",緊急:"red"})[u]||"grey",qe=It.debounce(async u=>{ee.value=!0;try{const{data:l}=await m.get("/user/suggestions",{params:{search:u}});l.success&&(q.value=l.result)}catch(l){console.error("搜索申請人失敗:",l),q.value=[]}finally{ee.value=!1}},300),xe=()=>{Z.value="",q.value=[],x.value.requesterId=null},ke=()=>{x.value={requesterId:null,category:null,priority:null,status:null},Q.value="",xe(),de()},Ae=async(u,l)=>{if(l==="已完成"&&!u.solution){ce(u,l);return}await pe(u,l)},le=async()=>{var u,l,o;p.value=!0;try{const i={page:X.value,limit:ie.value,sort:E.value.length?`${E.value[0].order==="desc"?"-":""}${E.value[0].key}`:"-createdAt",search:Q.value};(u=x.value.requesterId)!=null&&u._id&&(i.requesterId=x.value.requesterId._id),x.value.category&&(i.category=x.value.category),x.value.priority&&(i.priority=x.value.priority),x.value.status&&(i.status=x.value.status);const{data:t}=await m.get("/serviceTicket/all",{params:i});t.success&&(c.value=t.result.data,V.value=t.result.total)}catch(i){console.error("獲取維修請求失敗:",i),v({text:((o=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:o.message)||"獲取維修請求失敗",snackbarProps:{color:"error"}})}finally{p.value=!1}},de=async()=>{X.value=1,await le()},Ye=u=>{J.value={visible:!0,index:0,imgs:u.map(l=>({src:l.url,title:l.publicId}))}},ce=(u,l=null)=>{y.value={show:!0,ticket:u,solution:u.solution||"",loading:!1,error:"",pendingStatus:l}},we=()=>{y.value={show:!1,ticket:null,solution:"",loading:!1,error:"",pendingStatus:null}},pe=async(u,l)=>{var o,i;try{const{data:t}=await m.patch(`/serviceTicket/${u._id}`,{status:l}),n=c.value.findIndex(r=>r._id===u._id);n!==-1&&(c.value[n]={...t.result,requesterId:{...c.value[n].requesterId,...t.result.requesterId}}),v({text:"狀態更新成功",snackbarProps:{color:"success"}})}catch(t){console.error("更新狀態失敗:",t),v({text:((i=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:i.message)||"更新狀態失敗",snackbarProps:{color:"error"}})}},Ue=async u=>{var l,o,i,t,n;if(u==null||u.preventDefault(),!((l=y.value.solution)!=null&&l.trim())){y.value.error="請輸入處理方案";return}y.value.loading=!0;try{const{data:r}=await m.patch(`/serviceTicket/${y.value.ticket._id}`,{solution:y.value.solution}),b=c.value.findIndex(I=>I._id===y.value.ticket._id);b!==-1&&(c.value[b]={...r.result,requesterId:{...c.value[b].requesterId,...r.result.requesterId}}),v({text:"處理方案儲存成功",snackbarProps:{color:"teal-lighten-1"}}),y.value.pendingStatus&&await pe(c.value[b],y.value.pendingStatus),we()}catch(r){console.error("儲存處理方案失敗:",r),y.value.error=((i=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:i.message)||"儲存處理方案失敗",v({text:((n=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:n.message)||"儲存處理方案失敗",snackbarProps:{color:"red-lighten-1"}})}finally{y.value.loading=!1}};return Se([()=>A.value.status,()=>A.value.category,()=>A.value.priority],()=>{X.value=1,le()}),vt(async()=>{console.log("組件載入");try{await he(),await le()}catch(u){console.error("初始化失敗:",u)}}),(u,l)=>(D(),O(Vt,{"max-width":"2200"},{default:s(()=>[e(R,{class:"pt-md-5"},{default:s(()=>[e(S,{cols:"12",lg:"4",xl:"3"},{default:s(()=>[e(R,null,{default:s(()=>[e(S,{cols:"12",class:"mt-1 px-lg-10"},{default:s(()=>[e(Ee,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-4 px-sm-4 px-xl-8"},{default:s(()=>[e(_t,{class:"font-weight-bold d-flex align-center"},{default:s(()=>l[14]||(l[14]=[z(" 搜尋條件 ")])),_:1}),e(Ne,{class:"pa-2"},{default:s(()=>[e(R,null,{default:s(()=>[e(S,{cols:"12",sm:"6",lg:"12"},{default:s(()=>[e(St,{modelValue:x.value.requesterId,"onUpdate:modelValue":l[0]||(l[0]=o=>x.value.requesterId=o),"search-input":Z.value,"onUpdate:searchInput":l[1]||(l[1]=o=>Z.value=o),items:q.value,loading:ee.value,label:"申請人","return-object":"","item-props":o=>({title:`${o.name} (${o.userId})`,value:o}),variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:search":je(qe),"onClick:clear":xe},{selection:s(({item:o})=>{var i;return[z(h((i=o==null?void 0:o.props)==null?void 0:i.title),1)]}),_:1},8,["modelValue","search-input","items","loading","item-props","onUpdate:search"])]),_:1}),e(S,{cols:"12",sm:"6",lg:"12"},{default:s(()=>[e(Fe,{modelValue:x.value.category,"onUpdate:modelValue":l[2]||(l[2]=o=>x.value.category=o),items:["硬體問題","軟體問題","網路問題","帳號權限","其他"],label:"類別",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",lg:"12"},{default:s(()=>[e(Fe,{modelValue:x.value.priority,"onUpdate:modelValue":l[3]||(l[3]=o=>x.value.priority=o),items:["低","中","高","緊急"],label:"優先度",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",lg:"12"},{default:s(()=>[e(Fe,{modelValue:x.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>x.value.status=o),items:["待處理","處理中","待確認","已完成","已取消"],label:"狀態",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(R,null,{default:s(()=>[e(S,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[e(R,{class:"d-flex justify-space-between"},{default:s(()=>[e(S,{cols:"3"},{default:s(()=>[e(F,{color:"grey",width:"40",block:"",onClick:ke},{default:s(()=>[e(ve,null,{default:s(()=>l[15]||(l[15]=[z("mdi-refresh")])),_:1})]),_:1})]),_:1}),e(S,{cols:"9",class:"ps-0"},{default:s(()=>[e(F,{color:"blue-grey-darken-1","prepend-icon":"mdi-magnify",loading:p.value,block:"",onClick:de},{default:s(()=>l[16]||(l[16]=[z(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12",lg:"8",xl:"9",class:"px-6 ps-lg-4 pe-lg-12 mb-6"},{default:s(()=>[e(R,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-4 px-md-10 mt-1 bg-white"},{default:s(()=>[e(S,{cols:"12"},{default:s(()=>[d("div",Nt,[e(R,null,{default:s(()=>[e(S,null,{default:s(()=>l[17]||(l[17]=[d("h3",null,"IT維修服務管理",-1)])),_:1}),e(S,{cols:"6",sm:"5",md:"4",xl:"3",class:"d-flex align-center"},{default:s(()=>[je(g)?me((D(),O(ve,{key:0,icon:"mdi-information",size:"small",color:"blue-grey-darken-2",class:"me-4"},null,512)),[[be,"可搜尋維修編號、標題、分機、地點、問題描述","start"]]):He("",!0),e(zt,{modelValue:Q.value,"onUpdate:modelValue":[l[5]||(l[5]=o=>Q.value=o),de],label:"搜尋","append-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),e(S,{cols:"12"},{default:s(()=>[(D(),O(Ct,{key:K.value,"items-per-page":ie.value,"onUpdate:itemsPerPage":l[6]||(l[6]=o=>ie.value=o),"sort-by":E.value,"onUpdate:sortBy":l[7]||(l[7]=o=>E.value=o),page:X.value,"onUpdate:page":l[8]||(l[8]=o=>X.value=o),headers:ue.value,items:c.value,loading:p.value,"items-length":V.value,"items-per-page-options":[10,20,50],"header-props":Me,hover:"",density:"comfortable",class:"rounded-lg","onUpdate:options":le},{"item.status":s(({item:o})=>[e(et,null,{activator:s(({props:i})=>[me((D(),O(Oe,tt(i,{color:Le(o.status),variant:"outlined",label:"",size:"small"}),{default:s(()=>[z(h(o.status),1)]),_:2},1040,["color"])),[[be,"點擊更改狀態","start"]])]),default:s(()=>[e(nt,null,{default:s(()=>[(D(),ge(Ce,null,lt(["待處理","處理中","待確認","已完成","已取消"],i=>e(Re,{key:i,active:o.status===i,onClick:t=>Ae(o,i)},{default:s(()=>[e(We,null,{default:s(()=>[z(h(i),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:2},1024)]),_:2},1024)]),"item.priority":s(({item:o})=>[e(Oe,{color:Be(o.priority),variant:"outlined",size:"small"},{default:s(()=>[z(h(o.priority),1)]),_:2},1032,["color"])]),"item.requesterId.extNumber":s(({item:o})=>{var i;return[z(h(((i=o.requesterId)==null?void 0:i.extNumber)||"-"),1)]}),"item.assigneeId":s(({item:o})=>[e(et,null,{activator:s(({props:i})=>[me((D(),O(Oe,tt(i,{color:o.assigneeId?"blue":"grey",variant:"outlined",label:"",size:"small"}),{default:s(()=>{var t;return[z(h((t=o.assigneeId)!=null&&t.name?`${o.assigneeId.name} (${o.assigneeId.userId})`:"尚未指派"),1)]}),_:2},1040,["color"])),[[be,"點擊選擇處理者","start"]])]),default:s(()=>[e(nt,null,{default:s(()=>[(D(!0),ge(Ce,null,lt(B.value,i=>{var t;return D(),O(Re,{key:i._id,active:((t=o.assigneeId)==null?void 0:t._id)===i._id,onClick:n=>re(o,i._id)},{default:s(()=>[e(We,null,{default:s(()=>[z(h(i.name)+" ("+h(i.userId)+")",1)]),_:2},1024)]),_:2},1032,["active","onClick"])}),128)),e(M),e(Re,{onClick:i=>re(o,null)},{default:s(()=>[e(We,{class:"text-grey"},{default:s(()=>l[18]||(l[18]=[z(" 移除指派 ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),"item.attachments":s(({item:o})=>{var i;return[(i=o.attachments)!=null&&i.length?me((D(),O(F,{key:0,icon:"",variant:"plain",color:"blue-grey-darken-1",ripple:!1,onClick:t=>Ye(o.attachments)},{default:s(()=>[e(ve,{size:"small"},{default:s(()=>l[19]||(l[19]=[z(" mdi-image-multiple ")])),_:1}),d("span",jt,"*"+h(o.attachments.length),1)]),_:2},1032,["onClick"])),[[be,`查看${o.attachments.length}張圖片`,"start"]]):(D(),ge("span",Ht,"無"))]}),"item.actions":s(({item:o})=>[d("div",Ot,[e(S,{cols:"6",sm:"4",md:"3",lg:"2",class:"pa-0"},{default:s(()=>[me((D(),O(F,{icon:"",color:o.solution?"light-blue-darken-4":"green-darken-1",class:"me-2",variant:"plain",ripple:!1,size:w.value,onClick:i=>ce(o)},{default:s(()=>[e(ve,{size:"small"},{default:s(()=>[z(h(o.solution?"mdi-note-edit":"mdi-note-plus"),1)]),_:2},1024)]),_:2},1032,["color","size","onClick"])),[[be,o.solution?"編輯處理方案":"新增處理方案","start"]])]),_:2},1024),e(S,{cols:"6",sm:"4",md:"3",lg:"2",class:"pa-0"},{default:s(()=>[e(F,{color:"blue-grey-darken-2",variant:"plain",ripple:!1,size:w.value,onClick:i=>$e(o)},{default:s(()=>[e(ve,{size:w.value},{default:s(()=>l[20]||(l[20]=[z(" mdi-book-open-variant-outline ")])),_:1},8,["size"])]),_:2},1032,["size","onClick"])]),_:2},1024)])]),_:2},1032,["items-per-page","sort-by","page","headers","items","loading","items-length"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(je(Et),{visible:J.value.visible,imgs:J.value.imgs,index:J.value.index,"dblclick-closable":!0,onHide:l[9]||(l[9]=o=>J.value.visible=!1)},null,8,["visible","imgs","index"]),e(st,{modelValue:y.value.show,"onUpdate:modelValue":l[11]||(l[11]=o=>y.value.show=o),persistent:"","max-width":"480"},{default:s(()=>[e(Dt,{onSubmit:mt(Ue,["prevent"])},{default:s(()=>[e(Ee,{class:"rounded-lg pa-4 pt-6"},{default:s(()=>{var o,i;return[d("div",Ft,[z(h((o=y.value.ticket)!=null&&o.solution?"編輯處理方案":"新增處理方案")+" ",1),(i=y.value.ticket)!=null&&i.solutionUpdatedAt?(D(),ge("div",Rt,[l[21]||(l[21]=z(" ( ")),l[22]||(l[22]=d("span",null,"最後更新時間：",-1)),z(" "+h(ne(y.value.ticket.solutionUpdatedAt))+" ) ",1)])):He("",!0)]),e(Ne,{class:"px-3"},{default:s(()=>[e(Tt,{modelValue:y.value.solution,"onUpdate:modelValue":l[10]||(l[10]=t=>y.value.solution=t),label:"處理方案",variant:"outlined",density:"compact","error-messages":y.value.error,rows:"10","auto-grow":"",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(at,null,{default:s(()=>{var t;return[e(ot),e(F,{color:"red-lighten-1",variant:"outlined",size:w.value,loading:y.value.loading,onClick:we},{default:s(()=>l[23]||(l[23]=[z(" 取消 ")])),_:1},8,["size","loading"]),e(F,{color:"teal-darken-1",variant:"outlined",type:"submit",size:w.value,class:"ms-1",loading:y.value.loading,disabled:!((t=y.value.solution)!=null&&t.trim())},{default:s(()=>l[24]||(l[24]=[z(" 送出 ")])),_:1},8,["size","loading","disabled"])]}),_:1})]}),_:1})]),_:1})]),_:1},8,["modelValue"]),e(st,{modelValue:_.value.show,"onUpdate:modelValue":l[13]||(l[13]=o=>_.value.show=o),"max-width":"600"},{default:s(()=>[e(Ee,{class:"pa-4"},{default:s(()=>[l[37]||(l[37]=d("div",{class:"ps-6 pt-4 pb-1 pb-sm-3 card-title"}," 維修請求詳細資料 ",-1)),e(Ne,null,{default:s(()=>[e(R,null,{default:s(()=>[e(S,{cols:"12"},{default:s(()=>{var o,i,t,n,r,b,I,f,Y,U,C,ae,_e,ze,Ie,Ve,H;return[d("div",Wt,[d("div",null,[l[25]||(l[25]=d("div",{class:"text-grey-darken-1 list-title"}," 維修編號 ",-1)),d("div",Zt,h((o=_.value.ticket)==null?void 0:o.ticketId),1)]),e(M,{class:"my-2"}),d("div",null,[l[26]||(l[26]=d("div",{class:"text-grey-darken-1 list-title"}," 申請人 ",-1)),d("div",Kt,h((t=(i=_.value.ticket)==null?void 0:i.requesterId)==null?void 0:t.name)+" ("+h((r=(n=_.value.ticket)==null?void 0:n.requesterId)==null?void 0:r.userId)+") ",1)]),e(M,{class:"my-2"}),d("div",null,[l[27]||(l[27]=d("div",{class:"text-grey-darken-1 list-title"}," 分機號碼 ",-1)),d("div",Jt,h(((I=(b=_.value.ticket)==null?void 0:b.requesterId)==null?void 0:I.extNumber)||"-"),1)]),e(M,{class:"my-2"}),d("div",null,[l[28]||(l[28]=d("div",{class:"text-grey-darken-1 list-title"}," 標題 ",-1)),d("div",Gt,h((f=_.value.ticket)==null?void 0:f.title),1)]),e(M,{class:"my-2"}),d("div",null,[l[29]||(l[29]=d("div",{class:"text-grey-darken-1 list-title"}," 類別 ",-1)),d("div",Qt,h((Y=_.value.ticket)==null?void 0:Y.category),1)]),e(M,{class:"my-2"}),d("div",null,[l[30]||(l[30]=d("div",{class:"text-grey-darken-1 list-title"}," 優先程度 ",-1)),d("div",el,h((U=_.value.ticket)==null?void 0:U.priority),1)]),e(M,{class:"my-2"}),d("div",null,[l[31]||(l[31]=d("div",{class:"text-grey-darken-1 list-title"}," 狀態 ",-1)),d("div",tl,h((C=_.value.ticket)==null?void 0:C.status),1)]),e(M,{class:"my-2"}),d("div",null,[l[32]||(l[32]=d("div",{class:"text-grey-darken-1 list-title"}," 地點 ",-1)),d("div",ll,h((ae=_.value.ticket)==null?void 0:ae.location),1)]),e(M,{class:"my-2"}),d("div",null,[l[33]||(l[33]=d("div",{class:"text-grey-darken-1 list-title"}," 問題描述 ",-1)),d("div",al,h((_e=_.value.ticket)==null?void 0:_e.description),1)]),e(M,{class:"my-2"}),d("div",null,[l[34]||(l[34]=d("div",{class:"text-grey-darken-1 list-title"}," 處理者 ",-1)),d("div",ol,h(((Ie=(ze=_.value.ticket)==null?void 0:ze.assigneeId)==null?void 0:Ie.name)||"尚未指派"),1)]),e(M,{class:"my-2"}),d("div",null,[l[35]||(l[35]=d("div",{class:"text-grey-darken-1 list-title"}," 處理方案 ",-1)),d("div",sl,h(((Ve=_.value.ticket)==null?void 0:Ve.solution)||"尚未填寫"),1),(H=_.value.ticket)!=null&&H.solutionUpdatedAt?(D(),ge("div",nl," 最後更新："+h(ne(_.value.ticket.solutionUpdatedAt)),1)):He("",!0)])])]}),_:1})]),_:1})]),_:1}),e(at,null,{default:s(()=>[e(ot),e(F,{color:"grey-darken-1",variant:"outlined",size:w.value,onClick:l[12]||(l[12]=o=>_.value.show=!1)},{default:s(()=>l[36]||(l[36]=[z(" 關閉 ")])),_:1},8,["size"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},wl=ht(il,[["__scopeId","data-v-b723e4e3"]]);export{wl as default};
