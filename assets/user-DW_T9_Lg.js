import{aX as Pl,p as ze,m as Nl,a as Rl,f as St,g as _e,l as It,n as kt,_ as xt,aY as Ct,x as h,o as O,s as Qa,z as se,aZ as wt,c as l,K as X,u as Le,ag as Na,aQ as Pt,a_ as Nt,a$ as Rt,b0 as El,b1 as Et,F as Bt,b2 as At,ah as Ut,b3 as Tt,v as el,X as $t,aS as Bl,J as Mt,b4 as Yt,U as Ue,H as me,aJ as Ot,b5 as zt,b6 as _t,D as Al,b7 as Lt,b8 as jt,b9 as Wt,h as Ht,t as Ae,R as qt,q as Xt,ba as fl,bb as Ft,a6 as $,a7 as q,a8 as s,af as j,ao as ne,ad as N,an as W,ac as n,ap as al,ay as Pa,a0 as Ul,a5 as Tl,ae as F,w as Jt,ai as za,ab as ce,ax as B,a1 as Gt,a2 as Zt,P as Kt,aW as bl,A as yl,aw as Qt,as as hl,at as en,am as Ca,bc as an,aj as ln,av as Vl,aa as Dl,a9 as tn,az as nn,aV as sn}from"./index-BaYLczuP.js";import{l as Sl}from"./lodash-DHyxJ22h.js";import{c as Il,a as k,d as le,f as Za,g as kl,h as xl,u as on,b}from"./index.esm-Wyq4uzVp.js";import{u as re,_ as un,E as rn,a as dn}from"./useROCDate-BnucsXGQ.js";import{C as cn}from"./ConfirmDeleteDialogWithTextField-CFgBeBm-.js";import{V as mn}from"./VCombobox-BIt8Edd2.js";import{V as L,a as r}from"./VRow-BAyHKoWZ.js";import{V as vn}from"./VContainer-D01eFnFX.js";import{V as Q,a as pn}from"./VDataTableServer-CC9Pw1u8.js";import{V as gn}from"./VForm-JA0i8Ums.js";import{b as fn,V as bn,a as yn}from"./VList-Ffuj9f3-.js";import{V as hn}from"./VTooltip-CcXyn3fS.js";import{V as wa}from"./VDivider-Bbo1vdbV.js";import{V as Vn}from"./VAutocomplete-x1SPsck5.js";import{V as Dn}from"./VHover-YZBP1uVO.js";import{T as Ka}from"./index-B2q7XbKa.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-DamslLaG.js";const Sn=o=>{const{touchstartX:c,touchendX:i,touchstartY:u,touchendY:S}=o,g=.5,f=16;o.offsetX=i-c,o.offsetY=S-u,Math.abs(o.offsetY)<g*Math.abs(o.offsetX)&&(o.left&&i<c-f&&o.left(o),o.right&&i>c+f&&o.right(o)),Math.abs(o.offsetX)<g*Math.abs(o.offsetY)&&(o.up&&S<u-f&&o.up(o),o.down&&S>u+f&&o.down(o))};function In(o,c){var u;const i=o.changedTouches[0];c.touchstartX=i.clientX,c.touchstartY=i.clientY,(u=c.start)==null||u.call(c,{originalEvent:o,...c})}function kn(o,c){var u;const i=o.changedTouches[0];c.touchendX=i.clientX,c.touchendY=i.clientY,(u=c.end)==null||u.call(c,{originalEvent:o,...c}),Sn(c)}function xn(o,c){var u;const i=o.changedTouches[0];c.touchmoveX=i.clientX,c.touchmoveY=i.clientY,(u=c.move)==null||u.call(c,{originalEvent:o,...c})}function Cn(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:o.left,right:o.right,up:o.up,down:o.down,start:o.start,move:o.move,end:o.end};return{touchstart:i=>In(i,c),touchend:i=>kn(i,c),touchmove:i=>xn(i,c)}}function wn(o,c){var I;const i=c.value,u=i!=null&&i.parent?o.parentElement:o,S=(i==null?void 0:i.options)??{passive:!0},g=(I=c.instance)==null?void 0:I.$.uid;if(!u||!g)return;const f=Cn(c.value);u._touchHandlers=u._touchHandlers??Object.create(null),u._touchHandlers[g]=f,Pl(f).forEach(C=>{u.addEventListener(C,f[C],S)})}function Pn(o,c){var g,f;const i=(g=c.value)!=null&&g.parent?o.parentElement:o,u=(f=c.instance)==null?void 0:f.$.uid;if(!(i!=null&&i._touchHandlers)||!u)return;const S=i._touchHandlers[u];Pl(S).forEach(I=>{i.removeEventListener(I,S[I])}),delete i._touchHandlers[u]}const $l={mounted:wn,unmounted:Pn},Ml=Symbol.for("vuetify:v-window"),Yl=Symbol.for("vuetify:v-window-group"),Ol=ze({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:o=>typeof o=="boolean"||o==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Nl(),...Rl(),...St()},"VWindow"),Cl=_e()({name:"VWindow",directives:{Touch:$l},props:Ol(),emits:{"update:modelValue":o=>!0},setup(o,c){let{slots:i}=c;const{themeClasses:u}=It(o),{isRtl:S}=kt(),{t:g}=xt(),f=Ct(o,Yl),I=h(),C=O(()=>S.value?!o.reverse:o.reverse),A=Qa(!1),w=O(()=>{const U=o.direction==="vertical"?"y":"x",J=(C.value?!A.value:A.value)?"-reverse":"";return`v-window-${U}${J}-transition`}),D=Qa(0),m=h(void 0),M=O(()=>f.items.value.findIndex(U=>f.selected.value.includes(U.id)));se(M,(U,z)=>{const J=f.items.value.length,oe=J-1;J<=2?A.value=U<z:U===oe&&z===0?A.value=!0:U===0&&z===oe?A.value=!1:A.value=U<z}),wt(Ml,{transition:w,isReversed:A,transitionCount:D,transitionHeight:m,rootRef:I});const v=O(()=>o.continuous||M.value!==0),y=O(()=>o.continuous||M.value!==f.items.value.length-1);function Y(){v.value&&f.prev()}function x(){y.value&&f.next()}const V=O(()=>{const U=[],z={icon:S.value?o.nextIcon:o.prevIcon,class:`v-window__${C.value?"right":"left"}`,onClick:f.prev,"aria-label":g("$vuetify.carousel.prev")};U.push(v.value?i.prev?i.prev({props:z}):l(X,z,null):l("div",null,null));const J={icon:S.value?o.prevIcon:o.nextIcon,class:`v-window__${C.value?"left":"right"}`,onClick:f.next,"aria-label":g("$vuetify.carousel.next")};return U.push(y.value?i.next?i.next({props:J}):l(X,J,null):l("div",null,null)),U}),R=O(()=>o.touch===!1?o.touch:{...{left:()=>{C.value?Y():x()},right:()=>{C.value?x():Y()},start:z=>{let{originalEvent:J}=z;J.stopPropagation()}},...o.touch===!0?{}:o.touch});return Le(()=>Na(l(o.tag,{ref:I,class:["v-window",{"v-window--show-arrows-on-hover":o.showArrows==="hover"},u.value,o.class],style:o.style},{default:()=>{var U,z;return[l("div",{class:"v-window__container",style:{height:m.value}},[(U=i.default)==null?void 0:U.call(i,{group:f}),o.showArrows!==!1&&l("div",{class:"v-window__controls"},[V.value])]),(z=i.additional)==null?void 0:z.call(i,{group:f})]}}),[[Pt("touch"),R.value]])),{group:f}}}),zl=ze({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Nl(),...Nt(),...Rt()},"VWindowItem"),wl=_e()({name:"VWindowItem",directives:{Touch:$l},props:zl(),emits:{"group:selected":o=>!0},setup(o,c){let{slots:i}=c;const u=El(Ml),S=Et(o,Yl),{isBooted:g}=Bt();if(!u||!S)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const f=Qa(!1),I=O(()=>g.value&&(u.isReversed.value?o.reverseTransition!==!1:o.transition!==!1));function C(){!f.value||!u||(f.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,u.transitionCount.value===0&&(u.transitionHeight.value=void 0)))}function A(){var v;f.value||!u||(f.value=!0,u.transitionCount.value===0&&(u.transitionHeight.value=el((v=u.rootRef.value)==null?void 0:v.clientHeight)),u.transitionCount.value+=1)}function w(){C()}function D(v){f.value&&$t(()=>{!I.value||!f.value||!u||(u.transitionHeight.value=el(v.clientHeight))})}const m=O(()=>{const v=u.isReversed.value?o.reverseTransition:o.transition;return I.value?{name:typeof v!="string"?u.transition.value:v,onBeforeEnter:A,onAfterEnter:C,onEnterCancelled:w,onBeforeLeave:A,onAfterLeave:C,onLeaveCancelled:w,onEnter:D}:!1}),{hasContent:M}=At(o,S.isSelected);return Le(()=>l(Tt,{transition:m.value,disabled:!g.value},{default:()=>{var v;return[Na(l("div",{class:["v-window-item",S.selectedClass.value,o.class],style:o.style},[M.value&&((v=i.default)==null?void 0:v.call(i))]),[[Ut,S.isSelected.value]])]}})),{groupItem:S}}}),ll=Symbol.for("vuetify:v-tabs"),Nn=ze({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Bl(Mt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_a=_e()({name:"VTab",props:Nn(),setup(o,c){let{slots:i,attrs:u}=c;const{textColorClasses:S,textColorStyles:g}=Yt(o,"sliderColor"),f=h(),I=h(),C=O(()=>o.direction==="horizontal"),A=O(()=>{var D,m;return((m=(D=f.value)==null?void 0:D.group)==null?void 0:m.isSelected.value)??!1});function w(D){var M,v;let{value:m}=D;if(m){const y=(v=(M=f.value)==null?void 0:M.$el.parentElement)==null?void 0:v.querySelector(".v-tab--selected .v-tab__slider"),Y=I.value;if(!y||!Y)return;const x=getComputedStyle(y).color,V=y.getBoundingClientRect(),R=Y.getBoundingClientRect(),U=C.value?"x":"y",z=C.value?"X":"Y",J=C.value?"right":"bottom",oe=C.value?"width":"height",je=V[U],ja=R[U],ve=je>ja?V[J]-R[J]:V[U]-R[U],Wa=Math.sign(ve)>0?C.value?"right":"bottom":Math.sign(ve)<0?C.value?"left":"top":"center",Te=(Math.abs(ve)+(Math.sign(ve)<0?V[oe]:R[oe]))/Math.max(V[oe],R[oe])||0,$e=V[oe]/R[oe]||0,he=1.5;zt(Y,{backgroundColor:[x,"currentcolor"],transform:[`translate${z}(${ve}px) scale${z}(${$e})`,`translate${z}(${ve/he}px) scale${z}(${(Te-1)/he+1})`,"none"],transformOrigin:Array(3).fill(Wa)},{duration:225,easing:_t})}}return Le(()=>{const D=X.filterProps(o);return l(X,me({symbol:ll,ref:f,class:["v-tab",o.class],style:o.style,tabindex:A.value?0:-1,role:"tab","aria-selected":String(A.value),active:!1},D,u,{block:o.fixed,maxWidth:o.fixed?300:void 0,"onGroup:selected":w}),{...i,default:()=>{var m;return l(Ue,null,[((m=i.default)==null?void 0:m.call(i))??o.text,!o.hideSlider&&l("div",{ref:I,class:["v-tab__slider",S.value],style:g.value},null)])}})}),Ot({},f)}}),Rn=ze({...Bl(Ol(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),_l=_e()({name:"VTabsWindow",props:Rn(),emits:{"update:modelValue":o=>!0},setup(o,c){let{slots:i}=c;const u=El(ll,null),S=Al(o,"modelValue"),g=O({get(){var f;return S.value!=null||!u?S.value:(f=u.items.value.find(I=>u.selected.value.includes(I.id)))==null?void 0:f.value},set(f){S.value=f}});return Le(()=>{const f=Cl.filterProps(o);return l(Cl,me({_as:"VTabsWindow"},f,{modelValue:g.value,"onUpdate:modelValue":I=>g.value=I,class:["v-tabs-window",o.class],style:o.style,mandatory:!1,touch:!1}),i)}),{}}}),En=ze({...zl()},"VTabsWindowItem"),La=_e()({name:"VTabsWindowItem",props:En(),setup(o,c){let{slots:i}=c;return Le(()=>{const u=wl.filterProps(o);return l(wl,me({_as:"VTabsWindowItem"},u,{class:["v-tabs-window-item",o.class],style:o.style}),i)}),{}}});function Bn(o){return o?o.map(c=>Ft(c)?c:{text:c,value:c}):[]}const An=ze({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Lt({mandatory:"force",selectedClass:"v-tab-item--selected"}),...jt(),...Rl()},"VTabs"),Un=_e()({name:"VTabs",props:An(),emits:{"update:modelValue":o=>!0},setup(o,c){let{attrs:i,slots:u}=c;const S=Al(o,"modelValue"),g=O(()=>Bn(o.items)),{densityClasses:f}=Wt(o),{backgroundColorClasses:I,backgroundColorStyles:C}=Ht(Ae(o,"bgColor")),{scopeId:A}=qt();return Xt({VTab:{color:Ae(o,"color"),direction:Ae(o,"direction"),stacked:Ae(o,"stacked"),fixed:Ae(o,"fixedTabs"),sliderColor:Ae(o,"sliderColor"),hideSlider:Ae(o,"hideSlider")}}),Le(()=>{const w=fl.filterProps(o),D=!!(u.window||o.items.length>0);return l(Ue,null,[l(fl,me(w,{modelValue:S.value,"onUpdate:modelValue":m=>S.value=m,class:["v-tabs",`v-tabs--${o.direction}`,`v-tabs--align-tabs-${o.alignTabs}`,{"v-tabs--fixed-tabs":o.fixedTabs,"v-tabs--grow":o.grow,"v-tabs--stacked":o.stacked},f.value,I.value,o.class],style:[{"--v-tabs-height":el(o.height)},C.value,o.style],role:"tablist",symbol:ll},A,i),{default:()=>{var m;return[((m=u.default)==null?void 0:m.call(u))??g.value.map(M=>{var v;return((v=u.tab)==null?void 0:v.call(u,{item:M}))??l(_a,me(M,{key:M.text,value:M.value}),{default:u[`tab.${M.value}`]?()=>{var y;return(y=u[`tab.${M.value}`])==null?void 0:y.call(u,{item:M})}:void 0})})]}}),D&&l(_l,me({modelValue:S.value,"onUpdate:modelValue":m=>S.value=m,key:"tabs-window"},A),{default:()=>{var m;return[g.value.map(M=>{var v;return((v=u.item)==null?void 0:v.call(u,{item:M}))??l(La,{value:M.value},{default:()=>{var y;return(y=u[`item.${M.value}`])==null?void 0:y.call(u,{item:M})}})}),(m=u.window)==null?void 0:m.call(u)]}})])}),{}}}),te={0:"無",1:"華語導遊",2:"外語導遊",3:"華語領隊",4:"外語領隊"},Tn={class:"d-flex align-center flex-wrap"},$n={__name:"GuideLicenseSelection",props:{modelValue:{type:Array,default:()=>[]},errorMessages:{type:[String,Array],default:""}},emits:["update:modelValue"],setup(o,{emit:c}){const i=o,u=c,S=Object.entries(te).filter(([w])=>w!=="0").map(([w,D])=>({value:Number(w),title:D})),g=h(i.modelValue.length===0||i.modelValue.length===1&&i.modelValue[0]===0?[{value:0,title:te[0]}]:i.modelValue.filter(w=>w!==0).map(w=>({value:w,title:te[w]}))),f=O(()=>g.value.length===1&&g.value[0].value===0),I=w=>{if(!w||w.length===0){g.value=[{value:0,title:te[0]}],u("update:modelValue",[0]);return}const D=w.filter(m=>m&&(typeof m.value=="number"||typeof m=="number")).map(m=>typeof m=="number"?m:m.value).filter(m=>m!==0);D.length===0?(g.value=[{value:0,title:te[0]}],u("update:modelValue",[0])):(g.value=D.map(m=>({value:m,title:te[m]})),u("update:modelValue",D))},C=()=>{g.value=[{value:0,title:te[0]}],u("update:modelValue",[0])},A=w=>{const D=g.value.filter(m=>m.value!==w.value);D.length===0?(g.value=[{value:0,title:te[0]}],u("update:modelValue",[0])):(g.value=D,u("update:modelValue",D.map(m=>m.value)))};return se(()=>i.modelValue,w=>{w.length===0||w.length===1&&w[0]===0?g.value=[{value:0,title:te[0]}]:g.value=w.filter(D=>D!==0).map(D=>({value:D,title:te[D]}))},{deep:!0}),(w,D)=>($(),q(mn,{modelValue:g.value,"onUpdate:modelValue":[D[0]||(D[0]=m=>g.value=m),I],items:n(S),label:"導遊領隊證",variant:"outlined",density:"compact","error-messages":i.errorMessages,multiple:"",chips:!f.value,clearable:"","onClick:clear":C},{selection:s(()=>[j("div",Tn,[f.value?($(),ne(Ue,{key:0},[N(W(n(te)[0]),1)],64)):($(!0),ne(Ue,{key:1},al(g.value,m=>($(),q(Pa,{key:m.value,class:"ma-1",closable:"",size:"small","onClick:close":M=>A(m)},{default:s(()=>[N(W(n(te)[m.value]),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1},8,["modelValue","items","error-messages","chips"]))}},Mn={class:"d-flex justify-space-between align-center mb-4"},Yn={class:"d-flex justify-space-between align-center mb-4 mt-2"},On={__name:"DependentInsurance",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(o,{emit:c}){const{convertToROCDate:i}=re(),u=o,S=c,g=v=>{if(!v)return null;if(v instanceof Date)return v;try{const y=new Date(v);return isNaN(y.getTime())?null:y}catch{return null}},I=h((v=>(v||[]).map(y=>({...y,dependentBirthDate:g(y.dependentBirthDate),dependentInsuranceStartDate:g(y.dependentInsuranceStartDate),dependentInsuranceEndDate:g(y.dependentInsuranceEndDate)})))(u.modelValue)),C=h({}),A=(v,y)=>{var V;const Y=`${v}-${y}`;if(!C.value[Y])return"";const x=I.value[v];if(y==="dependentName"&&!((V=x.dependentName)!=null&&V.trim()))return"請輸入受保人姓名";if(y==="dependentIDNumber"){const R=/^[A-Za-z][12]\d{8}$/,U=x.dependentIDNumber;if(!(U!=null&&U.trim()))return"請輸入身分證號碼";if(!R.test(U))return"身分證號碼格式錯誤"}return y==="dependentBirthDate"&&!x.dependentBirthDate?"請選擇出生日期":""},w=()=>{I.value.length<4&&(I.value.push({dependentName:"",dependentIDNumber:"",dependentRelationship:"",dependentBirthDate:null,dependentInsuranceStartDate:null,dependentInsuranceEndDate:null}),S("update:modelValue",I.value))},D=v=>{I.value.splice(v,1),Object.keys(C.value).forEach(y=>{y.startsWith(`${v}-`)&&delete C.value[y]}),S("update:modelValue",I.value)},m=(v,y)=>{C.value[`${v}-${y}`]=!0};se(()=>u.modelValue,v=>{const y=v.map(V=>({...V,dependentBirthDate:V.dependentBirthDate instanceof Date?V.dependentBirthDate:g(V.dependentBirthDate),dependentInsuranceStartDate:V.dependentInsuranceStartDate instanceof Date?V.dependentInsuranceStartDate:g(V.dependentInsuranceStartDate),dependentInsuranceEndDate:V.dependentInsuranceEndDate instanceof Date?V.dependentInsuranceEndDate:g(V.dependentInsuranceEndDate)})),Y=JSON.stringify(y),x=JSON.stringify(I.value);Y!==x&&(I.value=y)},{deep:!0}),se(I,v=>{const y=v.map(V=>({...V,dependentBirthDate:V.dependentBirthDate instanceof Date?V.dependentBirthDate:g(V.dependentBirthDate),dependentInsuranceStartDate:V.dependentInsuranceStartDate instanceof Date?V.dependentInsuranceStartDate:g(V.dependentInsuranceStartDate),dependentInsuranceEndDate:V.dependentInsuranceEndDate instanceof Date?V.dependentInsuranceEndDate:g(V.dependentInsuranceEndDate)})),Y=JSON.stringify(y),x=JSON.stringify(I.value);Y!==x&&S("update:modelValue",y)},{deep:!0}),se(I,v=>{S("update:modelValue",v)},{deep:!0});const M=v=>{if(!v)return"";if(v instanceof Date)return i(v);try{const y=new Date(v);return isNaN(y.getTime())?"":i(y)}catch{return""}};return(v,y)=>{const Y=Tl("v-date-input");return $(),q(r,{cols:"12",class:"px-0"},{default:s(()=>[j("div",Mn,[y[1]||(y[1]=j("div",{class:"text-blue-grey-darken-2 ms-1 info-title",style:{"font-size":"15px"}}," 眷屬加保資料 ",-1)),I.value.length<4?($(),q(X,{key:0,color:"blue-grey-darken-2",variant:"outlined",size:"small","prepend-icon":"mdi-account-plus",onClick:w},{default:s(()=>y[0]||(y[0]=[N(" 新增眷屬 ")])),_:1})):F("",!0)]),l(Jt,{group:""},{default:s(()=>[($(!0),ne(Ue,null,al(I.value,(x,V)=>($(),q(za,{key:V,class:"px-4 mb-3",elevation:"0",style:{border:"1px solid #aaa"}},{default:s(()=>[j("div",Yn,[j("h5",null,"眷屬 "+W(V+1),1),l(X,{icon:"",color:"red-lighten-1",variant:"plain",size:"small",onClick:R=>D(V)},{default:s(()=>[l(ce,null,{default:s(()=>y[2]||(y[2]=[N("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),l(L,{class:"mb-2"},{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:x.dependentName,"onUpdate:modelValue":R=>x.dependentName=R,"error-messages":A(V,"dependentName"),label:"*眷屬姓名",variant:"outlined",density:"compact",clearable:"",onBlur:R=>m(V,"dependentName")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:x.dependentIDNumber,"onUpdate:modelValue":R=>x.dependentIDNumber=R,"error-messages":A(V,"dependentIDNumber"),label:"*眷屬身分證號碼",variant:"outlined",density:"compact",clearable:"",maxlength:"10",onBlur:R=>m(V,"dependentIDNumber")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(Y,{modelValue:x.dependentBirthDate,"onUpdate:modelValue":R=>x.dependentBirthDate=R,"error-messages":A(V,"dependentBirthDate"),label:"*眷屬生日","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:M(x.dependentBirthDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認",onBlur:R=>m(V,"dependentBirthDate"),"onClick:clear":R=>x.dependentBirthDate=null},null,8,["modelValue","onUpdate:modelValue","error-messages","hint","onBlur","onClick:clear"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:x.dependentRelationship,"onUpdate:modelValue":R=>x.dependentRelationship=R,label:"眷屬關係",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(Y,{modelValue:x.dependentInsuranceStartDate,"onUpdate:modelValue":R=>x.dependentInsuranceStartDate=R,label:"加保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(i)(x.dependentInsuranceStartDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":R=>x.dependentInsuranceStartDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(Y,{modelValue:x.dependentInsuranceEndDate,"onUpdate:modelValue":R=>x.dependentInsuranceEndDate=R,label:"退保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(i)(x.dependentInsuranceEndDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":R=>x.dependentInsuranceEndDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},zn=Ul(On,[["__scopeId","data-v-98a7a2a3"]]),_n={class:"d-flex flex-column gap-2"},Ln={key:0},jn={key:1},Wn={key:2},Hn={key:3},qn={key:4},Xn={key:5},Fn={key:6},Jn={class:"d-flex align-center overflow-hidden h-25"},Gn={class:"list-content ps-4 py-3 mb-4"},Zn={style:{"font-weight":"800"},class:"text-cyan-darken-2"},Kn={class:"card-title px-4 py-3 d-flex justify-space-between"},Qn={class:"mb-4"},es={__name:"user",setup(o){const{apiAuth:c}=en(),i=Gt(),u=Zt(),{smAndUp:S,mdAndUp:g,lgAndUp:f,xlAndUp:I,name:C}=Kt(),A=O(()=>S.value?"default":"small"),w=O(()=>S.value?"64":"default"),D=h(!1),m=h(null),M=h(1),v=h(!1),y={class:"header-bg"},Y=h([]),x=h(!1),V=O(()=>{const e={};return(Y.value||[]).forEach((p,E)=>{var T,d;(T=p.dependentName)!=null&&T.trim()||(e[`dependentInsurance.${E}.dependentName`]="請輸入受保人姓名"),(d=p.dependentIDNumber)!=null&&d.trim()||(e[`dependentInsurance.${E}.dependentIDNumber`]="請輸入身分證號碼"),p.dependentBirthDate||(e[`dependentInsurance.${E}.dependentBirthDate`]="請選擇出生日期")}),e}),R=h([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),U=[{title:"否",value:!1},{title:"是",value:!0}],z=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],J=[{title:"否",value:!1},{title:"是",value:!0}],oe=[{title:"1%",value:1},{title:"2%",value:2},{title:"3%",value:3},{title:"4%",value:4},{title:"5%",value:5},{title:"6%",value:6}],je=e=>{switch(e){case"已完成":return"teal-lighten-1";case"尚未完成":return"red-lighten-1";case"尚缺資料":return"warning";default:return"grey"}},ja=["尚未完成","尚缺資料","已完成"],ve=[{code:"008",name:"華南商業銀行"},{code:"004",name:"臺灣銀行"},{code:"005",name:"台灣土地銀行"},{code:"006",name:"合作金庫銀行"},{code:"007",name:"第一商業銀行"},{code:"009",name:"彰化商業銀行"},{code:"010",name:"花旗(台灣)(原華僑銀行)"},{code:"011",name:"上海商業銀行"},{code:"012",name:"台北富邦銀行"},{code:"013",name:"國泰世華商業銀行"},{code:"016",name:"高雄銀行"},{code:"017",name:"兆豐國際商業銀行"},{code:"021",name:"花旗銀行"},{code:"024",name:"美國運通銀行"},{code:"025",name:"首都銀行"},{code:"039",name:"荷蘭銀行"},{code:"040",name:"中華開發"},{code:"050",name:"台灣中小企業銀行"},{code:"052",name:"渣打國際商銀(原新竹商銀)"},{code:"053",name:"台中商業銀行"},{code:"054",name:"京城商銀"},{code:"057",name:"台東區中小企業銀行"},{code:"072",name:"德意志銀行"},{code:"073",name:"東亞銀行"},{code:"081",name:"匯豐銀行"},{code:"101",name:"稻江商銀"},{code:"102",name:"華泰商業銀行"},{code:"103",name:"新光商業銀行"},{code:"108",name:"陽信商業銀行"},{code:"118",name:"板信商業銀行"},{code:"147",name:"三信商業銀行"},{code:"700",name:"中華郵政"},{code:"803",name:"聯邦商業銀行"},{code:"805",name:"遠東商業銀行"},{code:"806",name:"元大銀行"},{code:"807",name:"永豐銀行"},{code:"808",name:"玉山商業銀行"},{code:"809",name:"萬泰商業銀行"},{code:"810",name:"星展銀行"},{code:"812",name:"台新國際商業銀行"},{code:"815",name:"日盛國際商業銀行"},{code:"816",name:"安泰商業銀行"},{code:"822",name:"中國信託商業銀行"}],Wa=O(()=>ve.map(e=>({title:`(${e.code}) ${e.name}`,value:e.code}))),tl=async e=>{var a,p;if(fe.value!==e){x.value=!0;try{const{data:E}=await c.patch(`/user/${ee.value.id}`,{formStatus:e});if(E.success){fe.value.value=e;const T=be.value.findIndex(d=>d._id===ee.value.id);T!==-1&&(be.value[T].formStatus=e),Oa.value++,u({text:"表單狀態更新成功",snackbarProps:{color:je(e)}})}else throw new Error(E.message||"更新失敗")}catch(E){console.error("更新表單狀態失敗:",E),u({text:((p=(a=E.response)==null?void 0:a.data)==null?void 0:p.message)||"更新表單狀態失敗",snackbarProps:{color:"error"}})}finally{x.value=!1}}},Te=h("basic"),$e=h(!1),he=h(!1),Ra=h(!1),Ea=h(!1),Ba=h(!1),Aa=h(!1),Ua=h(!1),Ha=h(null),Ta=h(""),qa=h(!1),We=h(!1),ee=h({open:!1,id:""}),Xa=h(null),nl=h(null),de=h({open:!1,userId:"",userName:"",loading:!1}),ae=h(null),H=h([]),Ll=h([]),sl=h(Object.entries(bl).map(([e,a])=>({value:Number(e),title:a}))),jl=O(()=>[...$a.value].sort((e,a)=>{const p=e.companyId||"",E=a.companyId||"";return p.localeCompare(E)}).map(e=>({title:`${e.name}`,value:e._id}))),$a=h([]),Wl=O(()=>[{title:"全部",value:""},...[...$a.value].sort((e,a)=>{const p=e.companyId||"",E=a.companyId||"";return p.localeCompare(E)}).map(e=>({title:e.name,value:e._id}))]),ol=h([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),Hl=h([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),ql=O(()=>I.value?"1280":f.value?"1080":g.value?"800":S.value?"600":"100%"),Xl=Il({dependentName:k().required("請輸入受保人姓名"),dependentRelationship:k(),dependentBirthDate:le().nullable().required("請輸入受保人生日"),dependentIDNumber:k().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入受保人身分證號碼"),dependentInsuranceStartDate:le().nullable(),dependentInsuranceEndDate:le().nullable()}),Fl=Il({email:k().required("請輸入公司 email").email("請輸入正確的 email 格式"),personalEmail:k().email("請輸入正確的 email 格式").nullable(),IDNumber:k().matches(/^[A-Za-z][12]\d{8}$/,"身分證格式錯誤").required("請輸入身分證號碼"),gender:k().required("請選擇姓別"),name:k().required("請輸入姓名"),englishName:k().nullable(),phoneNumber:k().nullable(),cellphone:k().nullable().test("is-valid-cellphone","手機號碼格式錯誤",e=>e?/^09\d{8}$/.test(e):!0),salary:k().nullable(),extNumber:k().nullable(),printNumber:k().nullable(),birthDate:le().nullable().required("請選擇生日"),permanentAddress:k().required("請輸入戶籍地址"),contactAddress:k().required("請輸入聯絡地址"),company:k().required("請選擇所屬公司"),department:k().required("請選擇部門"),jobTitle:k().nullable(),role:Za().required("請選擇使用者身分別"),cowellAccount:k().nullable(),cowellPassword:k().nullable(),userId:k(),employmentStatus:k().required("請選擇任職狀態"),hireDate:le().nullable().required("請選擇入職日期"),resignationDate:le().nullable(),emergencyName:k().nullable(),emergencyPhoneNumber:k().nullable(),emergencyCellphone:k().nullable().test("is-valid-cellphone","手機號碼格式錯誤",e=>e?/^09\d{8}$/.test(e):!0),emergencyRelationship:k().nullable(),note:k().nullable(),healthInsuranceStartDate:le().nullable(),healthInsuranceEndDate:le().nullable(),laborInsuranceStartDate:le().nullable(),laborInsuranceEndDate:le().nullable(),salaryBank:k().nullable(),salaryBankBranch:k().nullable(),salaryAccountNumber:k().nullable(),guideLicense:kl().of(Za().oneOf([0,1,2,3,4],"導遊證類型必須是 0, 1, 2, 3,4 之一")).default([]),tourManager:xl(),YSRCAccount:k().nullable(),YSRCPassword:k().nullable(),YS168Account:k().nullable(),YS168Password:k().nullable(),disabilityStatus:k().nullable(),indigenousStatus:xl().nullable(),voluntaryPensionRate:Za().nullable().transform((e,a)=>a===""?null:e),voluntaryPensionStartDate:le().nullable(),voluntaryPensionEndDate:le().nullable(),dependentInsurance:kl().of(Xl).default([]),tourismReportDate:le().nullable(),formStatus:k().nullable()}),{handleSubmit:Jl,isSubmitting:Fa,resetForm:ul}=on({validationSchema:Fl,initialValues:{email:"",personalEmail:"",IDNumber:"",gender:"男性",name:"",englishName:"",phoneNumber:"",cellphone:"",salary:"",extNumber:"",printNumber:"",birthDate:null,permanentAddress:"",contactAddress:"",company:"",department:"",jobTitle:"",role:0,cowellAccount:"",cowellPassword:"",userId:"",employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyPhoneNumber:"",emergencyCellphone:"",emergencyRelationship:"",note:"",healthInsuranceStartDate:null,healthInsuranceEndDate:null,laborInsuranceStartDate:null,laborInsuranceEndDate:null,salaryBank:"008",salaryBankBranch:"",salaryAccountNumber:"",guideLicense:[],tourManager:!1,YSRCAccount:"",YSRCPassword:"",YS168Account:"",YS168Password:"",disabilityStatus:"否",indigenousStatus:!1,voluntaryPensionRate:null,voluntaryPensionStartDate:null,voluntaryPensionEndDate:null,dependentInsurance:[],tourismReportDate:null,formStatus:"尚未完成"},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:O(()=>({isEditing:D.value}))}),He=b("email"),qe=b("personalEmail"),Me=b("IDNumber"),pe=b("gender"),Xe=b("name"),Fe=b("englishName"),Je=b("phoneNumber"),Ge=b("cellphone"),Ze=b("salary"),Ke=b("extNumber"),Qe=b("printNumber"),Ve=b("birthDate"),De=b("permanentAddress"),Ye=b("contactAddress"),Se=b("company",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),Ie=b("department",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),ea=b("jobTitle"),aa=b("role"),la=b("cowellAccount"),ta=b("cowellPassword"),na=b("userId",void 0,{validateOnValueUpdate:!1,transform:e=>e??""}),ke=b("employmentStatus"),ge=b("hireDate"),ie=b("resignationDate"),sa=b("emergencyName"),oa=b("emergencyPhoneNumber"),ua=b("emergencyCellphone"),ra=b("emergencyRelationship"),da=b("note"),xe=b("healthInsuranceStartDate"),Ce=b("healthInsuranceEndDate"),we=b("laborInsuranceStartDate"),Pe=b("laborInsuranceEndDate"),ia=b("salaryBank"),ca=b("salaryBankBranch"),ma=b("salaryAccountNumber"),va=b("guideLicense"),pa=b("tourManager"),ga=b("YSRCAccount"),fa=b("YSRCPassword"),ba=b("YS168Account"),ya=b("YS168Password"),ha=b("disabilityStatus"),Va=b("indigenousStatus"),Da=b("voluntaryPensionRate"),Ne=b("voluntaryPensionStartDate"),Re=b("voluntaryPensionEndDate"),rl=b("dependentInsurance"),Ee=b("tourismReportDate"),fe=b("formStatus"),{rocDate:Gl}=re(Ve),{rocDate:Zl}=re(ge),{rocDate:Kl}=re(ie),{rocDate:Ql}=re(xe),{rocDate:et}=re(Ce),{rocDate:at}=re(we),{rocDate:lt}=re(Pe),{rocDate:tt}=re(Ne),{rocDate:nt}=re(Re),{rocDate:st}=re(Ee),Ma=h(10),Ya=h([{key:"userId",order:"asc"}]),G=h(1),be=h([]),Oa=h(0),Sa=[{title:"員編",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"表單狀態",align:"left",sortable:!0,key:"formStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],Oe=h(!0),Ja=h(0),dl=h(""),P=h({role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]}),Ia=h(""),ot=e=>bl[e]||"未知",_=e=>e?new Date(e):null,ut=O(()=>i.isSuperAdmin||i.isHR||i.isAdmin),rt=O(()=>["xl","xxl"].includes(C.value)?Sa:["lg"].includes(C.value)?Sa.filter(e=>e.key!=="employmentStatus"):["md"].includes(C.value)?Sa.filter(e=>e.key!=="cellphone"&&e.key!=="email"&&e.key!=="employmentStatus"):["sm"].includes(C.value)?Sa.filter(e=>e.key!=="company.name"&&e.key!=="department.name"&&e.key!=="cellphone"&&e.key!=="email"&&e.key!=="employmentStatus"):Sa.filter(e=>e.key!=="company.name"&&e.key!=="department.name"&&e.key!=="cellphone"&&e.key!=="email"&&e.key!=="role"&&e.key!=="employmentStatus")),dt=async()=>{try{const{data:e}=await c.get("/department/all");Ll.value=e.result}catch(e){console.error("加載部門失敗",e),u({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},it=async()=>{try{const{data:e}=await c.get("/company/all");e.success&&($a.value=e.result)}catch(e){console.error("載入公司列表失敗:",e),u({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},ct=async()=>{if(!P.value.companyId){H.value=[];return}try{const{data:e}=await c.get("/department/all",{params:{companyId:P.value.companyId}});e.success?H.value=e.result||[]:(console.warn("找不到該公司的部門"),H.value=[])}catch(e){console.error("載入部門失敗:",e),u({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),H.value=[]}},Be=async(e,a)=>{e?G.value=1:a&&(G.value=a),await ka()},ka=async()=>{var e,a,p,E;Oe.value=!0,console.log("Selected date range:",P.value.dateRange);try{const T={page:G.value,itemsPerPage:Ma.value,sortBy:((e=Ya.value[0])==null?void 0:e.key)||"userId",sortOrder:((a=Ya.value[0])==null?void 0:a.order)||"asc",quickSearch:Ia.value,...P.value,department:P.value.department};P.value.dateType&&P.value.dateRange&&P.value.dateRange.length>0&&(T.dateType=P.value.dateType,T.startDate=P.value.dateRange[0].toISOString(),T.endDate=P.value.dateRange[P.value.dateRange.length-1].toISOString()),console.log("Query params:",T);const{data:d}=await c.get("/user/search",{params:T});d.success&&(be.value=d.result.data,Ja.value=d.result.totalItems)}catch(T){console.error("搜索失败:",T),u({text:((E=(p=T==null?void 0:T.response)==null?void 0:p.data)==null?void 0:E.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{Oe.value=!1}},mt=async()=>{var e,a;try{de.value.loading=!0,await c.post(`/user/${de.value.userId}/send-initial-password`);const p=be.value.findIndex(E=>E._id===de.value.userId);p!==-1&&(be.value[p].isFirstLogin=!1),u({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),cl()}catch(p){console.error("發送初始密碼失敗:",p),u({text:((a=(e=p==null?void 0:p.response)==null?void 0:e.data)==null?void 0:a.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{de.value.loading=!1}},vt=Jl(async e=>{var a,p,E,T;try{if(!ae.value){Se.errorMessage.value="請選擇公司",u({text:"請選擇公司",snackbarProps:{color:"red-lighten-1"}});return}if(D.value){const d=G.value,t={...e,company:ae.value,dependentInsurance:Y.value,healthInsuranceStartDate:e.healthInsuranceStartDate,healthInsuranceEndDate:e.healthInsuranceEndDate,laborInsuranceStartDate:e.laborInsuranceStartDate,laborInsuranceEndDate:e.laborInsuranceEndDate,voluntaryPensionStartDate:e.voluntaryPensionStartDate,voluntaryPensionEndDate:e.voluntaryPensionEndDate,birthDate:e.birthDate,hireDate:e.hireDate,tourismReportDate:e.tourismReportDate,resignationDate:e.resignationDate},{data:Z}=await c.patch(`/user/${ee.value.id}`,t),ye=be.value.findIndex(K=>K._id===ee.value.id);ye!==-1&&(be.value[ye]={...Z.result,company:$a.value.find(K=>K._id===ae.value),department:{_id:e.department,name:((a=H.value.find(K=>K._id===e.department))==null?void 0:a.name)||""}}),await Be(!1,d)}else{const d={...e,company:ae.value,dependentInsurance:Y.value};console.log("送出的資料:",{email:d.email,personalEmail:d.personalEmail,name:d.name,englishName:d.englishName,gender:d.gender,IDNumber:d.IDNumber,phoneNumber:d.phoneNumber,cellphone:d.cellphone,birthDate:d.birthDate,permanentAddress:d.permanentAddress,contactAddress:d.contactAddress,emergencyName:d.emergencyName,emergencyPhoneNumber:d.emergencyPhoneNumber,emergencyCellphone:d.emergencyCellphone,emergencyRelationship:d.emergencyRelationship,company:d.company,department:d.department,jobTitle:d.jobTitle,role:d.role,employmentStatus:d.employmentStatus,hireDate:d.hireDate,salary:d.salary,formStatus:d.formStatus,extNumber:d.extNumber,printNumber:d.printNumber,cowellAccount:d.cowellAccount,cowellPassword:d.cowellPassword,YSRCAccount:d.YSRCAccount,YSRCPassword:d.YSRCPassword,YS168Account:d.YS168Account,YS168Password:d.YS168Password,guideLicense:d.guideLicense,tourManager:d.tourManager,disabilityStatus:d.disabilityStatus,indigenousStatus:d.indigenousStatus,healthInsuranceStartDate:d.healthInsuranceStartDate,healthInsuranceEndDate:d.healthInsuranceEndDate,laborInsuranceStartDate:d.laborInsuranceStartDate,laborInsuranceEndDate:d.laborInsuranceEndDate,voluntaryPensionRate:d.voluntaryPensionRate,voluntaryPensionStartDate:d.voluntaryPensionStartDate,voluntaryPensionEndDate:d.voluntaryPensionEndDate,tourismReportDate:d.tourismReportDate,salaryBank:d.salaryBank,salaryBankBranch:d.salaryBankBranch,salaryAccountNumber:d.salaryAccountNumber,dependentInsurance:d.dependentInsurance}),await c.post("/user",d),await Be(!0)}await Promise.all([(p=Ha.value)==null?void 0:p.refreshChart(),(E=Xa.value)==null?void 0:E.refreshChart(),(T=nl.value)==null?void 0:T.refreshData()]),u({text:D.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),Ga()}catch(d){const t=pt(d);u({text:t,snackbarProps:{color:"red-lighten-1"}})}}),pt=e=>e.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[e.response.data.message]||e.response.data.message:"發生錯誤",il=async e=>{var a,p;if(We.value=!0,!ut.value){u({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}We.value=!0,qa.value=!0,M.value=G.value,ee.value.open=!0,e?(D.value=!0,ee.value.id=e._id,e.company&&(ae.value=e.company._id,Se.value.value=e.company._id,await xa(e.company._id),e.department&&e.department._id&&(Ie.value.value=e.department._id)),He.value.value=e.email,qe.value.value=e.personalEmail,Xe.value.value=e.name,Fe.value.value=e.englishName,pe.value.value=e.gender,Me.value.value=e.IDNumber,Je.value.value=e.phoneNumber,Ge.value.value=e.cellphone,Ve.value.value=_(e.birthDate),De.value.value=e.permanentAddress,Ye.value.value=e.contactAddress,sa.value.value=e.emergencyName,oa.value.value=e.emergencyPhoneNumber,ua.value.value=e.emergencyCellphone,ra.value.value=e.emergencyRelationship,na.value.value=e.userId??"",ea.value.value=e.jobTitle,Ze.value.value=e.salary,aa.value.value=e.role,Ke.value.value=e.extNumber,Qe.value.value=e.printNumber,ke.value.value=e.employmentStatus,ge.value.value=_(e.hireDate),ie.value.value=_(e.resignationDate),da.value.value=e.note??"",fe.value.value=e.formStatus,la.value.value=e.cowellAccount,ta.value.value=e.cowellPassword,ga.value.value=e.YSRCAccount,fa.value.value=e.YSRCPassword,ba.value.value=e.YS168Account,ya.value.value=e.YS168Password,va.value.value=e.guideLicense,pa.value.value=e.tourManager,ha.value.value=e.disabilityStatus,Va.value.value=e.indigenousStatus,xe.value.value=_(e.healthInsuranceStartDate),Ce.value.value=_(e.healthInsuranceEndDate),we.value.value=_(e.laborInsuranceStartDate),Pe.value.value=_(e.laborInsuranceEndDate),Da.value.value=e.voluntaryPensionRate,Ne.value.value=_(e.voluntaryPensionStartDate),Re.value.value=_(e.voluntaryPensionEndDate),Ee.value.value=_(e.tourismReportDate),ia.value.value=e.salaryBank,ca.value.value=e.salaryBankBranch,ma.value.value=e.salaryAccountNumber,Y.value=e.dependentInsurance||[],rl.value.value=e.dependentInsurance||[],m.value={email:e.email,personalEmail:e.personalEmail,name:e.name,englishName:e.englishName,gender:e.gender,IDNumber:e.IDNumber,phoneNumber:e.phoneNumber,cellphone:e.cellphone,birthDate:_(e.birthDate),permanentAddress:e.permanentAddress,contactAddress:e.contactAddress,emergencyName:e.emergencyName,emergencyPhoneNumber:e.emergencyPhoneNumber,emergencyCellphone:e.emergencyCellphone,emergencyRelationship:e.emergencyRelationship,company:(a=e.company)==null?void 0:a._id,department:(p=e.department)==null?void 0:p._id,userId:e.userId??"",jobTitle:e.jobTitle,salary:e.salary,role:e.role,extNumber:e.extNumber,printNumber:e.printNumber,employmentStatus:e.employmentStatus,hireDate:_(e.hireDate),resignationDate:_(e.resignationDate),note:e.note??"",formStatus:e.formStatus,cowellAccount:e.cowellAccount,cowellPassword:e.cowellPassword,YSRCAccount:e.YSRCAccount,YSRCPassword:e.YSRCPassword,YS168Account:e.YS168Account,YS168Password:e.YS168Password,guideLicense:e.guideLicense??[],tourManager:e.tourManager,disabilityStatus:e.disabilityStatus,indigenousStatus:e.indigenousStatus,healthInsuranceStartDate:_(e.healthInsuranceStartDate),healthInsuranceEndDate:_(e.healthInsuranceEndDate),laborInsuranceStartDate:_(e.laborInsuranceStartDate),laborInsuranceEndDate:_(e.laborInsuranceEndDate),voluntaryPensionRate:e.voluntaryPensionRate,voluntaryPensionStartDate:_(e.voluntaryPensionStartDate),voluntaryPensionEndDate:_(e.voluntaryPensionEndDate),tourismReportDate:_(e.tourismReportDate),salaryBank:e.salaryBank,salaryBankBranch:e.salaryBankBranch,salaryAccountNumber:e.salaryAccountNumber,dependentInsurance:e.dependentInsurance||[]},console.log("originalData:",m.value),localStorage.setItem("userTablePage",G.value.toString())):(D.value=!1,ee.value.id="",m.value=null,ae.value=null,H.value=[],Y.value=[],rl.value.value=[],ul(),ge.value.value=new Date),setTimeout(()=>{We.value=!1,qa.value=!1},300)},Ga=()=>{ee.value.open=!1,ae.value=null,H.value=[],m.value=null,Y.value=[],ul()},gt=e=>{de.value={open:!0,userId:e._id,userName:e.name,loading:!1}},cl=()=>{de.value={open:!1,userId:"",userName:"",loading:!1}},ft=async()=>{var e,a,p,E,T;try{Oe.value=!0,await c.delete(`/user/${ee.value.id}`),Ga(),await Be(!0),await((e=Ha.value)==null?void 0:e.refreshChart()),await((a=Xa.value)==null?void 0:a.refreshChart()),await((p=nl.value)==null?void 0:p.refreshData()),u({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(d){console.error("Delete user error:",d),u({text:((T=(E=d==null?void 0:d.response)==null?void 0:E.data)==null?void 0:T.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{Oe.value=!1,v.value=!1}},bt=()=>{De.value.value&&(Ye.value.value=De.value.value)},yt=e=>{e<1&&(e=1);const a=Math.ceil(Ja.value/Ma.value);e>a&&(e=a),G.value!==e&&(G.value=e,localStorage.removeItem("userTablePage"),Be(!1))},ht=()=>{P.value={role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]},H.value=[],dl.value="",Ia.value="",G.value=1,ka()},Vt=O(()=>{if(!D.value)return!0;if(!m.value)return!1;const e={email:He.value.value,personalEmail:qe.value.value,name:Xe.value.value,englishName:Fe.value.value,gender:pe.value.value,IDNumber:Me.value.value,permanentAddress:De.value.value,contactAddress:Ye.value.value,phoneNumber:Je.value.value,cellphone:Ge.value.value,emergencyName:sa.value.value,emergencyPhoneNumber:oa.value.value,emergencyCellphone:ua.value.value,emergencyRelationship:ra.value.value,birthDate:Ve.value.value,hireDate:ge.value.value,resignationDate:ie.value.value,healthInsuranceStartDate:xe.value.value,healthInsuranceEndDate:Ce.value.value,laborInsuranceStartDate:we.value.value,laborInsuranceEndDate:Pe.value.value,voluntaryPensionStartDate:Ne.value.value,voluntaryPensionEndDate:Re.value.value,tourismReportDate:Ee.value.value,company:ae.value,department:Ie.value.value,jobTitle:ea.value.value,role:aa.value.value,extNumber:Ke.value.value,printNumber:Qe.value.value,employmentStatus:ke.value.value,salary:Ze.value.value,note:da.value.value??"",tourManager:pa.value.value,guideLicense:va.value.value,disabilityStatus:ha.value.value,indigenousStatus:Va.value.value,voluntaryPensionRate:Da.value.value,salaryBank:ia.value.value,salaryBankBranch:ca.value.value,salaryAccountNumber:ma.value.value,cowellAccount:la.value.value,cowellPassword:ta.value.value,YSRCAccount:ga.value.value,YSRCPassword:fa.value.value,YS168Account:ba.value.value,YS168Password:ya.value.value,userId:na.value.value,formStatus:fe.value.value},a=["email","personalEmail","name","englishName","gender","IDNumber","permanentAddress","contactAddress","phoneNumber","cellphone"].some(d=>m.value[d]!==e[d]),p=["birthDate","hireDate","resignationDate","healthInsuranceStartDate","healthInsuranceEndDate","laborInsuranceStartDate","laborInsuranceEndDate","voluntaryPensionStartDate","voluntaryPensionEndDate","tourismReportDate"].some(d=>{const t=m.value[d]?new Date(m.value[d]).getTime():null,Z=e[d]?new Date(e[d]).getTime():null;return t!==Z}),E=(()=>{const d=m.value.dependentInsurance||[],t=Y.value||[];return d.length!==t.length?(console.log("Dependents length changed"),!0):t.some((Z,ye)=>{const K=d[ye];return K?["dependentName","dependentIDNumber","dependentRelationship","dependentBirthDate","dependentInsuranceStartDate","dependentInsuranceEndDate"].some(ue=>{if(ue.includes("Date")){const pl=K[ue]?new Date(K[ue]).getTime():null,gl=Z[ue]?new Date(Z[ue]).getTime():null;return console.log(`Comparing ${ue}:`,pl,gl),pl!==gl}else return console.log(`Comparing ${ue}:`,K[ue],Z[ue]),K[ue]!==Z[ue]}):!0})})();console.log("Dependents changed:",E);const T=["company","department","jobTitle","role","extNumber","printNumber","employmentStatus","salary","note","tourManager","guideLicense","disabilityStatus","indigenousStatus","voluntaryPensionRate","salaryBank","salaryBankBranch","salaryAccountNumber","emergencyName","emergencyPhoneNumber","emergencyCellphone","emergencyRelationship","cowellAccount","cowellPassword","YSRCAccount","YSRCPassword","YS168Account","YS168Password","userId","formStatus"].some(d=>Array.isArray(m.value[d])?JSON.stringify(m.value[d])!==JSON.stringify(e[d]):m.value[d]!==e[d]);return console.log("Changes detected:",{basicInfoChanged:a,datesChanged:p,dependentsChanged:E,otherFieldsChanged:T}),a||p||E||T}),xa=async e=>{var a;try{if(ee.value.open?ae.value=e:P.value={...P.value,companyId:e,department:""},!e){H.value=[];return}console.log("正在載入公司ID的部門:",e);const{data:p}=await c.get("/department/all",{params:{companyId:e,itemsPerPage:100}});console.log("API 返回的部門數據:",p),p.success?(H.value=((a=p.result)==null?void 0:a.data)||[],console.log("設置過濾後的部門列表:",H.value)):(console.warn("找不到該公司的部門"),H.value=[])}catch(p){console.error("載入部門失敗:",p),u({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),H.value=[]}},Dt=Sl.debounce(e=>{Be(!0)},300),ml=Sl.debounce(e=>{G.value=1,ka()},300);return se(Ia,e=>{ml(e)}),se(ae,async e=>{e!=null?(Se.value.value=e,Ie.value.value="",await xa(e)):(Se.value.value=null,Ie.value.value="",H.value=[])}),se(()=>P.value.companyId,async e=>{e?await xa(e):H.value=[]}),se(()=>P.value.dateRange,e=>{console.log("選擇的日期區間:",e)}),se(Se.value,e=>{e&&e.value!==null&&e.value!==void 0&&(ae.value=e.value)}),se(ke.value,e=>{We.value||(e==="離職"?Ua.value=!0:(Ua.value=!1,ie.value.value=null))}),se(()=>Me.value.value,e=>{if(!e){pe.value.value=null,Ta.value="";return}if(e.length===10&&e!==Ta.value&&!qa.value&&/^[A-Za-z][12]\d{8}$/.test(e)){const p=e.charAt(1);p==="1"?(pe.value.value="男性",Ta.value=e,u({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):p==="2"&&(pe.value.value="女性",Ta.value=e,u({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),yl(async()=>{const e=localStorage.getItem("userTablePage");e&&(G.value=parseInt(e),Oa.value++),await it(),await dt(),await ct(),await ka()}),yl(()=>{const e=localStorage.getItem("userTablePage");e&&parseInt(e)>0?(G.value=parseInt(e),Oa.value++,localStorage.removeItem("userTablePage")):G.value=1}),Qt(()=>{Dt.cancel(),ml.cancel()}),(e,a)=>{var E,T,d;const p=Tl("v-date-input");return $(),ne(Ue,null,[l(vn,{"max-width":"2500"},{default:s(()=>[l(L,{class:"rounded-xl py-0 mt-2 ma-sm-1 ma-md-6"},{default:s(()=>[n(I)?($(),q(r,{key:0,class:"ps-4 py-0"},{default:s(()=>[l(rn,{ref_key:"chartRef",ref:Ha},null,512)]),_:1})):F("",!0),n(g)?($(),q(r,{key:1,class:"ps-4 py-0"},{default:s(()=>[l(dn,{ref_key:"turnoverChartRef",ref:Xa},null,512)]),_:1})):F("",!0),l(r,{class:"pa-0 mb-6 mb-sm-0"},{default:s(()=>[l(za,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-5 pb-4 pb-sm-5",elevation:"4",rounded:"xl",height:"100%"},{default:s(()=>[l(Ca,{class:"d-flex align-center"},{default:s(()=>[l(L,{class:"h-100"},{default:s(()=>[l(r,{cols:"12",class:"d-flex flex-column justify-center"},{default:s(()=>[l(L,null,{default:s(()=>a[88]||(a[88]=[j("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),l(L,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(Q,{modelValue:P.value.companyId,"onUpdate:modelValue":[a[0]||(a[0]=t=>P.value.companyId=t),xa],items:Wl.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(Q,{modelValue:P.value.department,"onUpdate:modelValue":a[1]||(a[1]=t=>P.value.department=t),items:H.value,label:"部門","item-title":"name","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!P.value.companyId},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),l(L,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(Q,{modelValue:P.value.role,"onUpdate:modelValue":a[2]||(a[2]=t=>P.value.role=t),items:sl.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(Q,{modelValue:P.value.employmentStatus,"onUpdate:modelValue":a[3]||(a[3]=t=>P.value.employmentStatus=t),items:ol.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),l(L,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(Q,{modelValue:P.value.dateType,"onUpdate:modelValue":a[4]||(a[4]=t=>P.value.dateType=t),items:R.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(p,{modelValue:P.value.dateRange,"onUpdate:modelValue":a[5]||(a[5]=t=>P.value.dateRange=t),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1}),l(L,null,{default:s(()=>[l(r,{cols:"6",class:"pe-0 py-0"},{default:s(()=>[j("div",_n,[a[91]||(a[91]=j("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),l(an,{modelValue:P.value.gender,"onUpdate:modelValue":a[6]||(a[6]=t=>P.value.gender=t),column:"",class:"custom-chip-group"},{default:s(()=>[l(Pa,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:s(()=>a[89]||(a[89]=[N(" 男性 ")])),_:1}),l(Pa,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:s(()=>a[90]||(a[90]=[N(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(L,null,{default:s(()=>[l(r,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[l(L,null,{default:s(()=>[l(r,{cols:"3"},{default:s(()=>[l(X,{color:"grey",block:"",onClick:ht},{default:s(()=>[l(ce,null,{default:s(()=>a[92]||(a[92]=[N("mdi-refresh")])),_:1})]),_:1})]),_:1}),l(r,null,{default:s(()=>[l(X,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:Oe.value,block:"",onClick:a[7]||(a[7]=()=>{console.log("Current search criteria:",P.value.value),ka()})},{default:s(()=>a[93]||(a[93]=[N(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:s(()=>[l(r,{cols:"12",class:"ps-3 pb-6"},{default:s(()=>a[94]||(a[94]=[j("h3",null," 員工管理 ",-1)])),_:1}),l(r,{cols:"12"},{default:s(()=>[l(L,null,{default:s(()=>[l(r,null,{default:s(()=>[l(L,null,{default:s(()=>[l(r,null,{default:s(()=>[l(X,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:a[8]||(a[8]=t=>il(null))},{default:s(()=>a[95]||(a[95]=[N(" 新增使用者 ")])),_:1})]),_:1}),l(r,{sm:"4",lg:"3",xl:"2"},{default:s(()=>[l(L,{class:"d-flex align-center"},{default:s(()=>[n(g)?($(),q(r,{key:0,cols:"2",class:"ps-lg-5"},{default:s(()=>[Na(l(ce,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[Ka,"可搜尋員編、姓名、公司Email、手機、分機、職稱、備註","start"]])]),_:1})):F("",!0),l(r,null,{default:s(()=>[l(B,{modelValue:Ia.value,"onUpdate:modelValue":a[9]||(a[9]=t=>Ia.value=t),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,{cols:"12"},{default:s(()=>[($(),q(pn,{key:Oa.value,"items-per-page":Ma.value,"onUpdate:itemsPerPage":[a[10]||(a[10]=t=>Ma.value=t),a[12]||(a[12]=t=>Be(!1))],"sort-by":Ya.value,"onUpdate:sortBy":[a[11]||(a[11]=t=>Ya.value=t),a[13]||(a[13]=t=>Be(!1))],page:G.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:be.value,headers:rt.value,"header-props":y,loading:Oe.value,"items-length":Ja.value,search:dl.value,hover:"","onUpdate:page":yt},{item:s(({item:t,index:Z})=>{var ye,K;return[j("tr",{class:ln({"odd-row":Z%2===0,"even-row":Z%2!==0})},[j("td",null,W(t.userId),1),j("td",null,W(t.name),1),n(f)?($(),ne("td",Ln,W(t.email),1)):F("",!0),n(f)?($(),ne("td",jn,W(t.cellphone),1)):F("",!0),n(g)?($(),ne("td",Wn,W(((ye=t.company)==null?void 0:ye.name)||""),1)):F("",!0),n(g)?($(),ne("td",Hn,W(((K=t.department)==null?void 0:K.name)||""),1)):F("",!0),j("td",null,W(t.extNumber),1),n(S)?($(),ne("td",qn,W(ot(t.role)),1)):F("",!0),n(I)?($(),ne("td",Xn,W(t.employmentStatus),1)):F("",!0),n(I)?($(),ne("td",Fn,[l(Pa,{color:je(t.formStatus),variant:"outlined",size:"small",label:""},{default:s(()=>[N(W(t.formStatus),1)]),_:2},1032,["color"])])):F("",!0),j("td",Jn,[l(X,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:A.value,ripple:!1,onClick:vl=>il(t)},{default:s(()=>[l(ce,null,{default:s(()=>a[96]||(a[96]=[N("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),t.isFirstLogin?Na(($(),q(X,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:A.value,ripple:!1,onClick:vl=>gt(t)},{default:s(()=>[l(ce,null,{default:s(()=>a[97]||(a[97]=[N("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[Ka,"發送初始密碼"]]):F("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(hl,{modelValue:de.value.open,"onUpdate:modelValue":a[14]||(a[14]=t=>de.value.open=t),persistent:"","max-width":"360"},{default:s(()=>[l(za,{class:"rounded-lg pa-4"},{default:s(()=>[a[102]||(a[102]=j("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),j("div",Gn,[a[98]||(a[98]=N(" 確定要發送系統生成的初始密碼給 ")),j("span",Zn,W(de.value.userName),1),a[99]||(a[99]=N(" 嗎？ "))]),l(Vl,{class:"pa-4 pt-0"},{default:s(()=>[l(Dl),l(X,{color:"grey",variant:"outlined",size:A.value,onClick:cl},{default:s(()=>a[100]||(a[100]=[N(" 取消 ")])),_:1},8,["size"]),l(X,{color:"teal-darken-1",variant:"outlined",size:A.value,loading:de.value.loading,onClick:mt},{default:s(()=>a[101]||(a[101]=[N(" 確認發送 ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(hl,{modelValue:ee.value.open,"onUpdate:modelValue":a[83]||(a[83]=t=>ee.value.open=t),persistent:"",width:ql.value},{default:s(()=>[l(gn,{disabled:n(Fa),onSubmit:tn(n(vt),["prevent"])},{default:s(()=>[l(za,{class:"rounded-lg px-4 py-6"},{default:s(()=>[j("div",Kn,[N(W(ee.value.id?"員工資料編輯":"新增員工")+" ",1),l(nn,null,{activator:s(({props:t})=>[Na(($(),q(Pa,me(t,{color:je(n(fe).value.value),variant:"outlined",label:"",size:"small",class:"ml-2",loading:x.value,disabled:x.value}),{default:s(()=>[N(W(n(fe).value.value),1)]),_:2},1040,["color","loading","disabled"])),[[Ka,"點擊更改表單狀態","start"]])]),default:s(()=>[l(fn,null,{default:s(()=>[($(),ne(Ue,null,al(ja,t=>l(bn,{key:t,active:n(fe).value.value===t,onClick:Z=>D.value?tl(t):n(fe).value.value=t},{default:s(()=>[l(yn,null,{default:s(()=>[N(W(t),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:1})]),_:1})]),j("div",Qn,[l(Un,{modelValue:Te.value,"onUpdate:modelValue":a[15]||(a[15]=t=>Te.value=t),color:"blue-grey-darken-2","align-tabs":"center","mobile-breakpoint":"sm",density:"compact",height:"40"},{default:s(()=>[l(_a,{value:"basic",class:"tab-title"},{default:s(()=>[l(ce,{start:""},{default:s(()=>a[103]||(a[103]=[N(" mdi-account-outline ")])),_:1}),a[104]||(a[104]=N(" 個人資訊 "))]),_:1}),l(_a,{value:"employment",class:"tab-title"},{default:s(()=>[l(ce,{start:""},{default:s(()=>a[105]||(a[105]=[N(" mdi-briefcase-outline ")])),_:1}),a[106]||(a[106]=N(" 任職資訊 "))]),_:1}),l(_a,{value:"insurance",class:"tab-title"},{default:s(()=>[l(ce,{start:""},{default:s(()=>a[107]||(a[107]=[N(" mdi-shield-account-outline ")])),_:1}),a[108]||(a[108]=N(" 保險及薪轉資訊 "))]),_:1})]),_:1},8,["modelValue"])]),We.value&&D.value?($(),q(Ca,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:s(()=>[l(sn,{indeterminate:"",color:"blue-grey-darken-2",size:w.value},null,8,["size"])]),_:1})):($(),q(_l,{key:1,modelValue:Te.value,"onUpdate:modelValue":a[81]||(a[81]=t=>Te.value=t),class:"mx-1 overflow-y-auto"},{default:s(()=>[l(La,{value:"basic"},{default:s(()=>[l(Ca,{class:"mt-3 pa-3"},{default:s(()=>[l(L,null,{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Xe).value.value,"onUpdate:modelValue":a[16]||(a[16]=t=>n(Xe).value.value=t),"error-messages":n(Xe).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Fe).value.value,"onUpdate:modelValue":a[17]||(a[17]=t=>n(Fe).value.value=t),"error-messages":n(Fe).errorMessage.value,label:"英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Me).value.value,"onUpdate:modelValue":a[18]||(a[18]=t=>n(Me).value.value=t),"error-messages":n(Me).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(pe).value.value,"onUpdate:modelValue":a[19]||(a[19]=t=>n(pe).value.value=t),items:Hl.value,"error-messages":n(pe).errorMessage.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(ha).value.value,"onUpdate:modelValue":a[20]||(a[20]=t=>n(ha).value.value=t),"error-messages":n(ha).errorMessage.value,items:z,"item-title":"title","item-value":"value",label:"身心障礙身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(Va).value.value,"onUpdate:modelValue":a[21]||(a[21]=t=>n(Va).value.value=t),"error-messages":n(Va).errorMessage.value,items:J,"item-title":"title","item-value":"value",label:"原住民身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Ve).value.value,"onUpdate:modelValue":a[22]||(a[22]=t=>n(Ve).value.value=t),"error-messages":n(Ve).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:n(Gl),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":a[23]||(a[23]=t=>n(Ve).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Je).value.value,"onUpdate:modelValue":a[24]||(a[24]=t=>n(Je).value.value=t),"error-messages":n(Je).errorMessage.value,label:"室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ge).value.value,"onUpdate:modelValue":a[25]||(a[25]=t=>n(Ge).value.value=t),"error-messages":n(Ge).errorMessage.value,label:"手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(qe).value.value,"onUpdate:modelValue":a[26]||(a[26]=t=>n(qe).value.value=t),"error-messages":n(qe).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(De).value.value,"onUpdate:modelValue":a[27]||(a[27]=t=>n(De).value.value=t),"error-messages":n(De).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ye).value.value,"onUpdate:modelValue":a[28]||(a[28]=t=>n(Ye).value.value=t),"error-messages":n(Ye).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":s(()=>[l(hn,{location:"top","close-delay":"200"},{activator:s(({tprops:t})=>[l(ce,me(t,{icon:"mdi-content-copy",onClick:bt}),null,16)]),default:s(()=>[a[109]||(a[109]=N(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(L,{class:"d-flex align-center my-2"},{default:s(()=>[l(r,{cols:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>a[110]||(a[110]=[N(" 緊急連絡人資訊 ")])),_:1}),l(r,{cols:"4"},{default:s(()=>[l(wa)]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(sa).value.value,"onUpdate:modelValue":a[29]||(a[29]=t=>n(sa).value.value=t),"error-messages":n(sa).errorMessage.value,label:"緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(oa).value.value,"onUpdate:modelValue":a[30]||(a[30]=t=>n(oa).value.value=t),"error-messages":n(oa).errorMessage.value,label:"緊急聯絡人室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ua).value.value,"onUpdate:modelValue":a[31]||(a[31]=t=>n(ua).value.value=t),"error-messages":n(ua).errorMessage.value,label:"緊急聯絡人手機",type:"text",maxlength:"10",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ra).value.value,"onUpdate:modelValue":a[32]||(a[32]=t=>n(ra).value.value=t),"error-messages":n(ra).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(La,{value:"employment"},{default:s(()=>[l(Ca,{class:"mt-3 pa-3"},{default:s(()=>[l(L,null,{default:s(()=>[D.value?($(),q(r,{key:0,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(na).value.value,"onUpdate:modelValue":a[33]||(a[33]=t=>n(na).value.value=t),"error-messages":n(na).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):F("",!0),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:ae.value,"onUpdate:modelValue":[a[34]||(a[34]=t=>ae.value=t),xa],"error-messages":n(Se).errorMessage.value,items:jl.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:"",error:!!n(Se).errorMessage.value},null,8,["modelValue","error-messages","items","error"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(Ie).value.value,"onUpdate:modelValue":a[35]||(a[35]=t=>n(Ie).value.value=t),items:H.value,"error-messages":n(Ie).errorMessage.value,"item-title":"name","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ea).value.value,"onUpdate:modelValue":a[36]||(a[36]=t=>n(ea).value.value=t),"error-messages":n(ea).errorMessage.value,label:"職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(aa).value.value,"onUpdate:modelValue":a[37]||(a[37]=t=>n(aa).value.value=t),"error-messages":n(aa).errorMessage.value,items:sl.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(ge).value.value,"onUpdate:modelValue":a[38]||(a[38]=t=>n(ge).value.value=t),"error-messages":n(ge).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:n(Zl),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":a[39]||(a[39]=t=>n(ge).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(ke).value.value,"onUpdate:modelValue":a[40]||(a[40]=t=>n(ke).value.value=t),"error-messages":n(ke).errorMessage.value,items:ol.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),n(ie).value.value?($(),q(r,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(ie).value.value,"onUpdate:modelValue":a[41]||(a[41]=t=>n(ie).value.value=t),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Kl),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[42]||(a[42]=t=>n(ie).value.value=null)},null,8,["modelValue","hint"])]),_:1})):F("",!0),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ke).value.value,"onUpdate:modelValue":a[43]||(a[43]=t=>n(Ke).value.value=t),"error-messages":n(Ke).errorMessage.value,label:"分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Qe).value.value,"onUpdate:modelValue":a[44]||(a[44]=t=>n(Qe).value.value=t),"error-messages":n(Qe).errorMessage.value,label:"列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ze).value.value,"onUpdate:modelValue":a[45]||(a[45]=t=>n(Ze).value.value=t),"error-messages":n(Ze).errorMessage.value,label:"基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(pa).value.value,"onUpdate:modelValue":a[46]||(a[46]=t=>n(pa).value.value=t),"error-messages":n(pa).errorMessage.value,items:U,"item-title":"title","item-value":"value",label:"旅遊經理人",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Ee).value.value,"onUpdate:modelValue":a[47]||(a[47]=t=>n(Ee).value.value=t),"error-messages":n(Ee).errorMessage.value,label:"觀光局申報到職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(st),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[48]||(a[48]=t=>n(Ee).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",md:"8",lg:"6",class:"pb-0"},{default:s(()=>[l($n,{modelValue:n(va).value.value,"onUpdate:modelValue":a[49]||(a[49]=t=>n(va).value.value=t),"error-messages":n(va).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(L,{class:"d-flex align-center my-2"},{default:s(()=>[l(r,{cols:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>a[111]||(a[111]=[N(" 系統帳號資訊 ")])),_:1}),l(r,{cols:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(He).value.value,"onUpdate:modelValue":a[50]||(a[50]=t=>n(He).value.value=t),"error-messages":n(He).errorMessage.value,label:"*公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(la).value.value,"onUpdate:modelValue":a[51]||(a[51]=t=>n(la).value.value=t),"error-messages":n(la).errorMessage.value,label:"科威帳號",type:$e.value?"text":"password","append-inner-icon":$e.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[52]||(a[52]=t=>$e.value=!$e.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ta).value.value,"onUpdate:modelValue":a[53]||(a[53]=t=>n(ta).value.value=t),"error-messages":n(ta).errorMessage.value,label:"科威密碼",type:he.value?"text":"password","append-inner-icon":he.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[54]||(a[54]=t=>he.value=!he.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ga).value.value,"onUpdate:modelValue":a[55]||(a[55]=t=>n(ga).value.value=t),"error-messages":n(ga).errorMessage.value,label:"YSRC帳號",type:Ra.value?"text":"password","append-inner-icon":Ra.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[56]||(a[56]=t=>Ra.value=!Ra.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(fa).value.value,"onUpdate:modelValue":a[57]||(a[57]=t=>n(fa).value.value=t),"error-messages":n(fa).errorMessage.value,label:"YSRC密碼",type:Ea.value?"text":"password","append-inner-icon":Ea.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[58]||(a[58]=t=>Ea.value=!Ea.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ba).value.value,"onUpdate:modelValue":a[59]||(a[59]=t=>n(ba).value.value=t),"error-messages":n(ba).errorMessage.value,label:"YS168帳號",type:Ba.value?"text":"password","append-inner-icon":Ba.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[60]||(a[60]=t=>Ba.value=!Ba.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ya).value.value,"onUpdate:modelValue":a[61]||(a[61]=t=>n(ya).value.value=t),"error-messages":n(ya).errorMessage.value,label:"YS168密碼",type:Aa.value?"text":"password","append-inner-icon":Aa.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":a[62]||(a[62]=t=>Aa.value=!Aa.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(da).value.value,"onUpdate:modelValue":a[63]||(a[63]=t=>n(da).value.value=t),"error-messages":n(da).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(La,{value:"insurance"},{default:s(()=>[l(Ca,{class:"mt-3 pa-3"},{default:s(()=>[l(L,null,{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(xe).value.value,"onUpdate:modelValue":a[64]||(a[64]=t=>n(xe).value.value=t),"error-messages":n(xe).errorMessage.value,label:"健保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Ql),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[65]||(a[65]=t=>n(xe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Ce).value.value,"onUpdate:modelValue":a[66]||(a[66]=t=>n(Ce).value.value=t),"error-messages":n(Ce).errorMessage.value,label:"健保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(et),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[67]||(a[67]=t=>n(Ce).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(we).value.value,"onUpdate:modelValue":a[68]||(a[68]=t=>n(we).value.value=t),"error-messages":n(we).errorMessage.value,label:"勞保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(at),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[69]||(a[69]=t=>n(we).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Pe).value.value,"onUpdate:modelValue":a[70]||(a[70]=t=>n(Pe).value.value=t),"error-messages":n(Pe).errorMessage.value,label:"勞保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(lt),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[71]||(a[71]=t=>n(Pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Q,{modelValue:n(Da).value.value,"onUpdate:modelValue":a[72]||(a[72]=t=>n(Da).value.value=t),"error-messages":n(Da).errorMessage.value,items:oe,"item-title":"title","item-value":"value",label:"勞退自提比率",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Ne).value.value,"onUpdate:modelValue":a[73]||(a[73]=t=>n(Ne).value.value=t),"error-messages":n(Ne).errorMessage.value,label:"勞退自提加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(tt),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[74]||(a[74]=t=>n(Ne).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(p,{modelValue:n(Re).value.value,"onUpdate:modelValue":a[75]||(a[75]=t=>n(Re).value.value=t),"error-messages":n(Re).errorMessage.value,label:"勞保自提退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(nt),"cancel-text":"取消","ok-text":"確認","onClick:clear":a[76]||(a[76]=t=>n(Re).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(Vn,{modelValue:n(ia).value.value,"onUpdate:modelValue":a[77]||(a[77]=t=>n(ia).value.value=t),items:Wa.value,"error-messages":n(ia).errorMessage.value,label:"薪轉銀行",variant:"outlined",density:"compact","item-title":"title","item-value":"value",clearable:"","menu-props":{maxHeight:400},hint:"可輸入銀行代碼或銀行名稱搜尋","persistent-hint":""},{selection:s(({item:t})=>[N(W(t.title),1)]),_:1},8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ca).value.value,"onUpdate:modelValue":a[78]||(a[78]=t=>n(ca).value.value=t),"error-messages":n(ca).errorMessage.value,label:"薪轉分行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ma).value.value,"onUpdate:modelValue":a[79]||(a[79]=t=>n(ma).value.value=t),"error-messages":n(ma).errorMessage.value,label:"薪轉帳戶號碼",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",class:"mt-10"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(zn,{modelValue:Y.value,"onUpdate:modelValue":a[80]||(a[80]=t=>Y.value=t),errors:V.value},null,8,["modelValue","errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])),l(Vl,{class:"px-4 mt-4"},{default:s(()=>[l(Dn,null,{default:s(({isHovering:t,props:Z})=>[D.value?($(),q(X,me({key:0},Z,{color:t?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:A.value,onClick:a[82]||(a[82]=ye=>v.value=!0)}),{default:s(()=>a[112]||(a[112]=[N(" 永久刪除 ")])),_:2},1040,["color","size"])):F("",!0)]),_:1}),l(Dl),l(X,{color:"red-lighten-1",variant:"outlined",size:A.value,loading:n(Fa),onClick:Ga},{default:s(()=>a[113]||(a[113]=[N(" 取消 ")])),_:1},8,["size","loading"]),l(X,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:A.value,loading:n(Fa),disabled:D.value&&!Vt.value},{default:s(()=>a[114]||(a[114]=[N(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),l(un,{modelValue:Ua.value,"onUpdate:modelValue":a[84]||(a[84]=t=>Ua.value=t),onConfirm:a[85]||(a[85]=t=>{n(ie).value.value=t}),onCancel:a[86]||(a[86]=t=>n(ke).value.value="在職")},null,8,["modelValue"]),l(cn,{modelValue:v.value,"onUpdate:modelValue":a[87]||(a[87]=t=>v.value=t),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((E=m.value)==null?void 0:E.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${((T=m.value)==null?void 0:T.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((d=m.value)==null?void 0:d.name)||"","input-label":"員工姓名",onConfirm:ft},null,8,["modelValue","message","expected-name"])],64)}}},hs=Ul(es,[["__scopeId","data-v-e6d434ca"]]);export{hs as default};
