import{a0 as x,A as _,a2 as V,ao as v,c as a,a8 as s,aE as w,a3 as k,a5 as y,a6 as S,ac as o,a9 as F,ad as i,af as h,aA as B,K as C}from"./index-E3kPulXX.js";import{c as E,a as P,u as A,b as M}from"./index.esm-owwkjXzm.js";import{V as N}from"./VContainer-CI62LWAS.js";import{V as R}from"./VForm-B0ccTDlL.js";import{V as T,a as l}from"./VRow-BqY2S3LH.js";import"./_commonjsHelpers-BosuxZz1.js";const $={id:"background",class:"d-flex justify-center align-center"},j={__name:"forgotPassword",setup(q){_(()=>{console.log("Forgot password component mounted")});const{api:c}=w(),p=k(),d=V(),f=E({email:P().required("請輸入email").email("請輸入正確email格式")}),{handleSubmit:g,isSubmitting:m}=A({validationSchema:f}),n=M("email"),b=g(async u=>{var e,r;try{const{data:t}=await c.post("/user/forgot-password",{email:u.email});d({text:t.message,snackbarProps:{color:"success"}}),p.push("/login")}catch(t){d({text:((r=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:r.message)||"發送重置郵件失敗",snackbarProps:{color:"red-lighten-1"}})}});return(u,e)=>{const r=y("router-link");return S(),v("div",$,[a(N,{class:"forgot-password-wrapper pa-0",style:{"max-width":"360px"}},{default:s(()=>[a(R,{disabled:o(m),onSubmit:F(o(b),["prevent"])},{default:s(()=>[a(T,{class:"px-4 ma-0"},{default:s(()=>[a(l,{cols:"12",class:"text-center mt-4 font-weight-bold"},{default:s(()=>e[1]||(e[1]=[i(" 忘記密碼 ")])),_:1}),a(l,{cols:"12"},{default:s(()=>[e[2]||(e[2]=h("div",{class:"text-body-2 text-medium-emphasis my-4"}," 請輸入您的 Email ，將寄送密碼重置連結給您。 ",-1)),a(B,{modelValue:o(n).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o(n).value.value=t),"error-messages":o(n).errorMessage.value,label:"Email",density:"compact",variant:"underlined",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(l,{cols:"12"},{default:s(()=>[a(C,{block:"",elevation:"2",color:"blue-grey-darken-2",type:"submit",loading:o(m)},{default:s(()=>e[3]||(e[3]=[i(" 發送重置郵件 ")])),_:1},8,["loading"])]),_:1}),a(l,{cols:"12",class:"text-center pb-2"},{default:s(()=>[a(r,{class:"text-grey-darken-1",style:{"font-size":"15px","font-weight":"500"},to:"/login"},{default:s(()=>e[4]||(e[4]=[i(" 返回登入 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})])}}},H=x(j,[["__scopeId","data-v-40eacf34"]]);export{H as default};
