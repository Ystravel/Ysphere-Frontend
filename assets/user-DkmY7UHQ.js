import{aX as fl,p as Ye,m as bl,a as yl,f as vt,g as Oe,l as ct,n as pt,_ as gt,aY as ft,x as y,o as $,s as Ha,z as le,aZ as bt,c as l,K as L,u as ze,ag as Ta,aQ as yt,a_ as Vt,a$ as ht,b0 as Vl,b1 as Dt,F as St,b2 as xt,ah as kt,b3 as It,v as Xa,X as wt,aS as hl,J as Ct,b4 as Pt,U as Me,H as ce,aJ as Nt,b5 as Ut,b6 as Rt,D as Dl,b7 as Et,b8 as $t,b9 as Bt,h as Tt,t as he,R as At,q as Mt,ba as tl,bb as Yt,a6 as E,a7 as j,a8 as s,af as Y,ao as ue,ad as N,an as W,ac as t,ap as Sl,ay as qa,a0 as xl,a5 as kl,ae as F,w as Ot,ai as Ea,ab as de,ax as k,a1 as zt,a2 as _t,P as Lt,aW as nl,A as sl,aw as Wt,as as ol,at as jt,am as va,bc as Ht,aj as Xt,av as ul,aa as rl,a9 as qt,aV as Ft}from"./index-R1CDHTsr.js";import{l as dl}from"./lodash-DHyxJ22h.js";import{c as il,a as h,d as Z,f as ja,g as ml,h as vl,u as Gt,b}from"./index.esm-Dzh4Ttco.js";import{u as oe,_ as Zt,E as Kt,a as Qt}from"./useROCDate-CYY1gwZi.js";import{C as Jt}from"./ConfirmDeleteDialogWithTextField-C0pawx1V.js";import{V as en}from"./VCombobox-MQQfSTOS.js";import{V as M,a as r}from"./VRow-B9QcEAf3.js";import{V as an}from"./VContainer-_64I5M5j.js";import{V as q,a as ln}from"./VDataTableServer-BLQ5q5AH.js";import{V as tn}from"./VForm-BaeEb70W.js";import{V as nn}from"./VTooltip-BCTsXbxs.js";import{V as Ra}from"./VDivider-CAHOZ7J8.js";import{V as sn}from"./VAutocomplete-BF2lxdgT.js";import{V as on}from"./VHover-DRg_T3KZ.js";import{T as cl}from"./index-B_nkBA4c.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VList-CE1H6dHN.js";import"./VCheckboxBtn-DHo-aZB5.js";const un=o=>{const{touchstartX:m,touchendX:i,touchstartY:u,touchendY:V}=o,p=.5,v=16;o.offsetX=i-m,o.offsetY=V-u,Math.abs(o.offsetY)<p*Math.abs(o.offsetX)&&(o.left&&i<m-v&&o.left(o),o.right&&i>m+v&&o.right(o)),Math.abs(o.offsetX)<p*Math.abs(o.offsetY)&&(o.up&&V<u-v&&o.up(o),o.down&&V>u+v&&o.down(o))};function rn(o,m){var u;const i=o.changedTouches[0];m.touchstartX=i.clientX,m.touchstartY=i.clientY,(u=m.start)==null||u.call(m,{originalEvent:o,...m})}function dn(o,m){var u;const i=o.changedTouches[0];m.touchendX=i.clientX,m.touchendY=i.clientY,(u=m.end)==null||u.call(m,{originalEvent:o,...m}),un(m)}function mn(o,m){var u;const i=o.changedTouches[0];m.touchmoveX=i.clientX,m.touchmoveY=i.clientY,(u=m.move)==null||u.call(m,{originalEvent:o,...m})}function vn(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const m={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:o.left,right:o.right,up:o.up,down:o.down,start:o.start,move:o.move,end:o.end};return{touchstart:i=>rn(i,m),touchend:i=>dn(i,m),touchmove:i=>mn(i,m)}}function cn(o,m){var I;const i=m.value,u=i!=null&&i.parent?o.parentElement:o,V=(i==null?void 0:i.options)??{passive:!0},p=(I=m.instance)==null?void 0:I.$.uid;if(!u||!p)return;const v=vn(m.value);u._touchHandlers=u._touchHandlers??Object.create(null),u._touchHandlers[p]=v,fl(v).forEach(w=>{u.addEventListener(w,v[w],V)})}function pn(o,m){var p,v;const i=(p=m.value)!=null&&p.parent?o.parentElement:o,u=(v=m.instance)==null?void 0:v.$.uid;if(!(i!=null&&i._touchHandlers)||!u)return;const V=i._touchHandlers[u];fl(V).forEach(I=>{i.removeEventListener(I,V[I])}),delete i._touchHandlers[u]}const Il={mounted:cn,unmounted:pn},wl=Symbol.for("vuetify:v-window"),Cl=Symbol.for("vuetify:v-window-group"),Pl=Ye({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:o=>typeof o=="boolean"||o==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...bl(),...yl(),...vt()},"VWindow"),pl=Oe()({name:"VWindow",directives:{Touch:Il},props:Pl(),emits:{"update:modelValue":o=>!0},setup(o,m){let{slots:i}=m;const{themeClasses:u}=ct(o),{isRtl:V}=pt(),{t:p}=gt(),v=ft(o,Cl),I=y(),w=$(()=>V.value?!o.reverse:o.reverse),P=Ha(!1),D=$(()=>{const B=o.direction==="vertical"?"y":"x",H=(w.value?!P.value:P.value)?"-reverse":"";return`v-window-${B}${H}-transition`}),c=Ha(0),d=y(void 0),C=$(()=>v.items.value.findIndex(B=>v.selected.value.includes(B.id)));le(C,(B,A)=>{const H=v.items.value.length,J=H-1;H<=2?P.value=B<A:B===J&&A===0?P.value=!0:B===0&&A===J?P.value=!1:P.value=B<A}),bt(wl,{transition:D,isReversed:P,transitionCount:c,transitionHeight:d,rootRef:I});const f=$(()=>o.continuous||C.value!==0),U=$(()=>o.continuous||C.value!==v.items.value.length-1);function x(){f.value&&v.prev()}function Q(){U.value&&v.next()}const te=$(()=>{const B=[],A={icon:V.value?o.nextIcon:o.prevIcon,class:`v-window__${w.value?"right":"left"}`,onClick:v.prev,"aria-label":p("$vuetify.carousel.prev")};B.push(f.value?i.prev?i.prev({props:A}):l(L,A,null):l("div",null,null));const H={icon:V.value?o.prevIcon:o.nextIcon,class:`v-window__${w.value?"left":"right"}`,onClick:v.next,"aria-label":p("$vuetify.carousel.next")};return B.push(U.value?i.next?i.next({props:H}):l(L,H,null):l("div",null,null)),B}),ne=$(()=>o.touch===!1?o.touch:{...{left:()=>{w.value?x():Q()},right:()=>{w.value?Q():x()},start:A=>{let{originalEvent:H}=A;H.stopPropagation()}},...o.touch===!0?{}:o.touch});return ze(()=>Ta(l(o.tag,{ref:I,class:["v-window",{"v-window--show-arrows-on-hover":o.showArrows==="hover"},u.value,o.class],style:o.style},{default:()=>{var B,A;return[l("div",{class:"v-window__container",style:{height:d.value}},[(B=i.default)==null?void 0:B.call(i,{group:v}),o.showArrows!==!1&&l("div",{class:"v-window__controls"},[te.value])]),(A=i.additional)==null?void 0:A.call(i,{group:v})]}}),[[yt("touch"),ne.value]])),{group:v}}}),Nl=Ye({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...bl(),...Vt(),...ht()},"VWindowItem"),gl=Oe()({name:"VWindowItem",directives:{Touch:Il},props:Nl(),emits:{"group:selected":o=>!0},setup(o,m){let{slots:i}=m;const u=Vl(wl),V=Dt(o,Cl),{isBooted:p}=St();if(!u||!V)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const v=Ha(!1),I=$(()=>p.value&&(u.isReversed.value?o.reverseTransition!==!1:o.transition!==!1));function w(){!v.value||!u||(v.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,u.transitionCount.value===0&&(u.transitionHeight.value=void 0)))}function P(){var f;v.value||!u||(v.value=!0,u.transitionCount.value===0&&(u.transitionHeight.value=Xa((f=u.rootRef.value)==null?void 0:f.clientHeight)),u.transitionCount.value+=1)}function D(){w()}function c(f){v.value&&wt(()=>{!I.value||!v.value||!u||(u.transitionHeight.value=Xa(f.clientHeight))})}const d=$(()=>{const f=u.isReversed.value?o.reverseTransition:o.transition;return I.value?{name:typeof f!="string"?u.transition.value:f,onBeforeEnter:P,onAfterEnter:w,onEnterCancelled:D,onBeforeLeave:P,onAfterLeave:w,onLeaveCancelled:D,onEnter:c}:!1}),{hasContent:C}=xt(o,V.isSelected);return ze(()=>l(It,{transition:d.value,disabled:!p.value},{default:()=>{var f;return[Ta(l("div",{class:["v-window-item",V.selectedClass.value,o.class],style:o.style},[C.value&&((f=i.default)==null?void 0:f.call(i))]),[[kt,V.isSelected.value]])]}})),{groupItem:V}}}),Fa=Symbol.for("vuetify:v-tabs"),gn=Ye({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...hl(Ct({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),$a=Oe()({name:"VTab",props:gn(),setup(o,m){let{slots:i,attrs:u}=m;const{textColorClasses:V,textColorStyles:p}=Pt(o,"sliderColor"),v=y(),I=y(),w=$(()=>o.direction==="horizontal"),P=$(()=>{var c,d;return((d=(c=v.value)==null?void 0:c.group)==null?void 0:d.isSelected.value)??!1});function D(c){var C,f;let{value:d}=c;if(d){const U=(f=(C=v.value)==null?void 0:C.$el.parentElement)==null?void 0:f.querySelector(".v-tab--selected .v-tab__slider"),x=I.value;if(!U||!x)return;const Q=getComputedStyle(U).color,te=U.getBoundingClientRect(),ne=x.getBoundingClientRect(),B=w.value?"x":"y",A=w.value?"X":"Y",H=w.value?"right":"bottom",J=w.value?"width":"height",Aa=te[B],De=ne[B],ee=Aa>De?te[H]-ne[H]:te[B]-ne[B],Se=Math.sign(ee)>0?w.value?"right":"bottom":Math.sign(ee)<0?w.value?"left":"top":"center",xe=(Math.abs(ee)+(Math.sign(ee)<0?te[J]:ne[J]))/Math.max(te[J],ne[J])||0,ke=te[J]/ne[J]||0,pe=1.5;Ut(x,{backgroundColor:[Q,"currentcolor"],transform:[`translate${A}(${ee}px) scale${A}(${ke})`,`translate${A}(${ee/pe}px) scale${A}(${(xe-1)/pe+1})`,"none"],transformOrigin:Array(3).fill(Se)},{duration:225,easing:Rt})}}return ze(()=>{const c=L.filterProps(o);return l(L,ce({symbol:Fa,ref:v,class:["v-tab",o.class],style:o.style,tabindex:P.value?0:-1,role:"tab","aria-selected":String(P.value),active:!1},c,u,{block:o.fixed,maxWidth:o.fixed?300:void 0,"onGroup:selected":D}),{...i,default:()=>{var d;return l(Me,null,[((d=i.default)==null?void 0:d.call(i))??o.text,!o.hideSlider&&l("div",{ref:I,class:["v-tab__slider",V.value],style:p.value},null)])}})}),Nt({},v)}}),fn=Ye({...hl(Pl(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ul=Oe()({name:"VTabsWindow",props:fn(),emits:{"update:modelValue":o=>!0},setup(o,m){let{slots:i}=m;const u=Vl(Fa,null),V=Dl(o,"modelValue"),p=$({get(){var v;return V.value!=null||!u?V.value:(v=u.items.value.find(I=>u.selected.value.includes(I.id)))==null?void 0:v.value},set(v){V.value=v}});return ze(()=>{const v=pl.filterProps(o);return l(pl,ce({_as:"VTabsWindow"},v,{modelValue:p.value,"onUpdate:modelValue":I=>p.value=I,class:["v-tabs-window",o.class],style:o.style,mandatory:!1,touch:!1}),i)}),{}}}),bn=Ye({...Nl()},"VTabsWindowItem"),Ba=Oe()({name:"VTabsWindowItem",props:bn(),setup(o,m){let{slots:i}=m;return ze(()=>{const u=gl.filterProps(o);return l(gl,ce({_as:"VTabsWindowItem"},u,{class:["v-tabs-window-item",o.class],style:o.style}),i)}),{}}});function yn(o){return o?o.map(m=>Yt(m)?m:{text:m,value:m}):[]}const Vn=Ye({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Et({mandatory:"force",selectedClass:"v-tab-item--selected"}),...$t(),...yl()},"VTabs"),hn=Oe()({name:"VTabs",props:Vn(),emits:{"update:modelValue":o=>!0},setup(o,m){let{attrs:i,slots:u}=m;const V=Dl(o,"modelValue"),p=$(()=>yn(o.items)),{densityClasses:v}=Bt(o),{backgroundColorClasses:I,backgroundColorStyles:w}=Tt(he(o,"bgColor")),{scopeId:P}=At();return Mt({VTab:{color:he(o,"color"),direction:he(o,"direction"),stacked:he(o,"stacked"),fixed:he(o,"fixedTabs"),sliderColor:he(o,"sliderColor"),hideSlider:he(o,"hideSlider")}}),ze(()=>{const D=tl.filterProps(o),c=!!(u.window||o.items.length>0);return l(Me,null,[l(tl,ce(D,{modelValue:V.value,"onUpdate:modelValue":d=>V.value=d,class:["v-tabs",`v-tabs--${o.direction}`,`v-tabs--align-tabs-${o.alignTabs}`,{"v-tabs--fixed-tabs":o.fixedTabs,"v-tabs--grow":o.grow,"v-tabs--stacked":o.stacked},v.value,I.value,o.class],style:[{"--v-tabs-height":Xa(o.height)},w.value,o.style],role:"tablist",symbol:Fa},P,i),{default:()=>{var d;return[((d=u.default)==null?void 0:d.call(u))??p.value.map(C=>{var f;return((f=u.tab)==null?void 0:f.call(u,{item:C}))??l($a,ce(C,{key:C.text,value:C.value}),{default:u[`tab.${C.value}`]?()=>{var U;return(U=u[`tab.${C.value}`])==null?void 0:U.call(u,{item:C})}:void 0})})]}}),c&&l(Ul,ce({modelValue:V.value,"onUpdate:modelValue":d=>V.value=d,key:"tabs-window"},P),{default:()=>{var d;return[p.value.map(C=>{var f;return((f=u.item)==null?void 0:f.call(u,{item:C}))??l(Ba,{value:C.value},{default:()=>{var U;return(U=u[`item.${C.value}`])==null?void 0:U.call(u,{item:C})}})}),(d=u.window)==null?void 0:d.call(u)]}})])}),{}}}),K={0:"無",1:"華語導遊",2:"外語導遊",3:"華語領隊",4:"外語領隊"},Dn={class:"d-flex align-center flex-wrap"},Sn={__name:"GuideLicenseSelection",props:{modelValue:{type:Array,default:()=>[]},errorMessages:{type:[String,Array],default:""}},emits:["update:modelValue"],setup(o,{emit:m}){const i=o,u=m,V=Object.entries(K).filter(([D])=>D!=="0").map(([D,c])=>({value:Number(D),title:c})),p=y(i.modelValue.length===0||i.modelValue.length===1&&i.modelValue[0]===0?[{value:0,title:K[0]}]:i.modelValue.filter(D=>D!==0).map(D=>({value:D,title:K[D]}))),v=$(()=>p.value.length===1&&p.value[0].value===0),I=D=>{if(!D||D.length===0){p.value=[{value:0,title:K[0]}],u("update:modelValue",[0]);return}const c=D.filter(d=>d&&(typeof d.value=="number"||typeof d=="number")).map(d=>typeof d=="number"?d:d.value).filter(d=>d!==0);c.length===0?(p.value=[{value:0,title:K[0]}],u("update:modelValue",[0])):(p.value=c.map(d=>({value:d,title:K[d]})),u("update:modelValue",c))},w=()=>{p.value=[{value:0,title:K[0]}],u("update:modelValue",[0])},P=D=>{const c=p.value.filter(d=>d.value!==D.value);c.length===0?(p.value=[{value:0,title:K[0]}],u("update:modelValue",[0])):(p.value=c,u("update:modelValue",c.map(d=>d.value)))};return le(()=>i.modelValue,D=>{D.length===0||D.length===1&&D[0]===0?p.value=[{value:0,title:K[0]}]:p.value=D.filter(c=>c!==0).map(c=>({value:c,title:K[c]}))},{deep:!0}),(D,c)=>(E(),j(en,{modelValue:p.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>p.value=d),I],items:t(V),label:"導遊領隊證",variant:"outlined",density:"compact","error-messages":i.errorMessages,multiple:"",chips:!v.value,clearable:"","onClick:clear":w},{selection:s(()=>[Y("div",Dn,[v.value?(E(),ue(Me,{key:0},[N(W(t(K)[0]),1)],64)):(E(!0),ue(Me,{key:1},Sl(p.value,d=>(E(),j(qa,{key:d.value,class:"ma-1",closable:"",size:"small","onClick:close":C=>P(d)},{default:s(()=>[N(W(t(K)[d.value]),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1},8,["modelValue","items","error-messages","chips"]))}},xn={class:"d-flex justify-space-between align-center mb-4"},kn={class:"d-flex justify-space-between align-center mb-4 mt-2"},In={__name:"DependentInsurance",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(o,{emit:m}){const{convertToROCDate:i}=oe(),u=o,V=m,p=y(u.modelValue),v=y({}),I=(c,d)=>{var U;const C=`${c}-${d}`;if(!v.value[C])return"";const f=p.value[c];if(d==="dependentName"&&!((U=f.dependentName)!=null&&U.trim()))return"請輸入受保人姓名";if(d==="dependentIDNumber"){const x=/^[A-Za-z][12]\d{8}$/,Q=f.dependentIDNumber;if(!(Q!=null&&Q.trim()))return"請輸入身分證號碼";if(!x.test(Q))return"身分證號碼格式錯誤"}return d==="dependentBirthDate"&&!f.dependentBirthDate?"請選擇出生日期":""},w=()=>{p.value.length<4&&p.value.push({dependentName:"",dependentIDNumber:"",dependentRelationship:"",dependentBirthDate:null,dependentInsuranceStartDate:null,dependentInsuranceEndDate:null})},P=c=>{p.value.splice(c,1),Object.keys(v.value).forEach(d=>{d.startsWith(`${c}-`)&&delete v.value[d]})},D=(c,d)=>{v.value[`${c}-${d}`]=!0};return le(()=>u.modelValue,c=>{p.value=c},{deep:!0}),le(p,c=>{V("update:modelValue",c)},{deep:!0}),(c,d)=>{const C=kl("v-date-input");return E(),j(r,{cols:"12",class:"px-0"},{default:s(()=>[Y("div",xn,[d[1]||(d[1]=Y("h4",{class:"text-blue-grey-darken-2 ms-1"}," 眷屬加保資料 ",-1)),p.value.length<4?(E(),j(L,{key:0,color:"blue-grey-darken-2",variant:"outlined",size:"small","prepend-icon":"mdi-account-plus",onClick:w},{default:s(()=>d[0]||(d[0]=[N(" 新增眷屬 ")])),_:1})):F("",!0)]),l(Ot,{group:""},{default:s(()=>[(E(!0),ue(Me,null,Sl(p.value,(f,U)=>(E(),j(Ea,{key:U,class:"px-4 mb-3",variant:"outlined"},{default:s(()=>[Y("div",kn,[Y("h5",null,"眷屬 "+W(U+1),1),l(L,{icon:"",color:"red-lighten-1",variant:"plain",size:"small",onClick:x=>P(U)},{default:s(()=>[l(de,null,{default:s(()=>d[2]||(d[2]=[N("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),l(M,{class:"mb-2"},{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(k,{modelValue:f.dependentName,"onUpdate:modelValue":x=>f.dependentName=x,"error-messages":I(U,"dependentName"),label:"*眷屬姓名",variant:"outlined",density:"compact",clearable:"",onBlur:x=>D(U,"dependentName")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(k,{modelValue:f.dependentIDNumber,"onUpdate:modelValue":x=>f.dependentIDNumber=x,"error-messages":I(U,"dependentIDNumber"),label:"*眷屬身分證號",variant:"outlined",density:"compact",clearable:"",maxlength:"10",onBlur:x=>D(U,"dependentIDNumber")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(C,{modelValue:f.dependentBirthDate,"onUpdate:modelValue":x=>f.dependentBirthDate=x,"error-messages":I(U,"dependentBirthDate"),label:"*眷屬生日","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentBirthDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認",onBlur:x=>D(U,"dependentBirthDate"),"onClick:clear":x=>f.dependentBirthDate=null},null,8,["modelValue","onUpdate:modelValue","error-messages","hint","onBlur","onClick:clear"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(k,{modelValue:f.dependentRelationship,"onUpdate:modelValue":x=>f.dependentRelationship=x,label:"眷屬關係",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(C,{modelValue:f.dependentInsuranceStartDate,"onUpdate:modelValue":x=>f.dependentInsuranceStartDate=x,label:"加保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentInsuranceStartDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":x=>f.dependentInsuranceStartDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(C,{modelValue:f.dependentInsuranceEndDate,"onUpdate:modelValue":x=>f.dependentInsuranceEndDate=x,label:"退保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:t(i)(f.dependentInsuranceEndDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":x=>f.dependentInsuranceEndDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},wn=xl(In,[["__scopeId","data-v-d20631a1"]]),Cn={class:"d-flex flex-column gap-2"},Pn={key:0},Nn={key:1},Un={key:2},Rn={key:3},En={key:4},$n={key:5},Bn={class:"d-flex align-center overflow-hidden h-25"},Tn={class:"list-content ps-4 py-3 mb-4"},An={style:{"font-weight":"800"},class:"text-cyan-darken-2"},Mn={class:"card-title ps-4 py-3"},Yn={class:"mb-4"},On={__name:"user",setup(o){const{apiAuth:m}=jt(),i=zt(),u=_t(),{smAndUp:V,mdAndUp:p,lgAndUp:v,xlAndUp:I,name:w}=Lt(),P=$(()=>V.value?"default":"small"),D=$(()=>V.value?"64":"default"),c=y(!1),d=y(null),C=y(1),f=y(!1),U={class:"header-bg"},x=y([]),Q=$(()=>{const a={};return(x.value||[]).forEach((g,R)=>{var T,z;(T=g.dependentName)!=null&&T.trim()||(a[`dependentInsurance.${R}.dependentName`]="請輸入受保人姓名"),(z=g.dependentIDNumber)!=null&&z.trim()||(a[`dependentInsurance.${R}.dependentIDNumber`]="請輸入身分證號碼"),g.dependentBirthDate||(a[`dependentInsurance.${R}.dependentBirthDate`]="請選擇出生日期")}),a}),te=y([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),ne=[{title:"否",value:!1},{title:"是",value:!0}],B=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],A=[{title:"否",value:!1},{title:"是",value:!0}],H=[{title:"1%",value:1},{title:"2%",value:2},{title:"3%",value:3},{title:"4%",value:4},{title:"5%",value:5},{title:"6%",value:6}],J=[{code:"008",name:"華南商業銀行"},{code:"004",name:"臺灣銀行"},{code:"005",name:"台灣土地銀行"},{code:"006",name:"合作金庫銀行"},{code:"007",name:"第一商業銀行"},{code:"009",name:"彰化商業銀行"},{code:"010",name:"花旗(台灣)(原華僑銀行)"},{code:"011",name:"上海商業銀行"},{code:"012",name:"台北富邦銀行"},{code:"013",name:"國泰世華商業銀行"},{code:"016",name:"高雄銀行"},{code:"017",name:"兆豐國際商業銀行"},{code:"021",name:"花旗銀行"},{code:"024",name:"美國運通銀行"},{code:"025",name:"首都銀行"},{code:"039",name:"荷蘭銀行"},{code:"040",name:"中華開發"},{code:"050",name:"台灣中小企業銀行"},{code:"052",name:"渣打國際商銀(原新竹商銀)"},{code:"053",name:"台中商業銀行"},{code:"054",name:"京城商銀"},{code:"057",name:"台東區中小企業銀行"},{code:"072",name:"德意志銀行"},{code:"073",name:"東亞銀行"},{code:"081",name:"匯豐銀行"},{code:"101",name:"稻江商銀"},{code:"102",name:"華泰商業銀行"},{code:"103",name:"新光商業銀行"},{code:"108",name:"陽信商業銀行"},{code:"118",name:"板信商業銀行"},{code:"147",name:"三信商業銀行"},{code:"700",name:"中華郵政"},{code:"803",name:"聯邦商業銀行"},{code:"805",name:"遠東商業銀行"},{code:"806",name:"元大銀行"},{code:"807",name:"永豐銀行"},{code:"808",name:"玉山商業銀行"},{code:"809",name:"萬泰商業銀行"},{code:"810",name:"星展銀行"},{code:"812",name:"台新國際商業銀行"},{code:"815",name:"日盛國際商業銀行"},{code:"816",name:"安泰商業銀行"},{code:"822",name:"中國信託商業銀行"}],Aa=$(()=>J.map(a=>({title:`(${a.code}) ${a.name}`,value:a.code}))),De=y("basic"),ee=y(!1),Se=y(!1),_e=y(!1),xe=y(!1),ke=y(!1),pe=y(!1),ca=y(!1),Ma=y(null),pa=y(""),Ya=y(!1),Le=y(!1),ae=y({open:!1,id:""}),Oa=y(null),Ga=y(null),se=y({open:!1,userId:"",userName:"",loading:!1}),G=y(null),_=y([]),Rl=y([]),Za=y(Object.entries(nl).map(([a,e])=>({value:Number(a),title:e}))),El=$(()=>[...ga.value].sort((a,e)=>{const g=a.companyId||"",R=e.companyId||"";return g.localeCompare(R)}).map(a=>({title:`${a.name}`,value:a._id}))),ga=y([]),$l=$(()=>[{title:"全部",value:""},...[...ga.value].sort((a,e)=>{const g=a.companyId||"",R=e.companyId||"";return g.localeCompare(R)}).map(a=>({title:a.name,value:a._id}))]),Ka=y([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),Bl=y([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),Tl=$(()=>I.value?"1280":v.value?"1080":p.value?"800":V.value?"600":"100%"),Al=il({dependentName:h().required("請輸入受保人姓名"),dependentRelationship:h(),dependentBirthDate:Z().nullable().required("請輸入受保人生日"),dependentIDNumber:h().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入受保人身分證號碼"),dependentInsuranceStartDate:Z().nullable(),dependentInsuranceEndDate:Z().nullable()}),Ml=il({email:h().email("請輸入正確的 email 格式"),personalEmail:h().email("請輸入正確的 email 格式").nullable(),IDNumber:h().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入身分證號碼"),gender:h().required("請選擇姓別"),name:h().required("請輸入姓名"),englishName:h().nullable(),phoneNumber:h().nullable(),cellphone:h().min(10,"手機號碼需為10位數字").max(10,"手機號碼勿超過10位數字").nullable(),salary:h().nullable(),extNumber:h().nullable(),printNumber:h().nullable(),birthDate:Z().nullable().required("請選擇生日"),permanentAddress:h().required("請輸入戶籍地址"),contactAddress:h().required("請輸入聯絡地址"),company:h().nullable().required("請選擇公司"),department:h().required("請選擇部門"),jobTitle:h().nullable(),role:ja().required("請選擇使用者身分別"),cowellAccount:h().nullable(),cowellPassword:h().nullable(),userId:h(),employmentStatus:h().required("請選擇任職狀態"),hireDate:Z().required("請選擇入職日期"),resignationDate:Z().nullable(),emergencyName:h().nullable(),emergencyPhoneNumber:h().nullable(),emergencyCellphone:h().nullable(),emergencyRelationship:h().nullable(),note:h().nullable(),healthInsuranceStartDate:Z().nullable(),healthInsuranceEndDate:Z().nullable(),laborInsuranceStartDate:Z().nullable(),laborInsuranceEndDate:Z().nullable(),salaryBank:h().nullable(),salaryBankBranch:h().nullable(),salaryAccountNumber:h().nullable(),guideLicense:ml().of(ja().oneOf([0,1,2,3,4],"導遊證類型必須是 0, 1, 2, 3,4 之一")).default([]),tourManager:vl(),YSRCAccount:h().nullable(),YSRCPassword:h().nullable(),YS168Account:h().nullable(),YS168Password:h().nullable(),disabilityStatus:h().nullable(),indigenousStatus:vl().nullable(),voluntaryPensionRate:ja().nullable().transform((a,e)=>e===""?null:a),voluntaryPensionStartDate:Z().nullable(),voluntaryPensionEndDate:Z().nullable(),dependentInsurance:ml().of(Al).default([])}),{handleSubmit:Yl,isSubmitting:za,resetForm:Qa}=Gt({validationSchema:Ml,initialValues:{email:"",personalEmail:"",IDNumber:"",gender:"",name:"",englishName:"",phoneNumber:"",cellphone:"",salary:"",extNumber:"",printNumber:"",birthDate:null,permanentAddress:"",contactAddress:"",company:1,department:"",jobTitle:"",role:0,cowellAccount:"",cowellPassword:"",userId:"",employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyPhoneNumber:"",emergencyCellphone:"",emergencyRelationship:"",note:"",healthInsuranceStartDate:null,healthInsuranceEndDate:null,laborInsuranceStartDate:null,laborInsuranceEndDate:null,salaryBank:"008",salaryBankBranch:"",salaryAccountNumber:"",guideLicense:[],tourManager:!1,YSRCAccount:"",YSRCPassword:"",YS168Account:"",YS168Password:"",disabilityStatus:"否",indigenousStatus:!1,voluntaryPensionRate:null,voluntaryPensionStartDate:null,voluntaryPensionEndDate:null,dependentInsurance:[]},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:$(()=>({isEditing:c.value}))}),We=b("email"),je=b("personalEmail"),Ie=b("IDNumber"),ie=b("gender"),He=b("name"),Xe=b("englishName"),fa=b("phoneNumber"),qe=b("cellphone"),Fe=b("salary"),Ge=b("extNumber"),Ze=b("printNumber"),ge=b("birthDate"),fe=b("permanentAddress"),we=b("contactAddress"),Ke=b("company"),be=b("department",void 0,{validateOnValueUpdate:!1}),Qe=b("jobTitle"),Je=b("role"),ea=b("cowellAccount"),aa=b("cowellPassword"),la=b("userId",void 0,{validateOnValueUpdate:!1,transform:a=>a??""}),ye=b("employmentStatus"),me=b("hireDate"),re=b("resignationDate"),ta=b("emergencyName"),ba=b("emergencyPhoneNumber"),na=b("emergencyCellphone"),sa=b("emergencyRelationship",void 0,{validateOnValueUpdate:!1,transform:a=>a??""}),oa=b("note",void 0,{validateOnValueUpdate:!1,transform:a=>a??""}),Ce=b("healthInsuranceStartDate"),Pe=b("healthInsuranceEndDate"),Ne=b("laborInsuranceStartDate"),Ue=b("laborInsuranceEndDate"),ya=b("salaryBank"),Va=b("salaryBankBranch"),ha=b("salaryAccountNumber"),ua=b("guideLicense"),Da=b("tourManager"),Sa=b("YSRCAccount"),xa=b("YSRCPassword"),ka=b("YS168Account"),Ia=b("YS168Password"),wa=b("disabilityStatus"),Ca=b("indigenousStatus"),Pa=b("voluntaryPensionRate"),Re=b("voluntaryPensionStartDate"),Ee=b("voluntaryPensionEndDate"),Ol=b("dependentInsurance"),{rocDate:zl}=oe(ge),{rocDate:_l}=oe(me),{rocDate:Ll}=oe(re),{rocDate:Wl}=oe(Ce),{rocDate:jl}=oe(Pe),{rocDate:Hl}=oe(Ne),{rocDate:Xl}=oe(Ue),{rocDate:ql}=oe(Re),{rocDate:Fl}=oe(Ee),Na=y(10),Ua=y([{key:"userId",order:"asc"}]),X=y(1),$e=y([]),_a=y(0),ra=[{title:"員編",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],Be=y(!0),La=y(0),Ja=y(""),S=y({role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]}),da=y(""),Gl=a=>nl[a]||"未知",O=a=>a?new Date(a):null,Zl=$(()=>i.isSuperAdmin||i.isHR||i.isAdmin),Kl=$(()=>["xl","xxl"].includes(w.value)?ra:["lg"].includes(w.value)?ra.filter(a=>a.key!=="employmentStatus"):["md"].includes(w.value)?ra.filter(a=>a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"):["sm"].includes(w.value)?ra.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"):ra.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="role"&&a.key!=="employmentStatus")),Ql=async()=>{try{const{data:a}=await m.get("/department/all");Rl.value=a.result}catch(a){console.error("加載部門失敗",a),u({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},Jl=async()=>{try{const{data:a}=await m.get("/company/all");a.success&&(ga.value=a.result)}catch(a){console.error("載入公司列表失敗:",a),u({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},et=async()=>{if(!S.value.companyId){_.value=[];return}try{const{data:a}=await m.get("/department/all",{params:{companyId:S.value.companyId}});a.success?_.value=a.result||[]:(console.warn("找不到該公司的部門"),_.value=[])}catch(a){console.error("載入部門失敗:",a),u({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),_.value=[]}},Ve=async(a,e)=>{a?X.value=1:e&&(X.value=e),await ia()},ia=async()=>{var a,e,g,R;Be.value=!0,console.log("Selected date range:",S.value.dateRange);try{const T={page:X.value,itemsPerPage:Na.value,sortBy:((a=Ua.value[0])==null?void 0:a.key)||"userId",sortOrder:((e=Ua.value[0])==null?void 0:e.order)||"asc",quickSearch:da.value,...S.value,department:S.value.department};S.value.dateType&&S.value.dateRange&&S.value.dateRange.length>0&&(T.dateType=S.value.dateType,T.startDate=S.value.dateRange[0].toISOString(),T.endDate=S.value.dateRange[S.value.dateRange.length-1].toISOString()),console.log("Query params:",T);const{data:z}=await m.get("/user/search",{params:T});z.success&&($e.value=z.result.data,La.value=z.result.totalItems)}catch(T){console.error("搜索失败:",T),u({text:((R=(g=T==null?void 0:T.response)==null?void 0:g.data)==null?void 0:R.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{Be.value=!1}},at=async()=>{var a,e;try{se.value.loading=!0,await m.post(`/user/${se.value.userId}/send-initial-password`);const g=$e.value.findIndex(R=>R._id===se.value.userId);g!==-1&&($e.value[g].isFirstLogin=!1),u({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),al()}catch(g){console.error("發送初始密碼失敗:",g),u({text:((e=(a=g==null?void 0:g.response)==null?void 0:a.data)==null?void 0:e.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{se.value.loading=!1}},lt=Yl(async a=>{var e,g,R,T;try{if(c.value){const z=X.value,n={...a,company:G.value,healthInsuranceStartDate:a.healthInsuranceStartDate||null,healthInsuranceEndDate:a.healthInsuranceEndDate||null,laborInsuranceStartDate:a.laborInsuranceStartDate||null,laborInsuranceEndDate:a.laborInsuranceEndDate||null,voluntaryPensionStartDate:a.voluntaryPensionStartDate||null,voluntaryPensionEndDate:a.voluntaryPensionEndDate||null,birthDate:a.birthDate||null,hireDate:a.hireDate||null,resignationDate:a.resignationDate||null},{data:Te}=await m.patch(`/user/${ae.value.id}`,n),Ae=$e.value.findIndex(ve=>ve._id===ae.value.id);Ae!==-1&&($e.value[Ae]={...Te.result,company:ga.value.find(ve=>ve._id===G.value),department:{_id:a.department,name:((e=_.value.find(ve=>ve._id===a.department))==null?void 0:e.name)||""}}),await Ve(!1,z)}else await m.post("/user",{...a,company:G.value}),await Ve(!0);await Promise.all([(g=Ma.value)==null?void 0:g.refreshChart(),(R=Oa.value)==null?void 0:R.refreshChart(),(T=Ga.value)==null?void 0:T.refreshData()]),u({text:c.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),Wa()}catch(z){const n=tt(z);u({text:n,snackbarProps:{color:"red-lighten-1"}})}}),tt=a=>a.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[a.response.data.message]||a.response.data.message:"發生錯誤",el=async a=>{var e,g;if(Le.value=!0,!Zl.value){u({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}Le.value=!0,Ya.value=!0,C.value=X.value,ae.value.open=!0,a?(c.value=!0,ae.value.id=a._id,a.company&&(G.value=a.company._id,Ke.value.value=a.company._id,await ma(a.company._id),a.department&&a.department._id&&(be.value.value=a.department._id)),We.value.value=a.email,je.value.value=a.personalEmail,He.value.value=a.name,Xe.value.value=a.englishName,ie.value.value=a.gender,Ie.value.value=a.IDNumber,fa.value.value=a.phoneNumber,qe.value.value=a.cellphone,ge.value.value=O(a.birthDate),fe.value.value=a.permanentAddress,we.value.value=a.contactAddress,ta.value.value=a.emergencyName,ba.value.value=a.emergencyPhoneNumber,na.value.value=a.emergencyCellphone,sa.value.value=a.emergencyRelationship??"",la.value.value=a.userId??"",Qe.value.value=a.jobTitle,Fe.value.value=a.salary,Je.value.value=a.role,Ge.value.value=a.extNumber,Ze.value.value=a.printNumber,ye.value.value=a.employmentStatus,me.value.value=O(a.hireDate),re.value.value=O(a.resignationDate),oa.value.value=a.note??"",ea.value.value=a.cowellAccount,aa.value.value=a.cowellPassword,Sa.value.value=a.YSRCAccount,xa.value.value=a.YSRCPassword,ka.value.value=a.YS168Account,Ia.value.value=a.YS168Password,ua.value.value=a.guideLicense,Da.value.value=a.tourManager,wa.value.value=a.disabilityStatus,Ca.value.value=a.indigenousStatus,Ce.value.value=O(a.healthInsuranceStartDate),Pe.value.value=O(a.healthInsuranceEndDate),Ne.value.value=O(a.laborInsuranceStartDate),Ue.value.value=O(a.laborInsuranceEndDate),Pa.value.value=a.voluntaryPensionRate,Re.value.value=O(a.voluntaryPensionStartDate),Ee.value.value=O(a.voluntaryPensionEndDate),ya.value.value=a.salaryBank,Va.value.value=a.salaryBankBranch,ha.value.value=a.salaryAccountNumber,Ol.value.value=a.dependentInsurance||[],d.value={email:a.email,personalEmail:a.personalEmail,name:a.name,englishName:a.englishName,gender:a.gender,IDNumber:a.IDNumber,phoneNumber:a.phoneNumber,cellphone:a.cellphone,birthDate:O(a.birthDate),permanentAddress:a.permanentAddress,contactAddress:a.contactAddress,emergencyName:a.emergencyName,emergencyPhoneNumber:a.emergencyPhoneNumber,emergencyCellphone:a.emergencyCellphone,emergencyRelationship:a.emergencyRelationship??"",company:(e=a.company)==null?void 0:e._id,department:(g=a.department)==null?void 0:g._id,userId:a.userId??"",jobTitle:a.jobTitle,salary:a.salary,role:a.role,extNumber:a.extNumber,printNumber:a.printNumber,employmentStatus:a.employmentStatus,hireDate:O(a.hireDate),resignationDate:O(a.resignationDate),note:a.note??"",cowellAccount:a.cowellAccount,cowellPassword:a.cowellPassword,YSRCAccount:a.YSRCAccount,YSRCPassword:a.YSRCPassword,YS168Account:a.YS168Account,YS168Password:a.YS168Password,guideLicense:a.guideLicense,tourManager:a.tourManager,disabilityStatus:a.disabilityStatus,indigenousStatus:a.indigenousStatus,healthInsuranceStartDate:O(a.healthInsuranceStartDate),healthInsuranceEndDate:O(a.healthInsuranceEndDate),laborInsuranceStartDate:O(a.laborInsuranceStartDate),laborInsuranceEndDate:O(a.laborInsuranceEndDate),voluntaryPensionRate:a.voluntaryPensionRate,voluntaryPensionStartDate:O(a.voluntaryPensionStartDate),voluntaryPensionEndDate:O(a.voluntaryPensionEndDate),salaryBank:a.salaryBank,salaryBankBranch:a.salaryBankBranch,salaryAccountNumber:a.salaryAccountNumber,dependentInsurance:a.dependentInsurance||[]},localStorage.setItem("userTablePage",X.value.toString())):(c.value=!1,ae.value.id="",d.value=null,G.value=null,_.value=[],Qa(),me.value.value=new Date),setTimeout(()=>{Le.value=!1,Ya.value=!1},300)},Wa=()=>{ae.value.open=!1,G.value=null,_.value=[],d.value=null,Qa()},nt=a=>{se.value={open:!0,userId:a._id,userName:a.name,loading:!1}},al=()=>{se.value={open:!1,userId:"",userName:"",loading:!1}},st=async()=>{var a,e,g,R,T;try{Be.value=!0,await m.delete(`/user/${ae.value.id}`),Wa(),await Ve(!0),await((a=Ma.value)==null?void 0:a.refreshChart()),await((e=Oa.value)==null?void 0:e.refreshChart()),await((g=Ga.value)==null?void 0:g.refreshData()),u({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(z){console.error("Delete user error:",z),u({text:((T=(R=z==null?void 0:z.response)==null?void 0:R.data)==null?void 0:T.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{Be.value=!1,f.value=!1}},ot=()=>{fe.value.value&&(we.value.value=fe.value.value)},ut=a=>{a<1&&(a=1);const e=Math.ceil(La.value/Na.value);a>e&&(a=e),X.value!==a&&(X.value=a,localStorage.removeItem("userTablePage"),Ve(!1))},rt=()=>{S.value={role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[]},_.value=[],Ja.value="",da.value="",X.value=1,ia()},dt=$(()=>{if(!c.value)return!0;if(!d.value)return!1;const a={email:We.value.value,personalEmail:je.value.value,name:He.value.value,englishName:Xe.value.value,gender:ie.value.value,IDNumber:Ie.value.value,permanentAddress:fe.value.value,contactAddress:we.value.value,birthDate:ge.value.value,company:G.value,department:be.value.value,cellphone:qe.value.value,salary:Fe.value.value,extNumber:Ge.value.value,printNumber:Ze.value.value,guideLicense:ua.value.value,jobTitle:Qe.value.value,role:Je.value.value,employmentStatus:ye.value.value,hireDate:me.value.value,resignationDate:re.value.value,emergencyName:ta.value.value,emergencyCellphone:na.value.value,emergencyRelationship:sa.value.value??"",note:oa.value.value??"",userId:la.value.value??"",cowellAccount:ea.value,cowellPassword:aa.value};return Object.keys(d.value).some(e=>{if(["note","emergencyRelationship"].includes(e)){const g=d.value[e]??"",R=a[e]??"";return g!==R}if(e==="birthDate"||e==="hireDate"||e==="resignationDate"){const g=d.value[e]?new Date(d.value[e]).toISOString():null,R=a[e]?new Date(a[e]).toISOString():null;return g!==R}return d.value[e]!==a[e]})}),ma=async a=>{var e;try{if(ae.value.open?G.value=a:S.value={...S.value,companyId:a,department:""},!a){_.value=[];return}console.log("正在載入公司ID的部門:",a);const{data:g}=await m.get("/department/all",{params:{companyId:a,itemsPerPage:100}});console.log("API 返回的部門數據:",g),g.success?(_.value=((e=g.result)==null?void 0:e.data)||[],console.log("設置過濾後的部門列表:",_.value)):(console.warn("找不到該公司的部門"),_.value=[])}catch(g){console.error("載入部門失敗:",g),u({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),_.value=[]}},it=dl.debounce(a=>{Ve(!0)},300),ll=dl.debounce(a=>{X.value=1,ia()},300);return le(da,a=>{ll(a)}),le(G,async a=>{a!=null?(Ke.value.value=a,be.value.value="",await ma(a)):(Ke.value.value=null,be.value.value="",_.value=[])}),le(()=>S.value.companyId,async a=>{a?await ma(a):_.value=[]}),le(()=>S.value.dateRange,a=>{console.log("選擇的日期區間:",a)}),le(Ke.value,a=>{a&&a.value!==null&&a.value!==void 0&&(G.value=a.value)}),le(ye.value,a=>{Le.value||(a==="離職"?ca.value=!0:(ca.value=!1,re.value.value=null))}),le(()=>Ie.value.value,a=>{if(!a){ie.value.value=null,pa.value="";return}if(a.length===10&&a!==pa.value&&!Ya.value&&/^[A-Za-z][12]\d{8}$/.test(a)){const g=a.charAt(1);g==="1"?(ie.value.value="男性",pa.value=a,u({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):g==="2"&&(ie.value.value="女性",pa.value=a,u({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),sl(async()=>{const a=localStorage.getItem("userTablePage");a&&(X.value=parseInt(a),_a.value++),await Jl(),await Ql(),await et(),await ia()}),sl(()=>{const a=localStorage.getItem("userTablePage");a&&parseInt(a)>0?(X.value=parseInt(a),_a.value++,localStorage.removeItem("userTablePage")):X.value=1}),Wt(()=>{it.cancel(),ll.cancel()}),(a,e)=>{var R,T,z;const g=kl("v-date-input");return E(),ue(Me,null,[l(an,{"max-width":"2500"},{default:s(()=>[l(M,{class:"rounded-xl py-0 mt-2 ma-sm-1 ma-md-6"},{default:s(()=>[t(I)?(E(),j(r,{key:0,class:"ps-4 py-0"},{default:s(()=>[l(Kt,{ref_key:"chartRef",ref:Ma},null,512)]),_:1})):F("",!0),t(p)?(E(),j(r,{key:1,class:"ps-4 py-0"},{default:s(()=>[l(Qt,{ref_key:"turnoverChartRef",ref:Oa},null,512)]),_:1})):F("",!0),l(r,{class:"pa-0 mb-6 mb-sm-0"},{default:s(()=>[l(Ea,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-5 pb-4 pb-sm-5",elevation:"4",rounded:"xl",height:"100%"},{default:s(()=>[l(va,{class:"d-flex align-center"},{default:s(()=>[l(M,{class:"h-100"},{default:s(()=>[l(r,{cols:"12",class:"d-flex flex-column justify-center"},{default:s(()=>[l(M,null,{default:s(()=>e[86]||(e[86]=[Y("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),l(M,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(q,{modelValue:S.value.companyId,"onUpdate:modelValue":[e[0]||(e[0]=n=>S.value.companyId=n),ma],items:$l.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(q,{modelValue:S.value.department,"onUpdate:modelValue":e[1]||(e[1]=n=>S.value.department=n),items:_.value,label:"部門","item-title":"name","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!S.value.companyId},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),l(M,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(q,{modelValue:S.value.role,"onUpdate:modelValue":e[2]||(e[2]=n=>S.value.role=n),items:Za.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(q,{modelValue:S.value.employmentStatus,"onUpdate:modelValue":e[3]||(e[3]=n=>S.value.employmentStatus=n),items:Ka.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),l(M,null,{default:s(()=>[l(r,{cols:"12",sm:"6"},{default:s(()=>[l(q,{modelValue:S.value.dateType,"onUpdate:modelValue":e[4]||(e[4]=n=>S.value.dateType=n),items:te.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"12",sm:"6"},{default:s(()=>[l(g,{modelValue:S.value.dateRange,"onUpdate:modelValue":e[5]||(e[5]=n=>S.value.dateRange=n),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1}),l(M,null,{default:s(()=>[l(r,{cols:"6",class:"pe-0 py-0"},{default:s(()=>[Y("div",Cn,[e[89]||(e[89]=Y("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),l(Ht,{modelValue:S.value.gender,"onUpdate:modelValue":e[6]||(e[6]=n=>S.value.gender=n),column:"",class:"custom-chip-group"},{default:s(()=>[l(qa,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:s(()=>e[87]||(e[87]=[N(" 男性 ")])),_:1}),l(qa,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:s(()=>e[88]||(e[88]=[N(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(M,null,{default:s(()=>[l(r,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[l(M,null,{default:s(()=>[l(r,{cols:"3"},{default:s(()=>[l(L,{color:"grey",block:"",onClick:rt},{default:s(()=>[l(de,null,{default:s(()=>e[90]||(e[90]=[N("mdi-refresh")])),_:1})]),_:1})]),_:1}),l(r,null,{default:s(()=>[l(L,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:Be.value,block:"",onClick:e[7]||(e[7]=()=>{console.log("Current search criteria:",S.value.value),ia()})},{default:s(()=>e[91]||(e[91]=[N(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(M,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:s(()=>[l(r,{cols:"12",class:"ps-3 pb-6"},{default:s(()=>e[92]||(e[92]=[Y("h3",null," 員工管理 ",-1)])),_:1}),l(r,{cols:"12"},{default:s(()=>[l(M,null,{default:s(()=>[l(r,null,{default:s(()=>[l(M,null,{default:s(()=>[l(r,null,{default:s(()=>[l(L,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:e[8]||(e[8]=n=>el(null))},{default:s(()=>e[93]||(e[93]=[N(" 新增使用者 ")])),_:1})]),_:1}),l(r,{sm:"4",lg:"3",xl:"2"},{default:s(()=>[l(M,{class:"d-flex align-center"},{default:s(()=>[t(p)?(E(),j(r,{key:0,cols:"2",class:"ps-lg-5"},{default:s(()=>[Ta(l(de,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[cl,"可搜尋員編、姓名、公司Email、手機、分機、職稱、備註","start"]])]),_:1})):F("",!0),l(r,null,{default:s(()=>[l(k,{modelValue:da.value,"onUpdate:modelValue":e[9]||(e[9]=n=>da.value=n),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,{cols:"12"},{default:s(()=>[(E(),j(ln,{key:_a.value,"items-per-page":Na.value,"onUpdate:itemsPerPage":[e[10]||(e[10]=n=>Na.value=n),e[12]||(e[12]=n=>Ve(!1))],"sort-by":Ua.value,"onUpdate:sortBy":[e[11]||(e[11]=n=>Ua.value=n),e[13]||(e[13]=n=>Ve(!1))],page:X.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:$e.value,headers:Kl.value,"header-props":U,loading:Be.value,"items-length":La.value,search:Ja.value,hover:"","onUpdate:page":ut},{item:s(({item:n,index:Te})=>{var Ae,ve;return[Y("tr",{class:Xt({"odd-row":Te%2===0,"even-row":Te%2!==0})},[Y("td",null,W(n.userId),1),Y("td",null,W(n.name),1),t(v)?(E(),ue("td",Pn,W(n.email),1)):F("",!0),t(v)?(E(),ue("td",Nn,W(n.cellphone),1)):F("",!0),t(p)?(E(),ue("td",Un,W(((Ae=n.company)==null?void 0:Ae.name)||""),1)):F("",!0),t(p)?(E(),ue("td",Rn,W(((ve=n.department)==null?void 0:ve.name)||""),1)):F("",!0),Y("td",null,W(n.extNumber),1),t(V)?(E(),ue("td",En,W(Gl(n.role)),1)):F("",!0),t(I)?(E(),ue("td",$n,W(n.employmentStatus),1)):F("",!0),Y("td",Bn,[l(L,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:P.value,ripple:!1,onClick:mt=>el(n)},{default:s(()=>[l(de,null,{default:s(()=>e[94]||(e[94]=[N("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),n.isFirstLogin?Ta((E(),j(L,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:P.value,ripple:!1,onClick:mt=>nt(n)},{default:s(()=>[l(de,null,{default:s(()=>e[95]||(e[95]=[N("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[cl,"發送初始密碼"]]):F("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ol,{modelValue:se.value.open,"onUpdate:modelValue":e[14]||(e[14]=n=>se.value.open=n),persistent:"","max-width":"360"},{default:s(()=>[l(Ea,{class:"rounded-lg pa-4"},{default:s(()=>[e[100]||(e[100]=Y("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),Y("div",Tn,[e[96]||(e[96]=N(" 確定要發送系統生成的初始密碼給 ")),Y("span",An,W(se.value.userName),1),e[97]||(e[97]=N(" 嗎？ "))]),l(ul,{class:"pa-4 pt-0"},{default:s(()=>[l(rl),l(L,{color:"grey",variant:"outlined",size:P.value,onClick:al},{default:s(()=>e[98]||(e[98]=[N(" 取消 ")])),_:1},8,["size"]),l(L,{color:"teal-darken-1",variant:"outlined",size:P.value,loading:se.value.loading,onClick:at},{default:s(()=>e[99]||(e[99]=[N(" 確認發送 ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ol,{modelValue:ae.value.open,"onUpdate:modelValue":e[81]||(e[81]=n=>ae.value.open=n),persistent:"",width:Tl.value},{default:s(()=>[l(tn,{disabled:t(za),onSubmit:qt(t(lt),["prevent"])},{default:s(()=>[l(Ea,{class:"rounded-lg px-4 py-6"},{default:s(()=>[Y("div",Mn,W(ae.value.id?"員工資料編輯":"新增員工"),1),Y("div",Yn,[l(hn,{modelValue:De.value,"onUpdate:modelValue":e[15]||(e[15]=n=>De.value=n),color:"blue-grey-darken-2","align-tabs":"center","mobile-breakpoint":"sm",density:"compact",height:"40"},{default:s(()=>[l($a,{value:"basic",class:"tab-title"},{default:s(()=>[l(de,{start:""},{default:s(()=>e[101]||(e[101]=[N(" mdi-account-outline ")])),_:1}),e[102]||(e[102]=N(" 個人資訊 "))]),_:1}),l($a,{value:"employment",class:"tab-title"},{default:s(()=>[l(de,{start:""},{default:s(()=>e[103]||(e[103]=[N(" mdi-briefcase-outline ")])),_:1}),e[104]||(e[104]=N(" 任職資訊 "))]),_:1}),l($a,{value:"insurance",class:"tab-title"},{default:s(()=>[l(de,{start:""},{default:s(()=>e[105]||(e[105]=[N(" mdi-shield-account-outline ")])),_:1}),e[106]||(e[106]=N(" 保險及薪轉資訊 "))]),_:1})]),_:1},8,["modelValue"])]),Le.value&&c.value?(E(),j(va,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:s(()=>[l(Ft,{indeterminate:"",color:"blue-grey-darken-2",size:D.value},null,8,["size"])]),_:1})):(E(),j(Ul,{key:1,modelValue:De.value,"onUpdate:modelValue":e[79]||(e[79]=n=>De.value=n),class:"overflow-y-auto mx-1"},{default:s(()=>[l(Ba,{value:"basic"},{default:s(()=>[l(va,{class:"mt-3 pa-3"},{default:s(()=>[l(M,null,{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(He).value.value,"onUpdate:modelValue":e[16]||(e[16]=n=>t(He).value.value=n),"error-messages":t(He).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Xe).value.value,"onUpdate:modelValue":e[17]||(e[17]=n=>t(Xe).value.value=n),"error-messages":t(Xe).errorMessage.value,label:"英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Ie).value.value,"onUpdate:modelValue":e[18]||(e[18]=n=>t(Ie).value.value=n),"error-messages":t(Ie).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(ie).value.value,"onUpdate:modelValue":e[19]||(e[19]=n=>t(ie).value.value=n),items:Bl.value,"error-messages":t(ie).errorMessage.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(wa).value.value,"onUpdate:modelValue":e[20]||(e[20]=n=>t(wa).value.value=n),"error-messages":t(wa).errorMessage.value,items:B,"item-title":"title","item-value":"value",label:"身心障礙身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(Ca).value.value,"onUpdate:modelValue":e[21]||(e[21]=n=>t(Ca).value.value=n),"error-messages":t(Ca).errorMessage.value,items:A,"item-title":"title","item-value":"value",label:"原住民身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(ge).value.value,"onUpdate:modelValue":e[22]||(e[22]=n=>t(ge).value.value=n),"error-messages":t(ge).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:t(zl),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[23]||(e[23]=n=>t(ge).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(fa).value.value,"onUpdate:modelValue":e[24]||(e[24]=n=>t(fa).value.value=n),"error-messages":t(fa).errorMessage.value,label:"室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(qe).value.value,"onUpdate:modelValue":e[25]||(e[25]=n=>t(qe).value.value=n),"error-messages":t(qe).errorMessage.value,label:"手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"6",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(je).value.value,"onUpdate:modelValue":e[26]||(e[26]=n=>t(je).value.value=n),"error-messages":t(je).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(fe).value.value,"onUpdate:modelValue":e[27]||(e[27]=n=>t(fe).value.value=n),"error-messages":t(fe).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(we).value.value,"onUpdate:modelValue":e[28]||(e[28]=n=>t(we).value.value=n),"error-messages":t(we).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":s(()=>[l(nn,{location:"top","close-delay":"200"},{activator:s(({tprops:n})=>[l(de,ce(n,{icon:"mdi-content-copy",onClick:ot}),null,16)]),default:s(()=>[e[107]||(e[107]=N(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(M,{class:"d-flex align-center my-2"},{default:s(()=>[l(r,{cols:"4"},{default:s(()=>[l(Ra)]),_:1}),l(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[108]||(e[108]=[N(" 緊急連絡人資訊 ")])),_:1}),l(r,{cols:"4"},{default:s(()=>[l(Ra)]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(ta).value.value,"onUpdate:modelValue":e[29]||(e[29]=n=>t(ta).value.value=n),"error-messages":t(ta).errorMessage.value,label:"緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(ba).value.value,"onUpdate:modelValue":e[30]||(e[30]=n=>t(ba).value.value=n),"error-messages":t(ba).errorMessage.value,label:"緊急聯絡人室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(na).value.value,"onUpdate:modelValue":e[31]||(e[31]=n=>t(na).value.value=n),"error-messages":t(na).errorMessage.value,label:"緊急聯絡人手機",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(sa).value.value,"onUpdate:modelValue":e[32]||(e[32]=n=>t(sa).value.value=n),"error-messages":t(sa).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ba,{value:"employment"},{default:s(()=>[l(va,{class:"mt-3 pa-3"},{default:s(()=>[l(M,null,{default:s(()=>[c.value?(E(),j(r,{key:0,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(la).value.value,"onUpdate:modelValue":e[33]||(e[33]=n=>t(la).value.value=n),"error-messages":t(la).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",maxlength:"4",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):F("",!0),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:G.value,"onUpdate:modelValue":[e[34]||(e[34]=n=>G.value=n),ma],"error-messages":t(Ke).errorMessage.value,items:El.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(be).value.value,"onUpdate:modelValue":e[35]||(e[35]=n=>t(be).value.value=n),items:_.value,"error-messages":t(be).errorMessage.value,"item-title":"name","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Qe).value.value,"onUpdate:modelValue":e[36]||(e[36]=n=>t(Qe).value.value=n),"error-messages":t(Qe).errorMessage.value,label:"職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(Je).value.value,"onUpdate:modelValue":e[37]||(e[37]=n=>t(Je).value.value=n),"error-messages":t(Je).errorMessage.value,items:Za.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(me).value.value,"onUpdate:modelValue":e[38]||(e[38]=n=>t(me).value.value=n),"error-messages":t(me).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:t(_l),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[39]||(e[39]=n=>t(me).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(ye).value.value,"onUpdate:modelValue":e[40]||(e[40]=n=>t(ye).value.value=n),"error-messages":t(ye).errorMessage.value,items:Ka.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),t(re).value.value?(E(),j(r,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(re).value.value,"onUpdate:modelValue":e[41]||(e[41]=n=>t(re).value.value=n),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Ll),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[42]||(e[42]=n=>t(re).value.value=null)},null,8,["modelValue","hint"])]),_:1})):F("",!0),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Ge).value.value,"onUpdate:modelValue":e[43]||(e[43]=n=>t(Ge).value.value=n),"error-messages":t(Ge).errorMessage.value,label:"分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Ze).value.value,"onUpdate:modelValue":e[44]||(e[44]=n=>t(Ze).value.value=n),"error-messages":t(Ze).errorMessage.value,label:"列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Fe).value.value,"onUpdate:modelValue":e[45]||(e[45]=n=>t(Fe).value.value=n),"error-messages":t(Fe).errorMessage.value,label:"基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(Da).value.value,"onUpdate:modelValue":e[46]||(e[46]=n=>t(Da).value.value=n),"error-messages":t(Da).errorMessage.value,items:ne,"item-title":"title","item-value":"value",label:"旅遊經理人",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",md:"8",lg:"6",class:"pb-0"},{default:s(()=>[l(Sn,{modelValue:t(ua).value.value,"onUpdate:modelValue":e[47]||(e[47]=n=>t(ua).value.value=n),"error-messages":t(ua).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(M,{class:"d-flex align-center my-2"},{default:s(()=>[l(r,{cols:"4"},{default:s(()=>[l(Ra)]),_:1}),l(r,{cols:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[109]||(e[109]=[N(" 系統帳號資訊 ")])),_:1}),l(r,{cols:"4"},{default:s(()=>[l(Ra)]),_:1})]),_:1})]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(We).value.value,"onUpdate:modelValue":e[48]||(e[48]=n=>t(We).value.value=n),"error-messages":t(We).errorMessage.value,label:"公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(ea).value.value,"onUpdate:modelValue":e[49]||(e[49]=n=>t(ea).value.value=n),"error-messages":t(ea).errorMessage.value,label:"科威帳號",type:ee.value?"text":"password","append-inner-icon":ee.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[50]||(e[50]=n=>ee.value=!ee.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(aa).value.value,"onUpdate:modelValue":e[51]||(e[51]=n=>t(aa).value.value=n),"error-messages":t(aa).errorMessage.value,label:"科威密碼",type:Se.value?"text":"password","append-inner-icon":Se.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[52]||(e[52]=n=>Se.value=!Se.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Sa).value.value,"onUpdate:modelValue":e[53]||(e[53]=n=>t(Sa).value.value=n),"error-messages":t(Sa).errorMessage.value,label:"YSRC帳號",type:_e.value?"text":"password","append-inner-icon":_e.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[54]||(e[54]=n=>_e.value=!_e.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(xa).value.value,"onUpdate:modelValue":e[55]||(e[55]=n=>t(xa).value.value=n),"error-messages":t(xa).errorMessage.value,label:"YSRC密碼",type:xe.value?"text":"password","append-inner-icon":xe.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[56]||(e[56]=n=>xe.value=!xe.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(ka).value.value,"onUpdate:modelValue":e[57]||(e[57]=n=>t(ka).value.value=n),"error-messages":t(ka).errorMessage.value,label:"YS168帳號",type:ke.value?"text":"password","append-inner-icon":ke.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[58]||(e[58]=n=>ke.value=!ke.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Ia).value.value,"onUpdate:modelValue":e[59]||(e[59]=n=>t(Ia).value.value=n),"error-messages":t(Ia).errorMessage.value,label:"YS168密碼",type:pe.value?"text":"password","append-inner-icon":pe.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[60]||(e[60]=n=>pe.value=!pe.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(oa).value.value,"onUpdate:modelValue":e[61]||(e[61]=n=>t(oa).value.value=n),"error-messages":t(oa).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ba,{value:"insurance"},{default:s(()=>[l(va,{class:"mt-3 pa-3"},{default:s(()=>[l(M,null,{default:s(()=>[l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Ce).value.value,"onUpdate:modelValue":e[62]||(e[62]=n=>t(Ce).value.value=n),"error-messages":t(Ce).errorMessage.value,label:"健保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Wl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[63]||(e[63]=n=>t(Ce).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Pe).value.value,"onUpdate:modelValue":e[64]||(e[64]=n=>t(Pe).value.value=n),"error-messages":t(Pe).errorMessage.value,label:"健保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(jl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[65]||(e[65]=n=>t(Pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Ne).value.value,"onUpdate:modelValue":e[66]||(e[66]=n=>t(Ne).value.value=n),"error-messages":t(Ne).errorMessage.value,label:"勞保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Hl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[67]||(e[67]=n=>t(Ne).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Ue).value.value,"onUpdate:modelValue":e[68]||(e[68]=n=>t(Ue).value.value=n),"error-messages":t(Ue).errorMessage.value,label:"勞保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Xl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[69]||(e[69]=n=>t(Ue).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(q,{modelValue:t(Pa).value.value,"onUpdate:modelValue":e[70]||(e[70]=n=>t(Pa).value.value=n),"error-messages":t(Pa).errorMessage.value,items:H,"item-title":"title","item-value":"value",label:"勞退自提比率",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Re).value.value,"onUpdate:modelValue":e[71]||(e[71]=n=>t(Re).value.value=n),"error-messages":t(Re).errorMessage.value,label:"勞退自提加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(ql),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[72]||(e[72]=n=>t(Re).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(g,{modelValue:t(Ee).value.value,"onUpdate:modelValue":e[73]||(e[73]=n=>t(Ee).value.value=n),"error-messages":t(Ee).errorMessage.value,label:"勞保自提退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:t(Fl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[74]||(e[74]=n=>t(Ee).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(sn,{modelValue:t(ya).value.value,"onUpdate:modelValue":e[75]||(e[75]=n=>t(ya).value.value=n),items:Aa.value,"error-messages":t(ya).errorMessage.value,label:"薪轉銀行",variant:"outlined",density:"compact","item-title":"title","item-value":"value",clearable:"","menu-props":{maxHeight:400},hint:"可輸入銀行代碼或銀行名稱進行搜尋","persistent-hint":""},{selection:s(({item:n})=>[N(W(n.title),1)]),_:1},8,["modelValue","items","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(Va).value.value,"onUpdate:modelValue":e[76]||(e[76]=n=>t(Va).value.value=n),"error-messages":t(Va).errorMessage.value,label:"薪轉分行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(k,{modelValue:t(ha).value.value,"onUpdate:modelValue":e[77]||(e[77]=n=>t(ha).value.value=n),"error-messages":t(ha).errorMessage.value,label:"薪轉帳戶號碼",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(r,{cols:"12"},{default:s(()=>[l(wn,{modelValue:x.value,"onUpdate:modelValue":e[78]||(e[78]=n=>x.value=n),errors:Q.value},null,8,["modelValue","errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])),l(ul,{class:"px-3 mt-4"},{default:s(()=>[l(on,null,{default:s(({isHovering:n,props:Te})=>[c.value?(E(),j(L,ce({key:0},Te,{color:n?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:P.value,onClick:e[80]||(e[80]=Ae=>f.value=!0)}),{default:s(()=>e[110]||(e[110]=[N(" 永久刪除 ")])),_:2},1040,["color","size"])):F("",!0)]),_:1}),l(rl),l(L,{color:"red-lighten-1",variant:"outlined",size:P.value,loading:t(za),onClick:Wa},{default:s(()=>e[111]||(e[111]=[N(" 取消 ")])),_:1},8,["size","loading"]),l(L,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:P.value,loading:t(za),disabled:c.value&&!dt.value},{default:s(()=>e[112]||(e[112]=[N(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),l(Zt,{modelValue:ca.value,"onUpdate:modelValue":e[82]||(e[82]=n=>ca.value=n),onConfirm:e[83]||(e[83]=n=>{t(re).value.value=n}),onCancel:e[84]||(e[84]=n=>t(ye).value.value="在職")},null,8,["modelValue"]),l(Jt,{modelValue:f.value,"onUpdate:modelValue":e[85]||(e[85]=n=>f.value=n),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((R=d.value)==null?void 0:R.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${((T=d.value)==null?void 0:T.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((z=d.value)==null?void 0:z.name)||"","input-label":"員工姓名",onConfirm:st},null,8,["modelValue","message","expected-name"])],64)}}},ns=xl(On,[["__scopeId","data-v-e64fd2b4"]]);export{ns as default};
