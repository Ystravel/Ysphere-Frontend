import{bm as ta,p as sa,bn as na,m as ra,b8 as oa,Y as ua,d as ia,bo as da,bp as ma,e as va,a as ca,f as pa,bq as ga,g as fa,D as ya,o as $,l as ba,br as Va,b9 as xa,Z as ka,j as Da,bs as wa,bt as ha,k as Ia,b4 as Ca,t as Pa,_ as Sa,c as a,bu as Ua,ab as G,r as yl,K as B,H as rl,a0 as Cl,a2 as Pl,x as m,z as Q,A as ol,a6 as c,ao as E,a8 as t,ai as Ye,af as V,am as We,aV as Sl,U as ul,ap as _a,a7 as I,al as Na,V as Aa,an as _,ay as qe,ad as f,at as Ul,a1 as Ra,P as Ta,aW as bl,aw as $a,as as Vl,ac as n,a5 as Ma,ae as k,bc as xl,ag as kl,ax as D,aj as za,av as Dl,aa as wl,a9 as La}from"./index-CqXaXy7O.js";import{l as hl}from"./lodash-DHyxJ22h.js";import{c as Ea,a as g,d as sl,h as Oa,f as qa,u as Ba,b as p}from"./index.esm-DIWB2yw6.js";import{u as nl,_ as ja,E as Fa,a as Ha}from"./useROCDate-DUtsR3ZS.js";import{C as Ya}from"./ConfirmDeleteDialogWithTextField-C9i900xy.js";import{a as r,V as C}from"./VRow-6WrBPs_F.js";import{b as Wa,V as Za,a as Ka}from"./VList-g9xWPP6R.js";import{V as Qa}from"./VContainer-fMtVW-Y8.js";import{V as q,a as Ga}from"./VDataTableServer-BvZJvbZ_.js";import{V as Ja}from"./VForm-Cs_O0yKI.js";import{V as He}from"./VDivider-DikfYAF-.js";import{V as Xa}from"./VTooltip-CAd-vhuz.js";import{V as et}from"./VHover-BIdPlEXV.js";import{T as Il}from"./index-CziCRho8.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-CHw2ppw1.js";const lt=ta("v-alert-title"),at=["success","info","warning","error"],tt=sa({border:{type:[Boolean,String],validator:o=>typeof o=="boolean"||["top","end","bottom","start"].includes(o)},borderColor:String,closable:Boolean,closeIcon:{type:na,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:o=>at.includes(o)},...ra(),...oa(),...ua(),...ia(),...da(),...ma(),...va(),...ca(),...pa(),...ga({variant:"flat"})},"VAlert"),st=fa()({name:"VAlert",props:tt(),emits:{"click:close":o=>!0,"update:modelValue":o=>!0},setup(o,R){let{emit:O,slots:i}=R;const M=ya(o,"modelValue"),N=$(()=>{if(o.icon!==!1)return o.type?o.icon??`$${o.type}`:o.icon}),z=$(()=>({color:o.color??o.type,variant:o.variant})),{themeClasses:J}=ba(o),{colorClasses:Y,colorStyles:X,variantClasses:P}=Va(z),{densityClasses:d}=xa(o),{dimensionStyles:y}=ka(o),{elevationClasses:x}=Da(o),{locationStyles:w}=wa(o),{positionClasses:Ze}=ha(o),{roundedClasses:oe}=Ia(o),{textColorClasses:Ke,textColorStyles:Qe}=Ca(Pa(o,"borderColor")),{t:ue}=Sa(),ee=$(()=>({"aria-label":ue(o.closeLabel),onClick(W){M.value=!1,O("click:close",W)}}));return()=>{const W=!!(i.prepend||N.value),ye=!!(i.title||o.title),ie=!!(i.close||o.closable);return M.value&&a(o.tag,{class:["v-alert",o.border&&{"v-alert--border":!!o.border,[`v-alert--border-${o.border===!0?"start":o.border}`]:!0},{"v-alert--prominent":o.prominent},J.value,Y.value,d.value,x.value,Ze.value,oe.value,P.value,o.class],style:[X.value,y.value,w.value,o.style],role:"alert"},{default:()=>{var de,j;return[Ua(!1,"v-alert"),o.border&&a("div",{key:"border",class:["v-alert__border",Ke.value],style:Qe.value},null),W&&a("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?a(yl,{key:"prepend-defaults",disabled:!N.value,defaults:{VIcon:{density:o.density,icon:N.value,size:o.prominent?44:28}}},i.prepend):a(G,{key:"prepend-icon",density:o.density,icon:N.value,size:o.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[ye&&a(lt,{key:"title"},{default:()=>{var S;return[((S=i.title)==null?void 0:S.call(i))??o.title]}}),((de=i.text)==null?void 0:de.call(i))??o.text,(j=i.default)==null?void 0:j.call(i)]),i.append&&a("div",{key:"append",class:"v-alert__append"},[i.append()]),ie&&a("div",{key:"close",class:"v-alert__close"},[i.close?a(yl,{key:"close-defaults",defaults:{VBtn:{icon:o.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var S;return[(S=i.close)==null?void 0:S.call(i,{props:ee.value})]}}):a(B,rl({key:"close-btn",icon:o.closeIcon,size:"x-small",variant:"text"},ee.value),null)])]}})}}}),nt={key:0,class:"loading-overlay d-flex justify-center align-center"},rt={key:0,class:"birthday-list"},ot={class:"font-weight-medium",style:{"font-size":"14px"}},ut={class:"text-caption text-grey-darken-1"},it={class:"text-center mt-4 text-grey-darken-1",style:{"font-size":"14px"}},dt={class:"text-pink-lighten-1 font-weight-bold"},mt={__name:"BirthdayReminder",setup(o,{expose:R}){const{apiAuth:O}=Ul(),i=Pl(),M=m([]),N=m(!1),z=P=>{const d=new Date;d.setHours(0,0,0,0);const y=new Date(P),x=d.getFullYear();y.setFullYear(x),y<d&&y.setFullYear(x+1);const w=y-d;return Math.ceil(w/(1e3*60*60*24))},J=P=>{const d=new Date(P),y=z(P);return y===0?`${d.getMonth()+1}/${d.getDate()} (今天)`:`${d.getMonth()+1}/${d.getDate()} (${y}天後)`},Y=P=>{const d=z(P);return d>=0&&d<=13},X=async()=>{N.value=!0;try{const{data:P}=await O.get("/user/all",{params:{page:1,itemsPerPage:999999,fields:"name birthDate department employmentStatus avatar"}});P.success&&(console.log("Birthday data:",P.result.data),M.value=P.result.data.filter(d=>d.employmentStatus==="在職"&&d.birthDate&&Y(d.birthDate)).sort((d,y)=>z(d.birthDate)-z(y.birthDate)))}catch(P){console.error("載入壽星資料失敗:",P),i({text:"載入壽星資料失敗",snackbarProps:{color:"error"}})}finally{N.value=!1}};return R({refreshData:X}),Q(()=>window.location.href,()=>{X()}),ol(()=>{X()}),(P,d)=>(c(),E("div",null,[a(C,null,{default:t(()=>[a(r,{cols:"12"},{default:t(()=>[a(Ye,{class:"mx-auto pa-8 pb-9",elevation:"4",rounded:"xl","min-height":"392"},{default:t(()=>[d[3]||(d[3]=V("h6",{style:{"font-size":"16px"},class:"ps-1 mb-5 d-flex align-center"}," 近期壽星 ",-1)),a(We,{class:"pt-0 px-1 birthday-container"},{default:t(()=>[N.value?(c(),E("div",nt,[a(Sl,{indeterminate:"",color:"blue-grey-darken-1"})])):(c(),E(ul,{key:1},[M.value.length>0?(c(),E("div",rt,[a(Wa,null,{default:t(()=>[(c(!0),E(ul,null,_a(M.value,y=>(c(),I(Za,{key:y._id,class:"mb-2 rounded-lg",variant:"outlined"},{prepend:t(()=>[a(Na,{size:"36",color:"blue-grey-darken-1"},{default:t(()=>[y.avatar?(c(),I(Aa,{key:0,src:y.avatar,cover:""},null,8,["src"])):(c(),I(G,{key:1,icon:"mdi-account",color:"blue-grey-darken-1",size:"20"}))]),_:2},1024)]),default:t(()=>[a(Ka,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var x,w;return[V("div",null,[V("span",ot,_(y.name),1),V("div",ut,_(((x=y.department)==null?void 0:x.name)||"未分配部門")+"("+_((w=y.department)==null?void 0:w.departmentId)+") ",1)]),a(qe,{size:"small",color:z(y.birthDate)===0?"pink-lighten-1":"teal-lighten-2",variant:"flat",class:"ms-2 font-weight-medium"},{default:t(()=>[f(_(J(y.birthDate)),1)]),_:2},1032,["color"])]}),_:2},1024)]),_:2},1024))),128))]),_:1}),V("div",it,[d[0]||(d[0]=f(" 未來兩週共 ")),V("span",dt,_(M.value.length),1),d[1]||(d[1]=f(" 位壽星 "))])])):(c(),I(st,{key:1,color:"blue-grey-darken-1",variant:"tonal",class:"mb-0 mt-4"},{prepend:t(()=>[a(G,{icon:"mdi-information",size:"18",color:"blue-grey-lighten-1"})]),default:t(()=>[d[2]||(d[2]=f(" 未來兩週內無壽星 "))]),_:1}))],64))]),_:1})]),_:1})]),_:1})]),_:1})]))}},vt=Cl(mt,[["__scopeId","data-v-cd7616fc"]]),ct={class:"d-flex flex-column gap-2"},pt={class:"d-flex flex-column gap-2"},gt={key:0},ft={key:1},yt={key:2},bt={key:3},Vt={key:4},xt={key:5},kt={class:"d-flex align-center overflow-hidden h-25"},Dt={class:"list-content ps-4 py-3 mb-4"},wt={style:{"font-weight":"800"},class:"text-cyan-darken-2"},ht={class:"card-title ps-4 py-3"},It={__name:"userOriginal",setup(o){const{apiAuth:R}=Ul(),O=Ra(),i=Pl(),{smAndUp:M,mdAndUp:N,lgAndUp:z,xlAndUp:J,name:Y,width:X}=Ta(),P=$(()=>X.value>=1520),d=$(()=>M.value?"default":"small"),y=$(()=>M.value?"64":"default"),x=m(!1),w=m(null),Ze=m(1),oe=m(!1),Ke={class:"header-bg"},Qe=m([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),ue=m(!1),ee=m(!1),W=m(!1),ye=m(null),ie=m(""),de=m(!1),j=m(!1),S=m({open:!1,id:""}),Ge=m(null),Je=m(null),F=m({open:!1,userId:"",userName:"",loading:!1}),L=m(null),U=m([]),_l=m([]),il=m(Object.entries(bl).map(([e,l])=>({value:Number(e),title:l}))),Nl=$(()=>[...Be.value].sort((e,l)=>{const u=e.companyId||"",b=l.companyId||"";return u.localeCompare(b)}).map(e=>({title:`${e.name}`,value:e._id}))),Be=m([]),Al=$(()=>[{title:"全部",value:""},...[...Be.value].sort((e,l)=>{const u=e.companyId||"",b=l.companyId||"";return u.localeCompare(b)}).map(e=>({title:e.name,value:e._id}))]),dl=m([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),Xe=m([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),Rl=m([{title:"有",value:!0},{title:"無",value:!1}]),Tl=$(()=>J.value?"1200":z.value?"900":N.value?"800":M.value?"600":"100%"),$l=Ea({email:g().required("請輸入email").email("請輸入正確的 email 格式"),personalEmail:g().email("請輸入正確的 email 格式"),name:g().required("請輸入姓名"),englishName:g().required("請輸入英文名"),gender:g().required("請選擇姓別"),IDNumber:g().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入身分證號碼"),permanentAddress:g().required("請輸入戶籍地址"),contactAddress:g().required("請輸入聯絡地址"),birthDate:sl().nullable().required("請選擇生日"),company:g().nullable().required("請選擇公司"),department:g().required("請選擇部門"),cellphone:g().min(10,"手機號碼需為10位數字").max(10,"手機號碼勿超過10位數字").required("請輸入手機號碼"),salary:g().required("請輸入基本薪資"),extNumber:g().required("請輸入分機號碼"),printNumber:g().required("請輸入列印編號"),guideLicense:Oa(),jobTitle:g().required("請輸入職稱"),role:qa().required("請選擇使用者身分別"),employmentStatus:g().required("請選擇任職狀態"),hireDate:sl().nullable().required("請選擇入職日期"),resignationDate:sl().nullable(),emergencyName:g().required("請輸入緊急聯絡人姓名"),emergencyCellphone:g().required("請輸入緊急聯絡人連絡電話"),emergencyRelationship:g(),note:g(),userId:g(),cowellAccount:g().required("請輸入Cowell帳號"),cowellPassword:g().required("請輸入Cowell密碼")}),{handleSubmit:Ml,isSubmitting:el,resetForm:ml}=Ba({validationSchema:$l,initialValues:{email:"",personalEmail:"",name:"",englishName:"",gender:"",IDNumber:"",permanentAddress:"",contactAddress:"",birthDate:null,company:1,department:"",cellphone:"",salary:"",extNumber:"",printNumber:"",guideLicense:!1,jobTitle:"",role:0,employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyCellphone:"",emergencyRelationship:"",note:"",userId:"",cowellAccount:"",cowellPassword:""},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:$(()=>({isEditing:x.value}))}),be=p("email"),Ve=p("personalEmail"),xe=p("name"),ke=p("englishName"),Z=p("gender"),me=p("IDNumber"),le=p("permanentAddress"),ve=p("contactAddress"),ce=p("birthDate"),De=p("company"),ae=p("department",void 0,{validateOnValueUpdate:!1}),we=p("cellphone"),he=p("salary"),Ie=p("extNumber"),Ce=p("printNumber"),Pe=p("guideLicense"),Se=p("jobTitle"),Ue=p("role"),te=p("employmentStatus"),se=p("hireDate"),K=p("resignationDate"),_e=p("emergencyName"),Ne=p("emergencyCellphone"),Ae=p("emergencyRelationship",void 0,{validateOnValueUpdate:!1,transform:e=>e??""}),Re=p("note",void 0,{validateOnValueUpdate:!1,transform:e=>e??""}),Te=p("userId",void 0,{validateOnValueUpdate:!1,transform:e=>e??""}),$e=p("cowellAccount"),Me=p("cowellPassword"),{rocDate:zl}=nl(se),{rocDate:Ll}=nl(K),{rocDate:El}=nl(ce),je=m(10),Fe=m([{key:"userId",order:"asc"}]),T=m(1),pe=m([]),ll=m(0),ze=[{title:"員編",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],ge=m(!0),al=m(0),vl=m(""),v=m({role:"",companyId:"",department:"",gender:"",guideLicense:"",employmentStatus:"",dateType:"",dateRange:[]}),Le=m(""),Ol=e=>bl[e]||"未知",fe=e=>e?new Date(e):null,ql=$(()=>O.isSuperAdmin||O.isHR||O.isAdmin),Bl=$(()=>["xl","xxl"].includes(Y.value)?ze:["lg"].includes(Y.value)?ze.filter(e=>e.key!=="employmentStatus"):["md"].includes(Y.value)?ze.filter(e=>e.key!=="cellphone"&&e.key!=="email"&&e.key!=="employmentStatus"):["sm"].includes(Y.value)?ze.filter(e=>e.key!=="company.name"&&e.key!=="department.name"&&e.key!=="cellphone"&&e.key!=="email"&&e.key!=="employmentStatus"):ze.filter(e=>e.key!=="company.name"&&e.key!=="department.name"&&e.key!=="cellphone"&&e.key!=="email"&&e.key!=="role"&&e.key!=="employmentStatus")),jl=async()=>{try{const{data:e}=await R.get("/department/all");_l.value=e.result}catch(e){console.error("加載部門失敗",e),i({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},Fl=async()=>{try{const{data:e}=await R.get("/company/all");e.success&&(Be.value=e.result)}catch(e){console.error("載入公司列表失敗:",e),i({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},Hl=async()=>{if(!v.value.companyId){U.value=[];return}try{const{data:e}=await R.get("/department/all",{params:{companyId:v.value.companyId}});e.success?U.value=e.result||[]:(console.warn("找不到該公司的部門"),U.value=[])}catch(e){console.error("載入部門失敗:",e),i({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),U.value=[]}},ne=async(e,l)=>{e?T.value=1:l&&(T.value=l),await Ee()},Ee=async()=>{var e,l,u,b;ge.value=!0,console.log("Selected date range:",v.value.dateRange);try{const h={page:T.value,itemsPerPage:je.value,sortBy:((e=Fe.value[0])==null?void 0:e.key)||"userId",sortOrder:((l=Fe.value[0])==null?void 0:l.order)||"asc",quickSearch:Le.value,...v.value,department:v.value.department};v.value.dateType&&v.value.dateRange&&v.value.dateRange.length>0&&(h.dateType=v.value.dateType,h.startDate=v.value.dateRange[0].toISOString(),h.endDate=v.value.dateRange[v.value.dateRange.length-1].toISOString()),console.log("Query params:",h);const{data:A}=await R.get("/user/search",{params:h});A.success&&(pe.value=A.result.data,al.value=A.result.totalItems)}catch(h){console.error("搜索失败:",h),i({text:((b=(u=h==null?void 0:h.response)==null?void 0:u.data)==null?void 0:b.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{ge.value=!1}},Yl=async()=>{var e,l;try{F.value.loading=!0,await R.post(`/user/${F.value.userId}/send-initial-password`);const u=pe.value.findIndex(b=>b._id===F.value.userId);u!==-1&&(pe.value[u].isFirstLogin=!1),i({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),pl()}catch(u){console.error("發送初始密碼失敗:",u),i({text:((l=(e=u==null?void 0:u.response)==null?void 0:e.data)==null?void 0:l.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{F.value.loading=!1}},Wl=Ml(async e=>{var l,u,b,h;try{if(x.value){const A=T.value,{data:s}=await R.patch(`/user/${S.value.id}`,{...e,company:L.value}),re=pe.value.findIndex(H=>H._id===S.value.id);re!==-1&&(pe.value[re]={...s.result,company:Be.value.find(H=>H._id===L.value),department:{_id:e.department,name:((l=U.value.find(H=>H._id===e.department))==null?void 0:l.name)||""}}),await ne(!1,A)}else await R.post("/user",{...e,company:L.value}),await ne(!0);await Promise.all([(u=ye.value)==null?void 0:u.refreshChart(),(b=Ge.value)==null?void 0:b.refreshChart(),(h=Je.value)==null?void 0:h.refreshData()]),i({text:x.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),tl()}catch(A){const s=Zl(A);i({text:s,snackbarProps:{color:"red-lighten-1"}})}}),Zl=e=>e.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[e.response.data.message]||e.response.data.message:"發生錯誤",cl=async e=>{if(j.value=!0,!ql.value){i({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}j.value=!0,de.value=!0,Ze.value=T.value,S.value.open=!0,e?(x.value=!0,S.value.id=e._id,e.company&&(L.value=e.company._id,De.value.value=e.company._id,await Oe(e.company._id),e.department&&e.department._id&&(ae.value.value=e.department._id)),be.value.value=e.email,Ve.value.value=e.personalEmail,xe.value.value=e.name,ke.value.value=e.englishName,Z.value.value=e.gender,me.value.value=e.IDNumber,le.value.value=e.permanentAddress,ve.value.value=e.contactAddress,ce.value.value=fe(e.birthDate),we.value.value=e.cellphone,he.value.value=e.salary,Ie.value.value=e.extNumber,Ce.value.value=e.printNumber,Pe.value.value=e.guideLicense,Se.value.value=e.jobTitle,Ue.value.value=e.role,te.value.value=e.employmentStatus,se.value.value=fe(e.hireDate),K.value.value=fe(e.resignationDate),_e.value.value=e.emergencyName,Ne.value.value=e.emergencyCellphone,Ae.value.value=e.emergencyRelationship??"",Re.value.value=e.note??"",Te.value.value=e.userId??"",$e.value.value=e.cowellAccount,Me.value.value=e.cowellPassword,w.value={email:e.email,personalEmail:e.personalEmail,name:e.name,englishName:e.englishName,gender:e.gender,IDNumber:e.IDNumber,permanentAddress:e.permanentAddress,contactAddress:e.contactAddress,birthDate:fe(e.birthDate),cellphone:e.cellphone,salary:e.salary,extNumber:e.extNumber,printNumber:e.printNumber,guideLicense:e.guideLicense,jobTitle:e.jobTitle,role:e.role,employmentStatus:e.employmentStatus,hireDate:fe(e.hireDate),resignationDate:fe(e.resignationDate),emergencyName:e.emergencyName,emergencyCellphone:e.emergencyCellphone,emergencyRelationship:e.emergencyRelationship??"",note:e.note??"",userId:e.userId??"",cowellAccount:e.cowellAccount,cowellPassword:e.cowellPassword},localStorage.setItem("userTablePage",T.value.toString())):(x.value=!1,S.value.id="",w.value=null,L.value=null,U.value=[],ml(),se.value.value=new Date),setTimeout(()=>{j.value=!1,de.value=!1},300)},tl=()=>{S.value.open=!1,L.value=null,U.value=[],w.value=null,ml()},Kl=e=>{F.value={open:!0,userId:e._id,userName:e.name,loading:!1}},pl=()=>{F.value={open:!1,userId:"",userName:"",loading:!1}},Ql=async()=>{var e,l,u,b,h;try{ge.value=!0,await R.delete(`/user/${S.value.id}`),tl(),await ne(!0),await((e=ye.value)==null?void 0:e.refreshChart()),await((l=Ge.value)==null?void 0:l.refreshChart()),await((u=Je.value)==null?void 0:u.refreshData()),i({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(A){console.error("Delete user error:",A),i({text:((h=(b=A==null?void 0:A.response)==null?void 0:b.data)==null?void 0:h.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{ge.value=!1,oe.value=!1}},Gl=()=>{le.value.value&&(ve.value.value=le.value.value)},Jl=e=>{e<1&&(e=1);const l=Math.ceil(al.value/je.value);e>l&&(e=l),T.value!==e&&(T.value=e,localStorage.removeItem("userTablePage"),ne(!1))},Xl=()=>{v.value={role:"",companyId:"",department:"",gender:"",guideLicense:"",employmentStatus:"",dateType:"",startDate:null,endDate:null},U.value=[],vl.value="",Le.value="",Ee()},ea=$(()=>{if(!x.value)return!0;if(!w.value)return!1;const e={email:be.value.value,personalEmail:Ve.value.value,name:xe.value.value,englishName:ke.value.value,gender:Z.value.value,IDNumber:me.value.value,permanentAddress:le.value.value,contactAddress:ve.value.value,birthDate:ce.value.value,company:L.value,department:ae.value.value,cellphone:we.value.value,salary:he.value.value,extNumber:Ie.value.value,printNumber:Ce.value.value,guideLicense:Pe.value.value,jobTitle:Se.value.value,role:Ue.value.value,employmentStatus:te.value.value,hireDate:se.value.value,resignationDate:K.value.value,emergencyName:_e.value.value,emergencyCellphone:Ne.value.value,emergencyRelationship:Ae.value.value??"",note:Re.value.value??"",userId:Te.value.value??"",cowellAccount:$e.value,cowellPassword:Me.value};return Object.keys(w.value).some(l=>{if(["note","emergencyRelationship"].includes(l)){const u=w.value[l]??"",b=e[l]??"";return u!==b}if(l==="birthDate"||l==="hireDate"||l==="resignationDate"){const u=w.value[l]?new Date(w.value[l]).toISOString():null,b=e[l]?new Date(e[l]).toISOString():null;return u!==b}return w.value[l]!==e[l]})}),Oe=async e=>{var l;try{if(S.value.open?L.value=e:v.value={...v.value,companyId:e,department:""},!e){U.value=[];return}console.log("正在載入公司ID的部門:",e);const{data:u}=await R.get("/department/all",{params:{companyId:e,itemsPerPage:100}});console.log("API 返回的部門數據:",u),u.success?(U.value=((l=u.result)==null?void 0:l.data)||[],console.log("設置過濾後的部門列表:",U.value)):(console.warn("找不到該公司的部門"),U.value=[])}catch(u){console.error("載入部門失敗:",u),i({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),U.value=[]}},la=hl.debounce(e=>{ne(!0)},300),gl=hl.debounce(e=>{T.value=1,Ee()},300);return Q(Le,e=>{gl(e)}),Q(L,async e=>{e!=null?(De.value.value=e,ae.value.value="",await Oe(e)):(De.value.value=null,ae.value.value="",U.value=[])}),Q(()=>v.value.companyId,async e=>{e?await Oe(e):U.value=[]}),Q(()=>v.value.dateRange,e=>{console.log("選擇的日期區間:",e)}),Q(De.value,e=>{e&&e.value!==null&&e.value!==void 0&&(L.value=e.value)}),Q(te.value,e=>{j.value||(e==="離職"?W.value=!0:(W.value=!1,K.value.value=null))}),Q(()=>me.value.value,e=>{if(!e){Z.value.value=null,ie.value="";return}if(e.length===10&&e!==ie.value&&!de.value&&/^[A-Za-z][12]\d{8}$/.test(e)){const u=e.charAt(1);u==="1"?(Z.value.value="男性",ie.value=e,i({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):u==="2"&&(Z.value.value="女性",ie.value=e,i({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),ol(async()=>{const e=localStorage.getItem("userTablePage");e&&(T.value=parseInt(e),ll.value++),await Fl(),await jl(),await Hl(),await Ee()}),ol(()=>{const e=localStorage.getItem("userTablePage");e&&parseInt(e)>0?(T.value=parseInt(e),ll.value++,localStorage.removeItem("userTablePage")):T.value=1}),$a(()=>{la.cancel(),gl.cancel()}),(e,l)=>{var b,h,A;const u=Ma("v-date-input");return c(),E(ul,null,[a(Qa,{"max-width":"2500"},{default:t(()=>[a(C,{class:"rounded-xl py-0 mt-2 ma-sm-1 ma-md-6"},{default:t(()=>[n(J)?(c(),I(r,{key:0,class:"ps-4 py-0"},{default:t(()=>[a(Fa,{ref_key:"chartRef",ref:ye},null,512)]),_:1})):k("",!0),n(N)?(c(),I(r,{key:1,class:"ps-4 py-0"},{default:t(()=>[a(Ha,{ref_key:"turnoverChartRef",ref:Ge},null,512)]),_:1})):k("",!0),P.value?(c(),I(r,{key:2,class:"ps-4 py-0"},{default:t(()=>[a(vt,{ref_key:"birthdayReminderRef",ref:Je},null,512)]),_:1})):k("",!0),a(r,{class:"pa-0 mb-6 mb-sm-0"},{default:t(()=>[a(Ye,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-5 pb-4 pb-sm-5",elevation:"4",rounded:"xl",height:"100%"},{default:t(()=>[a(We,{class:"d-flex align-center"},{default:t(()=>[a(C,{class:"h-100"},{default:t(()=>[a(r,{cols:"12",class:"d-flex flex-column justify-center"},{default:t(()=>[a(C,null,{default:t(()=>l[52]||(l[52]=[V("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),a(C,null,{default:t(()=>[a(r,{cols:"12",sm:"6"},{default:t(()=>[a(q,{modelValue:v.value.companyId,"onUpdate:modelValue":[l[0]||(l[0]=s=>v.value.companyId=s),Oe],items:Al.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[a(q,{modelValue:v.value.department,"onUpdate:modelValue":l[1]||(l[1]=s=>v.value.department=s),items:U.value,label:"部門","item-title":"name","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!v.value.companyId},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(r,{cols:"12",sm:"6"},{default:t(()=>[a(q,{modelValue:v.value.role,"onUpdate:modelValue":l[2]||(l[2]=s=>v.value.role=s),items:il.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[a(q,{modelValue:v.value.employmentStatus,"onUpdate:modelValue":l[3]||(l[3]=s=>v.value.employmentStatus=s),items:dl.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(r,{cols:"12",sm:"6"},{default:t(()=>[a(q,{modelValue:v.value.dateType,"onUpdate:modelValue":l[4]||(l[4]=s=>v.value.dateType=s),items:Qe.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),a(r,{cols:"12",sm:"6"},{default:t(()=>[a(u,{modelValue:v.value.dateRange,"onUpdate:modelValue":l[5]||(l[5]=s=>v.value.dateRange=s),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(r,{cols:"6",class:"pe-0 py-0"},{default:t(()=>[V("div",ct,[l[55]||(l[55]=V("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),a(xl,{modelValue:v.value.gender,"onUpdate:modelValue":l[6]||(l[6]=s=>v.value.gender=s),column:"",class:"custom-chip-group"},{default:t(()=>[a(qe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:t(()=>l[53]||(l[53]=[f(" 男性 ")])),_:1}),a(qe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:t(()=>l[54]||(l[54]=[f(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),a(r,{cols:"6",class:"py-0"},{default:t(()=>[V("div",pt,[l[58]||(l[58]=V("label",{class:"text-grey-darken-1 search-label"},"領隊證",-1)),a(xl,{modelValue:v.value.guideLicense,"onUpdate:modelValue":l[7]||(l[7]=s=>v.value.guideLicense=s),column:"",class:"custom-chip-group"},{default:t(()=>[a(qe,{filter:"",variant:"outlined",value:!0,color:"blue-grey-darken-2",label:""},{default:t(()=>l[56]||(l[56]=[f(" 有 ")])),_:1}),a(qe,{filter:"",variant:"outlined",value:!1,color:"blue-grey-darken-2",label:""},{default:t(()=>l[57]||(l[57]=[f(" 無 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(r,{cols:"12",class:"d-flex justify-end gap-2"},{default:t(()=>[a(C,null,{default:t(()=>[a(r,{cols:"3"},{default:t(()=>[a(B,{color:"grey",block:"",onClick:Xl},{default:t(()=>[a(G,null,{default:t(()=>l[59]||(l[59]=[f("mdi-refresh")])),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(B,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:ge.value,block:"",onClick:l[8]||(l[8]=()=>{console.log("Current search criteria:",v.value.value),Ee()})},{default:t(()=>l[60]||(l[60]=[f(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(C,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:t(()=>[a(r,{cols:"12",class:"ps-3 pb-6"},{default:t(()=>l[61]||(l[61]=[V("h3",null," 員工管理 ",-1)])),_:1}),a(r,{cols:"12"},{default:t(()=>[a(C,null,{default:t(()=>[a(r,null,{default:t(()=>[a(C,null,{default:t(()=>[a(r,null,{default:t(()=>[a(B,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:l[9]||(l[9]=s=>cl(null))},{default:t(()=>l[62]||(l[62]=[f(" 新增使用者 ")])),_:1})]),_:1}),a(r,{sm:"4",lg:"3",xl:"2"},{default:t(()=>[a(C,{class:"d-flex align-center"},{default:t(()=>[n(N)?(c(),I(r,{key:0,cols:"2",class:"ps-lg-5"},{default:t(()=>[kl(a(G,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[Il,"可搜尋員編、姓名、公司Email、手機、分機、職稱、備註","start"]])]),_:1})):k("",!0),a(r,null,{default:t(()=>[a(D,{modelValue:Le.value,"onUpdate:modelValue":l[10]||(l[10]=s=>Le.value=s),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(r,{cols:"12"},{default:t(()=>[(c(),I(Ga,{key:ll.value,"items-per-page":je.value,"onUpdate:itemsPerPage":[l[11]||(l[11]=s=>je.value=s),l[13]||(l[13]=s=>ne(!1))],"sort-by":Fe.value,"onUpdate:sortBy":[l[12]||(l[12]=s=>Fe.value=s),l[14]||(l[14]=s=>ne(!1))],page:T.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:pe.value,headers:Bl.value,"header-props":Ke,loading:ge.value,"items-length":al.value,search:vl.value,hover:"","onUpdate:page":Jl},{item:t(({item:s,index:re})=>{var H,fl;return[V("tr",{class:za({"odd-row":re%2===0,"even-row":re%2!==0})},[V("td",null,_(s.userId),1),V("td",null,_(s.name),1),n(z)?(c(),E("td",gt,_(s.email),1)):k("",!0),n(z)?(c(),E("td",ft,_(s.cellphone),1)):k("",!0),n(N)?(c(),E("td",yt,_(((H=s.company)==null?void 0:H.name)||""),1)):k("",!0),n(N)?(c(),E("td",bt,_(((fl=s.department)==null?void 0:fl.name)||""),1)):k("",!0),V("td",null,_(s.extNumber),1),n(M)?(c(),E("td",Vt,_(Ol(s.role)),1)):k("",!0),n(J)?(c(),E("td",xt,_(s.employmentStatus),1)):k("",!0),V("td",kt,[a(B,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:d.value,ripple:!1,onClick:aa=>cl(s)},{default:t(()=>[a(G,null,{default:t(()=>l[63]||(l[63]=[f("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),s.isFirstLogin?kl((c(),I(B,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:d.value,ripple:!1,onClick:aa=>Kl(s)},{default:t(()=>[a(G,null,{default:t(()=>l[64]||(l[64]=[f("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[Il,"發送初始密碼"]]):k("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Vl,{modelValue:F.value.open,"onUpdate:modelValue":l[15]||(l[15]=s=>F.value.open=s),persistent:"","max-width":"360"},{default:t(()=>[a(Ye,{class:"rounded-lg pa-4"},{default:t(()=>[l[69]||(l[69]=V("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),V("div",Dt,[l[65]||(l[65]=f(" 確定要發送系統生成的初始密碼給 ")),V("span",wt,_(F.value.userName),1),l[66]||(l[66]=f(" 嗎？ "))]),a(Dl,{class:"pa-4 pt-0"},{default:t(()=>[a(wl),a(B,{color:"grey",variant:"outlined",size:d.value,onClick:pl},{default:t(()=>l[67]||(l[67]=[f(" 取消 ")])),_:1},8,["size"]),a(B,{color:"teal-darken-1",variant:"outlined",size:d.value,loading:F.value.loading,onClick:Yl},{default:t(()=>l[68]||(l[68]=[f(" 確認發送 ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Vl,{modelValue:S.value.open,"onUpdate:modelValue":l[47]||(l[47]=s=>S.value.open=s),persistent:"",width:Tl.value},{default:t(()=>[a(Ja,{disabled:n(el),onSubmit:La(n(Wl),["prevent"])},{default:t(()=>[a(Ye,{class:"rounded-lg px-4 py-6"},{default:t(()=>[V("div",ht,_(S.value.id?"員工資料編輯":"新增員工"),1),a(C,{class:"py-4"},{default:t(()=>[a(r,{cols:"4",md:"5",class:"d-flex align-center ps-6"},{default:t(()=>[a(He)]),_:1}),!j.value||!x.value?(c(),I(r,{key:0,cols:"4",md:"2",class:"info-title px-0 text-blue-grey-darken-2"},{default:t(()=>l[70]||(l[70]=[f(" 基本資料 ")])),_:1})):k("",!0),a(r,{cols:"4",md:"5",class:"d-flex align-center pe-6"},{default:t(()=>[a(He)]),_:1})]),_:1}),j.value&&x.value?(c(),I(We,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:t(()=>[a(Sl,{indeterminate:"",color:"blue-grey-darken-2",size:y.value},null,8,["size"])]),_:1})):k("",!0),!j.value||!x.value?(c(),I(We,{key:1,class:"mt-3 pa-3"},{default:t(()=>[a(C,null,{default:t(()=>[a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(xe).value.value,"onUpdate:modelValue":l[16]||(l[16]=s=>n(xe).value.value=s),"error-messages":n(xe).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(ke).value.value,"onUpdate:modelValue":l[17]||(l[17]=s=>n(ke).value.value=s),"error-messages":n(ke).errorMessage.value,label:"*英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(me).value.value,"onUpdate:modelValue":l[18]||(l[18]=s=>n(me).value.value=s),"error-messages":n(me).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(u,{modelValue:n(ce).value.value,"onUpdate:modelValue":l[19]||(l[19]=s=>n(ce).value.value=s),"error-messages":n(ce).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:n(El),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認"},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:n(Z).value.value,"onUpdate:modelValue":l[20]||(l[20]=s=>n(Z).value.value=s),items:Xe.value,"error-messages":n(Z).errorMessage.value,"item-title":Xe.value.title,"item-value":Xe.value.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(we).value.value,"onUpdate:modelValue":l[21]||(l[21]=s=>n(we).value.value=s),"error-messages":n(we).errorMessage.value,label:"*手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Ve).value.value,"onUpdate:modelValue":l[22]||(l[22]=s=>n(Ve).value.value=s),"error-messages":n(Ve).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(le).value.value,"onUpdate:modelValue":l[23]||(l[23]=s=>n(le).value.value=s),"error-messages":n(le).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(ve).value.value,"onUpdate:modelValue":l[24]||(l[24]=s=>n(ve).value.value=s),"error-messages":n(ve).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":t(()=>[a(Xa,{location:"top","close-delay":"200"},{activator:t(({props:s})=>[a(G,rl(s,{icon:"mdi-content-copy",onClick:Gl}),null,16)]),default:t(()=>[l[71]||(l[71]=f(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),n(N)&&!n(z)?(c(),I(r,{key:0,cols:"6"})):k("",!0),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(_e).value.value,"onUpdate:modelValue":l[25]||(l[25]=s=>n(_e).value.value=s),"error-messages":n(_e).errorMessage.value,label:"*緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Ne).value.value,"onUpdate:modelValue":l[26]||(l[26]=s=>n(Ne).value.value=s),"error-messages":n(Ne).errorMessage.value,label:"*緊急聯絡人電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Ae).value.value,"onUpdate:modelValue":l[27]||(l[27]=s=>n(Ae).value.value=s),"error-messages":n(Ae).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",class:"pa-0"},{default:t(()=>[a(C,{class:"py-4 mb-2"},{default:t(()=>[a(r,{cols:"4",md:"5",class:"d-flex align-center ps-6"},{default:t(()=>[a(He)]),_:1}),a(r,{cols:"4",md:"2",class:"info-title text-blue-grey-darken-2"},{default:t(()=>l[72]||(l[72]=[f(" 任職資訊 ")])),_:1}),a(r,{cols:"4",md:"5",class:"d-flex align-center pe-6"},{default:t(()=>[a(He)]),_:1})]),_:1})]),_:1}),x.value?(c(),I(r,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Te).value.value,"onUpdate:modelValue":l[28]||(l[28]=s=>n(Te).value.value=s),"error-messages":n(Te).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",maxlength:"4",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):k("",!0),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:L.value,"onUpdate:modelValue":[l[29]||(l[29]=s=>L.value=s),Oe],"error-messages":n(De).errorMessage.value,items:Nl.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:n(ae).value.value,"onUpdate:modelValue":l[30]||(l[30]=s=>n(ae).value.value=s),items:U.value,"error-messages":n(ae).errorMessage.value,"item-title":"name","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Se).value.value,"onUpdate:modelValue":l[31]||(l[31]=s=>n(Se).value.value=s),"error-messages":n(Se).errorMessage.value,label:"*職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),n(O).isHR||n(O).isSuperAdmin?(c(),I(r,{key:2,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(he).value.value,"onUpdate:modelValue":l[32]||(l[32]=s=>n(he).value.value=s),"error-messages":n(he).errorMessage.value,label:"*基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):k("",!0),n(O).isHR||n(O).isSuperAdmin?(c(),I(r,{key:3,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:n(Ue).value.value,"onUpdate:modelValue":l[33]||(l[33]=s=>n(Ue).value.value=s),"error-messages":n(Ue).errorMessage.value,items:il.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1})):k("",!0),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(u,{modelValue:n(se).value.value,"onUpdate:modelValue":l[34]||(l[34]=s=>n(se).value.value=s),"error-messages":n(se).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:n(zl),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認"},null,8,["modelValue","error-messages","hint"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Ie).value.value,"onUpdate:modelValue":l[35]||(l[35]=s=>n(Ie).value.value=s),"error-messages":n(Ie).errorMessage.value,label:"*分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Ce).value.value,"onUpdate:modelValue":l[36]||(l[36]=s=>n(Ce).value.value=s),"error-messages":n(Ce).errorMessage.value,label:"*列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n($e).value.value,"onUpdate:modelValue":l[37]||(l[37]=s=>n($e).value.value=s),"error-messages":n($e).errorMessage.value,label:"*科威帳號",type:ue.value?"text":"password","append-inner-icon":ue.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":l[38]||(l[38]=s=>ue.value=!ue.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Me).value.value,"onUpdate:modelValue":l[39]||(l[39]=s=>n(Me).value.value=s),"error-messages":n(Me).errorMessage.value,label:"*科威密碼",type:ee.value?"text":"password","append-inner-icon":ee.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":l[40]||(l[40]=s=>ee.value=!ee.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:n(Pe).value.value,"onUpdate:modelValue":l[41]||(l[41]=s=>n(Pe).value.value=s),items:Rl.value,"error-messages":n(Pe).errorMessage.value,label:"領隊證",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(q,{modelValue:n(te).value.value,"onUpdate:modelValue":l[42]||(l[42]=s=>n(te).value.value=s),"error-messages":n(te).errorMessage.value,items:dl.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),n(K).value.value?(c(),I(r,{key:4,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:t(()=>[a(u,{modelValue:n(K).value.value,"onUpdate:modelValue":l[43]||(l[43]=s=>n(K).value.value=s),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Ll),"cancel-text":"取消","ok-text":"確認"},null,8,["modelValue","hint"])]),_:1})):k("",!0),a(r,{cols:"12"},{default:t(()=>[a(C,null,{default:t(()=>[a(r,{cols:"12",sm:"6",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(be).value.value,"onUpdate:modelValue":l[44]||(l[44]=s=>n(be).value.value=s),"error-messages":n(be).errorMessage.value,label:"*公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",sm:"6",class:"pb-0"},{default:t(()=>[a(D,{modelValue:n(Re).value.value,"onUpdate:modelValue":l[45]||(l[45]=s=>n(Re).value.value=s),"error-messages":n(Re).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):k("",!0),a(Dl,{class:"px-3 mt-4"},{default:t(()=>[a(et,null,{default:t(({isHovering:s,props:re})=>[x.value?(c(),I(B,rl({key:0},re,{color:s?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:d.value,onClick:l[46]||(l[46]=H=>oe.value=!0)}),{default:t(()=>l[73]||(l[73]=[f(" 永久刪除 ")])),_:2},1040,["color","size"])):k("",!0)]),_:1}),a(wl),a(B,{color:"red-lighten-1",variant:"outlined",size:d.value,loading:n(el),onClick:tl},{default:t(()=>l[74]||(l[74]=[f(" 取消 ")])),_:1},8,["size","loading"]),a(B,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:d.value,loading:n(el),disabled:x.value&&!ea.value},{default:t(()=>l[75]||(l[75]=[f(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),a(ja,{modelValue:W.value,"onUpdate:modelValue":l[48]||(l[48]=s=>W.value=s),onConfirm:l[49]||(l[49]=s=>{n(K).value.value=s}),onCancel:l[50]||(l[50]=s=>n(te).value.value="在職")},null,8,["modelValue"]),a(Ya,{modelValue:oe.value,"onUpdate:modelValue":l[51]||(l[51]=s=>oe.value=s),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((b=w.value)==null?void 0:b.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${((h=w.value)==null?void 0:h.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((A=w.value)==null?void 0:A.name)||"","input-label":"員工姓名",onConfirm:Ql},null,8,["modelValue","message","expected-name"])],64)}}},Bt=Cl(It,[["__scopeId","data-v-22d7eae9"]]);export{Bt as default};
