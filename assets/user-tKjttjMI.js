import{a0 as Ha,x as m,o as K,z as le,a6 as k,a7 as T,a8 as s,af as N,ao as H,U as Re,ad as g,an as M,ac as n,ap as Ba,at as re,a5 as Dl,K as Q,ae as z,c as t,w as mt,ai as $a,ab as oe,aA as I,a1 as vt,a2 as ct,P as pt,b2 as rl,A as ol,as as gt,aD as dl,aE as bt,am as ca,b3 as ja,aa as _a,ag as Ea,ax as il,H as Ua,aj as ft,aC as ml,a9 as yt,ay as Dt}from"./index-BQIWdMHH.js";import{l as vl}from"./lodash-BYTxXjAY.js";import{c as cl,a as p,d as F,f as qa,g as pl,h as gl,u as Vt,b as d}from"./index.esm-CNkEetqG.js";import{u as ae,_ as St,E as It,a as kt}from"./useROCDate-B0BT9hpT.js";import{C as ht}from"./ConfirmDeleteDialogWithTextField-BEegXeeD.js";import{V as xt}from"./VCombobox-IV9epRUl.js";import{V as A,a as r}from"./VRow-CYWVkx0s.js";import{V as Ct}from"./VContainer-DUoJPEBA.js";import{V as pa}from"./VAutocomplete-DGBw03Ut.js";import{a as J}from"./VPagination-CAv198kr.js";import{b as bl,V as fl,a as yl}from"./VList-Dwy6jOCn.js";import{V as wt}from"./VDataTableServer-rzbBwwwO.js";import{V as Nt}from"./VForm-C1VKEqpk.js";import{V as Pt,a as Fa,d as Ja,e as Rt}from"./VTabs-BnFuys-F.js";import{V as Et}from"./VTooltip-p8abQMw-.js";import{V as ga}from"./VDivider-BfVDoBjx.js";import{V as Ut}from"./VHover-CsYLVEY7.js";import{T as Aa}from"./index-DjIwLODg.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VCheckboxBtn-DrpeNl-q.js";import"./VTable-C2E2g99R.js";const G={0:"無",1:"華語導遊",2:"外語導遊",3:"華語領隊",4:"外語領隊"},At={class:"d-flex align-center flex-wrap"},$t={__name:"GuideLicenseSelection",props:{modelValue:{type:Array,default:()=>[]},errorMessages:{type:[String,Array],default:""}},emits:["update:modelValue"],setup(ba,{emit:O}){const L=ba,h=O,X=Object.entries(G).filter(([w])=>w!=="0").map(([w,y])=>({value:Number(w),title:y})),x=m(L.modelValue.length===0||L.modelValue.length===1&&L.modelValue[0]===0?[{value:0,title:G[0]}]:L.modelValue.filter(w=>w!==0).map(w=>({value:w,title:G[w]}))),de=K(()=>x.value.length===1&&x.value[0].value===0),E=w=>{if(!w||w.length===0){x.value=[{value:0,title:G[0]}],h("update:modelValue",[0]);return}const y=w.filter(v=>v&&(typeof v.value=="number"||typeof v=="number")).map(v=>typeof v=="number"?v:v.value).filter(v=>v!==0);y.length===0?(x.value=[{value:0,title:G[0]}],h("update:modelValue",[0])):(x.value=y.map(v=>({value:v,title:G[v]})),h("update:modelValue",y))},ee=()=>{x.value=[{value:0,title:G[0]}],h("update:modelValue",[0])},W=w=>{const y=x.value.filter(v=>v.value!==w.value);y.length===0?(x.value=[{value:0,title:G[0]}],h("update:modelValue",[0])):(x.value=y,h("update:modelValue",y.map(v=>v.value)))};return le(()=>L.modelValue,w=>{w.length===0||w.length===1&&w[0]===0?x.value=[{value:0,title:G[0]}]:x.value=w.filter(y=>y!==0).map(y=>({value:y,title:G[y]}))},{deep:!0}),(w,y)=>(k(),T(xt,{modelValue:x.value,"onUpdate:modelValue":[y[0]||(y[0]=v=>x.value=v),E],items:n(X),label:"導遊領隊證",variant:"outlined",density:"compact","error-messages":L.errorMessages,multiple:"",chips:!de.value,clearable:"","onClick:clear":ee},{selection:s(()=>[N("div",At,[de.value?(k(),H(Re,{key:0},[g(M(n(G)[0]),1)],64)):(k(!0),H(Re,{key:1},Ba(x.value,v=>(k(),T(re,{key:v.value,class:"ma-1",closable:"",size:"small","onClick:close":fa=>W(v)},{default:s(()=>[g(M(n(G)[v.value]),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1},8,["modelValue","items","error-messages","chips"]))}},Bt=Ha($t,[["__scopeId","data-v-a2b768ed"]]),Mt={class:"d-flex justify-space-between align-center mb-4"},Tt={class:"d-flex justify-space-between align-center mb-2 mt-1"},Yt={__name:"DependentInsurance",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(ba,{emit:O}){const{convertToROCDate:L}=ae(),h=ba,X=O,x=D=>{if(!D)return null;if(D instanceof Date)return D;try{const b=new Date(D);return isNaN(b.getTime())?null:b}catch{return null}},E=m((D=>(D||[]).map(b=>({...b,dependentBirthDate:x(b.dependentBirthDate),dependentInsuranceStartDate:x(b.dependentInsuranceStartDate),dependentInsuranceEndDate:x(b.dependentInsuranceEndDate)})))(h.modelValue)),ee=m({}),W=(D,b)=>{var c;const $=`${D}-${b}`;if(!ee.value[$])return"";const V=E.value[D];if(b==="dependentName"&&!((c=V.dependentName)!=null&&c.trim()))return"請輸入受保人姓名";if(b==="dependentIDNumber"){const P=/^[A-Za-z][12]\d{8}$/,Ce=V.dependentIDNumber;if(!(Ce!=null&&Ce.trim()))return"請輸入身分證號碼";if(!P.test(Ce))return"身分證號碼格式錯誤"}return b==="dependentBirthDate"&&!V.dependentBirthDate?"請選擇出生日期":""},w=()=>{E.value.length<4&&(E.value.push({dependentName:"",dependentIDNumber:"",dependentRelationship:"",dependentBirthDate:null,dependentInsuranceStartDate:null,dependentInsuranceEndDate:null}),X("update:modelValue",E.value))},y=D=>{E.value.splice(D,1),Object.keys(ee.value).forEach(b=>{b.startsWith(`${D}-`)&&delete ee.value[b]}),X("update:modelValue",E.value)},v=(D,b)=>{ee.value[`${D}-${b}`]=!0};le(()=>h.modelValue,D=>{const b=D.map(c=>({...c,dependentBirthDate:c.dependentBirthDate instanceof Date?c.dependentBirthDate:x(c.dependentBirthDate),dependentInsuranceStartDate:c.dependentInsuranceStartDate instanceof Date?c.dependentInsuranceStartDate:x(c.dependentInsuranceStartDate),dependentInsuranceEndDate:c.dependentInsuranceEndDate instanceof Date?c.dependentInsuranceEndDate:x(c.dependentInsuranceEndDate)})),$=JSON.stringify(b),V=JSON.stringify(E.value);$!==V&&(E.value=b)},{deep:!0}),le(E,D=>{const b=D.map(c=>({...c,dependentBirthDate:c.dependentBirthDate instanceof Date?c.dependentBirthDate:x(c.dependentBirthDate),dependentInsuranceStartDate:c.dependentInsuranceStartDate instanceof Date?c.dependentInsuranceStartDate:x(c.dependentInsuranceStartDate),dependentInsuranceEndDate:c.dependentInsuranceEndDate instanceof Date?c.dependentInsuranceEndDate:x(c.dependentInsuranceEndDate)})),$=JSON.stringify(b),V=JSON.stringify(E.value);$!==V&&X("update:modelValue",b)},{deep:!0}),le(E,D=>{X("update:modelValue",D)},{deep:!0});const fa=D=>{if(!D)return"";if(D instanceof Date)return L(D);try{const b=new Date(D);return isNaN(b.getTime())?"":L(b)}catch{return""}};return(D,b)=>{const $=Dl("v-date-input");return k(),T(r,{cols:"12",class:"px-0"},{default:s(()=>[N("div",Mt,[b[1]||(b[1]=N("div",{class:"text-blue-grey-darken-2 ms-1 info-title",style:{"font-size":"15px"}}," 眷屬加保資料 ",-1)),E.value.length<4?(k(),T(Q,{key:0,color:"blue-grey-darken-2",variant:"outlined",size:"small","prepend-icon":"mdi-account-plus",onClick:w},{default:s(()=>b[0]||(b[0]=[g(" 新增眷屬 ")])),_:1})):z("",!0)]),t(mt,{group:""},{default:s(()=>[(k(!0),H(Re,null,Ba(E.value,(V,c)=>(k(),T($a,{key:c,class:"px-4 mb-3",elevation:"0",style:{border:"1px solid #aaa"}},{default:s(()=>[N("div",Tt,[N("h5",null,"眷屬 "+M(c+1),1),t(Q,{icon:"",color:"red-lighten-1",variant:"plain",size:"small",onClick:P=>y(c)},{default:s(()=>[t(oe,null,{default:s(()=>b[2]||(b[2]=[g("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),t(A,{class:"mb-3"},{default:s(()=>[t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(I,{modelValue:V.dependentName,"onUpdate:modelValue":P=>V.dependentName=P,"error-messages":W(c,"dependentName"),label:"*眷屬姓名",variant:"outlined",density:"compact",clearable:"",onBlur:P=>v(c,"dependentName")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(I,{modelValue:V.dependentIDNumber,"onUpdate:modelValue":P=>V.dependentIDNumber=P,"error-messages":W(c,"dependentIDNumber"),label:"*眷屬身分證號碼",variant:"outlined",density:"compact",clearable:"",maxlength:"10",onBlur:P=>v(c,"dependentIDNumber")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t($,{modelValue:V.dependentBirthDate,"onUpdate:modelValue":P=>V.dependentBirthDate=P,"error-messages":W(c,"dependentBirthDate"),label:"*眷屬生日","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:fa(V.dependentBirthDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認",onBlur:P=>v(c,"dependentBirthDate"),"onClick:clear":P=>V.dependentBirthDate=null},null,8,["modelValue","onUpdate:modelValue","error-messages","hint","onBlur","onClick:clear"])]),_:2},1024),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(I,{modelValue:V.dependentRelationship,"onUpdate:modelValue":P=>V.dependentRelationship=P,label:"眷屬關係",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t($,{modelValue:V.dependentInsuranceStartDate,"onUpdate:modelValue":P=>V.dependentInsuranceStartDate=P,label:"加保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(L)(V.dependentInsuranceStartDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":P=>V.dependentInsuranceStartDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t($,{modelValue:V.dependentInsuranceEndDate,"onUpdate:modelValue":P=>V.dependentInsuranceEndDate=P,label:"退保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(L)(V.dependentInsuranceEndDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":P=>V.dependentInsuranceEndDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},Ot=Ha(Yt,[["__scopeId","data-v-e895a5af"]]),Lt={class:"d-flex flex-column gap-2"},zt={class:"d-flex flex-column gap-2"},jt={class:"d-flex flex-column gap-2"},_t={key:0},qt={key:1},Ft={key:2},Jt={key:3},Ht={key:4},Wt={key:5},Zt={key:6},Gt={class:"d-flex align-center overflow-hidden h-25"},Kt={class:"list-content ps-4 py-3 mb-4"},Qt={style:{"font-weight":"800"},class:"text-cyan-darken-2"},Xt={class:"card-title px-4 py-3 d-flex justify-space-between"},en={class:"mb-4"},an={__name:"user",setup(ba){const{apiAuth:O}=bt(),L=vt(),h=ct(),{smAndUp:X,mdAndUp:x,lgAndUp:de,xlAndUp:E,name:ee}=pt(),W=K(()=>X.value?"default":"small"),w=K(()=>X.value?"64":"default"),y=m(!1),v=m(null),fa=m(1),D=m(!1),b={class:"header-bg"},$=m([]),V=m(""),c=m(!1),P=K(()=>{const a={};return($.value||[]).forEach((o,f)=>{var S,u;(S=o.dependentName)!=null&&S.trim()||(a[`dependentInsurance.${f}.dependentName`]="請輸入受保人姓名"),(u=o.dependentIDNumber)!=null&&u.trim()||(a[`dependentInsurance.${f}.dependentIDNumber`]="請輸入身分證號碼"),o.dependentBirthDate||(a[`dependentInsurance.${f}.dependentBirthDate`]="請選擇出生日期")}),a}),Ce=async(a,e)=>{var o,f;try{V.value=a;const{data:S}=await O.patch(`/user/${a}`,{formStatus:e});if(S.success){const u=ne.value.findIndex(l=>l._id===a);u!==-1&&(ne.value[u].formStatus=e),da.value++,h({text:"表單狀態更新成功",snackbarProps:{color:"teal-lighten-1"}})}else throw new Error(S.message||"更新失敗")}catch(S){console.error("更新表單狀態失敗:",S),h({text:((f=(o=S.response)==null?void 0:o.data)==null?void 0:f.message)||"更新表單狀態失敗",snackbarProps:{color:"error"}})}finally{V.value=""}},Vl=m([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),Sl=[{title:"否",value:!1},{title:"是",value:!0}],Il=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],kl=[{title:"否",value:!1},{title:"是",value:!0}],hl=[{title:"1%",value:1},{title:"2%",value:2},{title:"3%",value:3},{title:"4%",value:4},{title:"5%",value:5},{title:"6%",value:6}],Wa=a=>{switch(a){case"已完成":return"green-darken-1";case"尚未完成":return"pink-lighten-1";case"尚缺資料":return"amber-darken-3";default:return"grey"}},xl=[{title:"華語導遊",value:1},{title:"外語導遊",value:2},{title:"華語領隊",value:3},{title:"外語領隊",value:4}],Cl=[{title:"尚未完成",value:"尚未完成"},{title:"尚缺資料",value:"尚缺資料"},{title:"已完成",value:"已完成"}],wl=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],Za=["尚未完成","尚缺資料","已完成"],Nl=[{code:"008",name:"華南商業銀行"},{code:"004",name:"臺灣銀行"},{code:"005",name:"台灣土地銀行"},{code:"006",name:"合作金庫銀行"},{code:"007",name:"第一商業銀行"},{code:"009",name:"彰化商業銀行"},{code:"010",name:"花旗(台灣)(原華僑銀行)"},{code:"011",name:"上海商業銀行"},{code:"012",name:"台北富邦銀行"},{code:"013",name:"國泰世華商業銀行"},{code:"016",name:"高雄銀行"},{code:"017",name:"兆豐國際商業銀行"},{code:"021",name:"花旗銀行"},{code:"024",name:"美國運通銀行"},{code:"025",name:"首都銀行"},{code:"039",name:"荷蘭銀行"},{code:"040",name:"中華開發"},{code:"050",name:"台灣中小企業銀行"},{code:"052",name:"渣打國際商銀(原新竹商銀)"},{code:"053",name:"台中商業銀行"},{code:"054",name:"京城商銀"},{code:"057",name:"台東區中小企業銀行"},{code:"072",name:"德意志銀行"},{code:"073",name:"東亞銀行"},{code:"081",name:"匯豐銀行"},{code:"101",name:"稻江商銀"},{code:"102",name:"華泰商業銀行"},{code:"103",name:"新光商業銀行"},{code:"108",name:"陽信商業銀行"},{code:"118",name:"板信商業銀行"},{code:"147",name:"三信商業銀行"},{code:"700",name:"中華郵政"},{code:"803",name:"聯邦商業銀行"},{code:"805",name:"遠東商業銀行"},{code:"806",name:"元大銀行"},{code:"807",name:"永豐銀行"},{code:"808",name:"玉山商業銀行"},{code:"809",name:"萬泰商業銀行"},{code:"810",name:"星展銀行"},{code:"812",name:"台新國際商業銀行"},{code:"815",name:"日盛國際商業銀行"},{code:"816",name:"安泰商業銀行"},{code:"822",name:"中國信託商業銀行"}],Pl=K(()=>Nl.map(a=>({title:`(${a.code}) ${a.name}`,value:a.code}))),Rl=async a=>{var e,o;if(ve.value!==a){c.value=!0;try{const{data:f}=await O.patch(`/user/${q.value.id}`,{formStatus:a});if(f.success){ve.value.value=a;const S=ne.value.findIndex(u=>u._id===q.value.id);S!==-1&&(ne.value[S].formStatus=a),da.value++,h({text:"表單狀態更新成功",snackbarProps:{color:"teal-lighten-1"}})}else throw new Error(f.message||"更新失敗")}catch(f){console.error("更新表單狀態失敗:",f),h({text:((o=(e=f.response)==null?void 0:e.data)==null?void 0:o.message)||"更新表單狀態失敗",snackbarProps:{color:"error"}})}finally{c.value=!1}}},ya=m("basic"),Da=m(!1),Va=m(!1),Sa=m(!1),Ia=m(!1),ka=m(!1),ha=m(!1),xa=m(!1),Ma=m(null),Ca=m(""),Ta=m(!1),Ee=m(!1),q=m({open:!1,id:""}),Ya=m(null),Ga=m(null),te=m({open:!1,userId:"",userName:"",loading:!1}),j=m(null),B=m([]),El=m([]),Ka=m(Object.entries(rl).map(([a,e])=>({value:Number(a),title:e}))),Ul=K(()=>[...wa.value].sort((a,e)=>{const o=a.companyId||"",f=e.companyId||"";return o.localeCompare(f)}).map(a=>({title:`${a.name} (${a.companyId})`,value:a._id}))),wa=m([]),Al=K(()=>[...[...wa.value].sort((a,e)=>{const o=a.companyId||"",f=e.companyId||"";return o.localeCompare(f)}).map(a=>({title:`${a.name} (${a.companyId})`,value:a._id}))]),Qa=m([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),$l=m([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),Bl=K(()=>E.value?"1280":de.value?"1080":x.value?"800":X.value?"600":"100%"),Ml=cl({dependentName:p().required("請輸入受保人姓名"),dependentRelationship:p(),dependentBirthDate:F().nullable().required("請輸入受保人生日"),dependentIDNumber:p().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入受保人身分證號碼"),dependentInsuranceStartDate:F().nullable(),dependentInsuranceEndDate:F().nullable()}),Tl=cl({email:p().required("請輸入公司 email").email("請輸入正確的 email 格式"),personalEmail:p().email("請輸入正確的 email 格式").nullable(),IDNumber:p().matches(/^[A-Za-z][12]\d{8}$/,"身分證格式錯誤").required("請輸入身分證號碼"),gender:p().required("請選擇姓別"),name:p().required("請輸入姓名"),englishName:p().nullable(),phoneNumber:p().nullable(),cellphone:p().nullable().test("is-valid-cellphone","手機號碼格式錯誤",a=>a?/^09\d{8}$/.test(a):!0),salary:p().nullable(),extNumber:p().nullable(),printNumber:p().nullable(),birthDate:F().nullable().required("請選擇生日"),permanentAddress:p().required("請輸入戶籍地址"),contactAddress:p().required("請輸入聯絡地址"),company:p().required("請選擇所屬公司"),department:p().required("請選擇部門"),jobTitle:p().nullable(),role:qa().required("請選擇使用者身分別"),cowellAccount:p().nullable(),cowellPassword:p().nullable(),userId:p(),employmentStatus:p().required("請選擇任職狀態"),hireDate:F().nullable().required("請選擇入職日期"),resignationDate:F().nullable(),emergencyName:p().nullable(),emergencyPhoneNumber:p().nullable(),emergencyCellphone:p().nullable().test("is-valid-cellphone","手機號碼格式錯誤",a=>a?/^09\d{8}$/.test(a):!0),emergencyRelationship:p().nullable(),note:p().nullable(),healthInsuranceStartDate:F().nullable(),healthInsuranceEndDate:F().nullable(),laborInsuranceStartDate:F().nullable(),laborInsuranceEndDate:F().nullable(),salaryBank:p().nullable(),salaryBankBranch:p().nullable(),salaryAccountNumber:p().nullable(),guideLicense:pl().of(qa().oneOf([0,1,2,3,4],"導遊證類型必須是 0, 1, 2, 3,4 之一")).default([]),tourManager:gl().nullable(),YSRCAccount:p().nullable(),YSRCPassword:p().nullable(),YS168Account:p().nullable(),YS168Password:p().nullable(),disabilityStatus:p().nullable(),indigenousStatus:gl().nullable(),voluntaryPensionRate:qa().nullable().transform((a,e)=>e===""?null:a),voluntaryPensionStartDate:F().nullable(),voluntaryPensionEndDate:F().nullable(),dependentInsurance:pl().of(Ml).default([]),tourismReportDate:F().nullable(),formStatus:p().nullable()}),{handleSubmit:Yl,isSubmitting:Oa,resetForm:Xa}=Vt({validationSchema:Tl,initialValues:{email:"",personalEmail:"",IDNumber:"",gender:"男性",name:"",englishName:"",phoneNumber:"",cellphone:"",salary:"",extNumber:"",printNumber:"",birthDate:null,permanentAddress:"",contactAddress:"",company:"",department:"",jobTitle:"",role:0,cowellAccount:"",cowellPassword:"",userId:"",employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyPhoneNumber:"",emergencyCellphone:"",emergencyRelationship:"",note:"",healthInsuranceStartDate:null,healthInsuranceEndDate:null,laborInsuranceStartDate:null,laborInsuranceEndDate:null,salaryBank:"008",salaryBankBranch:"",salaryAccountNumber:"",guideLicense:[],tourManager:!1,YSRCAccount:"",YSRCPassword:"",YS168Account:"",YS168Password:"",disabilityStatus:"否",indigenousStatus:!1,voluntaryPensionRate:null,voluntaryPensionStartDate:null,voluntaryPensionEndDate:null,dependentInsurance:[],tourismReportDate:null,formStatus:"尚未完成"},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:K(()=>({isEditing:y.value}))}),Ue=d("email"),Ae=d("personalEmail"),we=d("IDNumber"),ie=d("gender"),$e=d("name"),Be=d("englishName"),Me=d("phoneNumber"),Te=d("cellphone"),Ye=d("salary"),Oe=d("extNumber"),Le=d("printNumber"),pe=d("birthDate"),ge=d("permanentAddress"),Ne=d("contactAddress"),be=d("company",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),fe=d("department",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),ze=d("jobTitle"),je=d("role"),_e=d("cowellAccount"),qe=d("cowellPassword"),Fe=d("userId",void 0,{validateOnValueUpdate:!1,transform:a=>a??""}),ye=d("employmentStatus"),me=d("hireDate"),se=d("resignationDate"),Je=d("emergencyName"),He=d("emergencyPhoneNumber"),We=d("emergencyCellphone"),Ze=d("emergencyRelationship"),Ge=d("note"),De=d("healthInsuranceStartDate"),Ve=d("healthInsuranceEndDate"),Se=d("laborInsuranceStartDate"),Ie=d("laborInsuranceEndDate"),Ke=d("salaryBank"),Qe=d("salaryBankBranch"),Xe=d("salaryAccountNumber"),ea=d("guideLicense"),aa=d("tourManager"),la=d("YSRCAccount"),ta=d("YSRCPassword"),na=d("YS168Account"),sa=d("YS168Password"),ua=d("disabilityStatus"),ra=d("indigenousStatus"),oa=d("voluntaryPensionRate"),ke=d("voluntaryPensionStartDate"),he=d("voluntaryPensionEndDate"),el=d("dependentInsurance"),xe=d("tourismReportDate"),ve=d("formStatus"),{rocDate:Ol}=ae(pe),{rocDate:Ll}=ae(me),{rocDate:zl}=ae(se),{rocDate:jl}=ae(De),{rocDate:_l}=ae(Ve),{rocDate:ql}=ae(Se),{rocDate:Fl}=ae(Ie),{rocDate:Jl}=ae(ke),{rocDate:Hl}=ae(he),{rocDate:Wl}=ae(xe),Na=m(10),Pa=m([{key:"userId",order:"asc"}]),_=m(1),ne=m([]),da=m(0),ia=[{title:"員工編號",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"表單狀態",align:"left",sortable:!0,key:"formStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],Pe=m(!0),La=m(0),al=m(""),i=m({}),ma=m(""),Zl=a=>rl[a]||"未知",U=a=>a?new Date(a):null,Gl=K(()=>L.isSuperAdmin||L.isHR||L.isAdmin),Kl=K(()=>["xl","xxl"].includes(ee.value)?ia:["lg"].includes(ee.value)?ia.filter(a=>a.key!=="employmentStatus"&&a.key!=="cellphone"):["md"].includes(ee.value)?ia.filter(a=>a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"&&a.key!=="formStatus"):["sm"].includes(ee.value)?ia.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"&&a.key!=="formStatus"):ia.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="role"&&a.key!=="employmentStatus"&&a.key!=="formStatus")),Ql=async()=>{try{const{data:a}=await O.get("/department/all");El.value=a.result}catch(a){console.error("加載部門失敗",a),h({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},Xl=async()=>{try{const{data:a}=await O.get("/company/all");a.success&&(wa.value=a.result)}catch(a){console.error("載入公司列表失敗:",a),h({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},et=async()=>{if(!i.value.companyId){B.value=[];return}try{const{data:a}=await O.get("/department/all",{params:{companyId:i.value.companyId}});a.success?B.value=a.result||[]:(console.warn("找不到該公司的部門"),B.value=[])}catch(a){console.error("載入部門失敗:",a),h({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),B.value=[]}},ce=async(a,e)=>{a?_.value=1:e&&(_.value=e),await Ra()},Ra=async()=>{var a,e,o,f;Pe.value=!0;try{const S=C=>{if(C==="是")return!0;if(C==="否")return!1},u={page:_.value,itemsPerPage:Na.value,sortBy:((a=Pa.value[0])==null?void 0:a.key)||"userId",sortOrder:((e=Pa.value[0])==null?void 0:e.order)||"asc",quickSearch:ma.value,...i.value,department:i.value.department,indigenousStatus:S(i.value.indigenousStatus),tourManager:S(i.value.tourManager)};Object.keys(u).forEach(C=>{u[C]===void 0&&delete u[C]}),i.value.dateType&&i.value.dateRange&&i.value.dateRange.length>0&&(u.dateType=i.value.dateType,u.startDate=i.value.dateRange[0].toISOString(),u.endDate=i.value.dateRange[i.value.dateRange.length-1].toISOString()),console.log("Query params:",u);const{data:l}=await O.get("/user/search",{params:u});l.success&&(ne.value=l.result.data,La.value=l.result.totalItems)}catch(S){console.error("搜索失败:",S),h({text:((f=(o=S==null?void 0:S.response)==null?void 0:o.data)==null?void 0:f.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{Pe.value=!1}},at=async()=>{var a,e;try{te.value.loading=!0,await O.post(`/user/${te.value.userId}/send-initial-password`);const o=ne.value.findIndex(f=>f._id===te.value.userId);o!==-1&&(ne.value[o].isFirstLogin=!1),h({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),tl()}catch(o){console.error("發送初始密碼失敗:",o),h({text:((e=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:e.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{te.value.loading=!1}},lt=Yl(async a=>{var e,o,f,S;try{if(!j.value){be.errorMessage.value="請選擇公司",h({text:"請選擇公司",snackbarProps:{color:"red-lighten-1"}});return}if(y.value){const u=_.value,l={...a,company:j.value,dependentInsurance:$.value,healthInsuranceStartDate:a.healthInsuranceStartDate,healthInsuranceEndDate:a.healthInsuranceEndDate,laborInsuranceStartDate:a.laborInsuranceStartDate,laborInsuranceEndDate:a.laborInsuranceEndDate,voluntaryPensionStartDate:a.voluntaryPensionStartDate,voluntaryPensionEndDate:a.voluntaryPensionEndDate,birthDate:a.birthDate,hireDate:a.hireDate,tourismReportDate:a.tourismReportDate,resignationDate:a.resignationDate},{data:C}=await O.patch(`/user/${q.value.id}`,l),Y=ne.value.findIndex(R=>R._id===q.value.id);Y!==-1&&(ne.value[Y]={...C.result,company:wa.value.find(R=>R._id===j.value),department:{_id:a.department,name:((e=B.value.find(R=>R._id===a.department))==null?void 0:e.name)||""}}),await ce(!1,u)}else{const u={...a,company:j.value,dependentInsurance:$.value};console.log("送出的資料:",{email:u.email,personalEmail:u.personalEmail,name:u.name,englishName:u.englishName,gender:u.gender,IDNumber:u.IDNumber,phoneNumber:u.phoneNumber,cellphone:u.cellphone,birthDate:u.birthDate,permanentAddress:u.permanentAddress,contactAddress:u.contactAddress,emergencyName:u.emergencyName,emergencyPhoneNumber:u.emergencyPhoneNumber,emergencyCellphone:u.emergencyCellphone,emergencyRelationship:u.emergencyRelationship,company:u.company,department:u.department,jobTitle:u.jobTitle,role:u.role,employmentStatus:u.employmentStatus,hireDate:u.hireDate,salary:u.salary,formStatus:u.formStatus,extNumber:u.extNumber,printNumber:u.printNumber,cowellAccount:u.cowellAccount,cowellPassword:u.cowellPassword,YSRCAccount:u.YSRCAccount,YSRCPassword:u.YSRCPassword,YS168Account:u.YS168Account,YS168Password:u.YS168Password,guideLicense:u.guideLicense,tourManager:u.tourManager,disabilityStatus:u.disabilityStatus,indigenousStatus:u.indigenousStatus,healthInsuranceStartDate:u.healthInsuranceStartDate,healthInsuranceEndDate:u.healthInsuranceEndDate,laborInsuranceStartDate:u.laborInsuranceStartDate,laborInsuranceEndDate:u.laborInsuranceEndDate,voluntaryPensionRate:u.voluntaryPensionRate,voluntaryPensionStartDate:u.voluntaryPensionStartDate,voluntaryPensionEndDate:u.voluntaryPensionEndDate,tourismReportDate:u.tourismReportDate,salaryBank:u.salaryBank,salaryBankBranch:u.salaryBankBranch,salaryAccountNumber:u.salaryAccountNumber,dependentInsurance:u.dependentInsurance}),await O.post("/user",u),await ce(!0)}await Promise.all([(o=Ma.value)==null?void 0:o.refreshChart(),(f=Ya.value)==null?void 0:f.refreshChart(),(S=Ga.value)==null?void 0:S.refreshData()]),h({text:y.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),za()}catch(u){const l=tt(u);h({text:l,snackbarProps:{color:"red-lighten-1"}})}}),tt=a=>a.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[a.response.data.message]||a.response.data.message:"發生錯誤",ll=async a=>{var e,o;if(Ee.value=!0,!Gl.value){h({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}Ee.value=!0,Ta.value=!0,fa.value=_.value,q.value.open=!0,a?(y.value=!0,q.value.id=a._id,a.company&&(j.value=a.company._id,be.value.value=a.company._id,await va(a.company._id),a.department&&a.department._id&&(fe.value.value=a.department._id)),Ue.value.value=a.email,Ae.value.value=a.personalEmail,$e.value.value=a.name,Be.value.value=a.englishName,ie.value.value=a.gender,we.value.value=a.IDNumber,Me.value.value=a.phoneNumber,Te.value.value=a.cellphone,pe.value.value=U(a.birthDate),ge.value.value=a.permanentAddress,Ne.value.value=a.contactAddress,Je.value.value=a.emergencyName,He.value.value=a.emergencyPhoneNumber,We.value.value=a.emergencyCellphone,Ze.value.value=a.emergencyRelationship,Fe.value.value=a.userId??"",ze.value.value=a.jobTitle,Ye.value.value=a.salary,je.value.value=a.role,Oe.value.value=a.extNumber,Le.value.value=a.printNumber,ye.value.value=a.employmentStatus,me.value.value=U(a.hireDate),se.value.value=U(a.resignationDate),Ge.value.value=a.note??"",ve.value.value=a.formStatus,_e.value.value=a.cowellAccount,qe.value.value=a.cowellPassword,la.value.value=a.YSRCAccount,ta.value.value=a.YSRCPassword,na.value.value=a.YS168Account,sa.value.value=a.YS168Password,ea.value.value=a.guideLicense,aa.value.value=a.tourManager,ua.value.value=a.disabilityStatus,ra.value.value=a.indigenousStatus,De.value.value=U(a.healthInsuranceStartDate),Ve.value.value=U(a.healthInsuranceEndDate),Se.value.value=U(a.laborInsuranceStartDate),Ie.value.value=U(a.laborInsuranceEndDate),oa.value.value=a.voluntaryPensionRate,ke.value.value=U(a.voluntaryPensionStartDate),he.value.value=U(a.voluntaryPensionEndDate),xe.value.value=U(a.tourismReportDate),Ke.value.value=a.salaryBank,Qe.value.value=a.salaryBankBranch,Xe.value.value=a.salaryAccountNumber,$.value=a.dependentInsurance||[],el.value.value=a.dependentInsurance||[],v.value={email:a.email,personalEmail:a.personalEmail,name:a.name,englishName:a.englishName,gender:a.gender,IDNumber:a.IDNumber,phoneNumber:a.phoneNumber,cellphone:a.cellphone,birthDate:U(a.birthDate),permanentAddress:a.permanentAddress,contactAddress:a.contactAddress,emergencyName:a.emergencyName,emergencyPhoneNumber:a.emergencyPhoneNumber,emergencyCellphone:a.emergencyCellphone,emergencyRelationship:a.emergencyRelationship,company:(e=a.company)==null?void 0:e._id,department:(o=a.department)==null?void 0:o._id,userId:a.userId??"",jobTitle:a.jobTitle,salary:a.salary,role:a.role,extNumber:a.extNumber,printNumber:a.printNumber,employmentStatus:a.employmentStatus,hireDate:U(a.hireDate),resignationDate:U(a.resignationDate),note:a.note??"",formStatus:a.formStatus,cowellAccount:a.cowellAccount,cowellPassword:a.cowellPassword,YSRCAccount:a.YSRCAccount,YSRCPassword:a.YSRCPassword,YS168Account:a.YS168Account,YS168Password:a.YS168Password,guideLicense:a.guideLicense??[],tourManager:a.tourManager,disabilityStatus:a.disabilityStatus,indigenousStatus:a.indigenousStatus,healthInsuranceStartDate:U(a.healthInsuranceStartDate),healthInsuranceEndDate:U(a.healthInsuranceEndDate),laborInsuranceStartDate:U(a.laborInsuranceStartDate),laborInsuranceEndDate:U(a.laborInsuranceEndDate),voluntaryPensionRate:a.voluntaryPensionRate,voluntaryPensionStartDate:U(a.voluntaryPensionStartDate),voluntaryPensionEndDate:U(a.voluntaryPensionEndDate),tourismReportDate:U(a.tourismReportDate),salaryBank:a.salaryBank,salaryBankBranch:a.salaryBankBranch,salaryAccountNumber:a.salaryAccountNumber,dependentInsurance:a.dependentInsurance||[]},console.log("originalData:",v.value),localStorage.setItem("userTablePage",_.value.toString())):(y.value=!1,q.value.id="",v.value=null,j.value=null,B.value=[],$.value=[],el.value.value=[],Xa(),me.value.value=new Date),setTimeout(()=>{Ee.value=!1,Ta.value=!1},300)},za=()=>{q.value.open=!1,j.value=null,B.value=[],v.value=null,$.value=[],Xa()},nt=a=>{te.value={open:!0,userId:a._id,userName:a.name,loading:!1}},tl=()=>{te.value={open:!1,userId:"",userName:"",loading:!1}},st=async()=>{var a,e,o,f,S;try{Pe.value=!0,await O.delete(`/user/${q.value.id}`),za(),await ce(!0),await((a=Ma.value)==null?void 0:a.refreshChart()),await((e=Ya.value)==null?void 0:e.refreshChart()),await((o=Ga.value)==null?void 0:o.refreshData()),h({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(u){console.error("Delete user error:",u),h({text:((S=(f=u==null?void 0:u.response)==null?void 0:f.data)==null?void 0:S.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{Pe.value=!1,D.value=!1}},ut=()=>{ge.value.value&&(Ne.value.value=ge.value.value)},rt=a=>{a<1&&(a=1);const e=Math.ceil(La.value/Na.value);a>e&&(a=e),_.value!==a&&(_.value=a,localStorage.removeItem("userTablePage"),ce(!1))},ot=()=>{i.value={role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[],indigenousStatus:"",tourManager:"",guideLicense:"",disabilityStatus:"",formStatus:""},B.value=[],al.value="",ma.value="",_.value=1,Ra()},dt=K(()=>{if(!y.value)return!0;if(!v.value)return!1;const a={email:Ue.value.value,personalEmail:Ae.value.value,name:$e.value.value,englishName:Be.value.value,gender:ie.value.value,IDNumber:we.value.value,permanentAddress:ge.value.value,contactAddress:Ne.value.value,phoneNumber:Me.value.value,cellphone:Te.value.value,emergencyName:Je.value.value,emergencyPhoneNumber:He.value.value,emergencyCellphone:We.value.value,emergencyRelationship:Ze.value.value,birthDate:pe.value.value,hireDate:me.value.value,resignationDate:se.value.value,healthInsuranceStartDate:De.value.value,healthInsuranceEndDate:Ve.value.value,laborInsuranceStartDate:Se.value.value,laborInsuranceEndDate:Ie.value.value,voluntaryPensionStartDate:ke.value.value,voluntaryPensionEndDate:he.value.value,tourismReportDate:xe.value.value,company:j.value,department:fe.value.value,jobTitle:ze.value.value,role:je.value.value,extNumber:Oe.value.value,printNumber:Le.value.value,employmentStatus:ye.value.value,salary:Ye.value.value,note:Ge.value.value??"",tourManager:aa.value.value,guideLicense:ea.value.value,disabilityStatus:ua.value.value,indigenousStatus:ra.value.value,voluntaryPensionRate:oa.value.value,salaryBank:Ke.value.value,salaryBankBranch:Qe.value.value,salaryAccountNumber:Xe.value.value,cowellAccount:_e.value.value,cowellPassword:qe.value.value,YSRCAccount:la.value.value,YSRCPassword:ta.value.value,YS168Account:na.value.value,YS168Password:sa.value.value,userId:Fe.value.value,formStatus:ve.value.value},e=["email","personalEmail","name","englishName","gender","IDNumber","permanentAddress","contactAddress","phoneNumber","cellphone"].some(u=>v.value[u]!==a[u]),o=["birthDate","hireDate","resignationDate","healthInsuranceStartDate","healthInsuranceEndDate","laborInsuranceStartDate","laborInsuranceEndDate","voluntaryPensionStartDate","voluntaryPensionEndDate","tourismReportDate"].some(u=>{const l=v.value[u]?new Date(v.value[u]).getTime():null,C=a[u]?new Date(a[u]).getTime():null;return l!==C}),f=(()=>{const u=v.value.dependentInsurance||[],l=$.value||[];return u.length!==l.length?(console.log("Dependents length changed"),!0):l.some((C,Y)=>{const R=u[Y];return R?["dependentName","dependentIDNumber","dependentRelationship","dependentBirthDate","dependentInsuranceStartDate","dependentInsuranceEndDate"].some(Z=>{if(Z.includes("Date")){const sl=R[Z]?new Date(R[Z]).getTime():null,ul=C[Z]?new Date(C[Z]).getTime():null;return console.log(`Comparing ${Z}:`,sl,ul),sl!==ul}else return console.log(`Comparing ${Z}:`,R[Z],C[Z]),R[Z]!==C[Z]}):!0})})();console.log("Dependents changed:",f);const S=["company","department","jobTitle","role","extNumber","printNumber","employmentStatus","salary","note","tourManager","guideLicense","disabilityStatus","indigenousStatus","voluntaryPensionRate","salaryBank","salaryBankBranch","salaryAccountNumber","emergencyName","emergencyPhoneNumber","emergencyCellphone","emergencyRelationship","cowellAccount","cowellPassword","YSRCAccount","YSRCPassword","YS168Account","YS168Password","userId","formStatus"].some(u=>Array.isArray(v.value[u])?JSON.stringify(v.value[u])!==JSON.stringify(a[u]):v.value[u]!==a[u]);return console.log("Changes detected:",{basicInfoChanged:e,datesChanged:o,dependentsChanged:f,otherFieldsChanged:S}),e||o||f||S}),va=async a=>{var e;try{if(q.value.open?j.value=a:i.value={...i.value,companyId:a,department:""},!a){B.value=[];return}console.log("正在載入公司ID的部門:",a);const{data:o}=await O.get("/department/all",{params:{companyId:a,itemsPerPage:100}});console.log("API 返回的部門數據:",o),o.success?(B.value=((e=o.result)==null?void 0:e.data)||[],console.log("設置過濾後的部門列表:",B.value)):(console.warn("找不到該公司的部門"),B.value=[])}catch(o){console.error("載入部門失敗:",o),h({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),B.value=[]}},it=vl.debounce(a=>{ce(!0)},300),nl=vl.debounce(a=>{_.value=1,Ra()},300);return le(ma,a=>{nl(a)}),le(j,async a=>{a!=null?(be.value.value=a,fe.value.value="",await va(a)):(be.value.value=null,fe.value.value="",B.value=[])}),le(()=>i.value.companyId,async a=>{a?await va(a):B.value=[]}),le(()=>i.value.dateRange,a=>{console.log("選擇的日期區間:",a)}),le(be.value,a=>{a&&a.value!==null&&a.value!==void 0&&(j.value=a.value)}),le(ye.value,a=>{Ee.value||(a==="離職"?xa.value=!0:(xa.value=!1,se.value.value=null))}),le(()=>we.value.value,a=>{if(!a){ie.value.value=null,Ca.value="";return}if(a.length===10&&a!==Ca.value&&!Ta.value&&/^[A-Za-z][12]\d{8}$/.test(a)){const o=a.charAt(1);o==="1"?(ie.value.value="男性",Ca.value=a,h({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):o==="2"&&(ie.value.value="女性",Ca.value=a,h({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),ol(async()=>{const a=localStorage.getItem("userTablePage");a&&(_.value=parseInt(a),da.value++),await Xl(),await Ql(),await et(),await ce(!0)}),ol(()=>{const a=localStorage.getItem("userTablePage");a&&parseInt(a)>0?(_.value=parseInt(a),da.value++,localStorage.removeItem("userTablePage")):_.value=1}),gt(()=>{it.cancel(),nl.cancel()}),(a,e)=>{var f,S,u;const o=Dl("v-date-input");return k(),H(Re,null,[t(Ct,{"max-width":"2500"},{default:s(()=>[t(A,{class:"py-0 mt-2 ma-sm-1 ma-md-6"},{default:s(()=>[n(E)?(k(),T(r,{key:0,class:"ps-4 pe-6 py-0"},{default:s(()=>[t(It,{ref_key:"chartRef",ref:Ma},null,512)]),_:1})):z("",!0),n(de)?(k(),T(r,{key:1,class:"ps-4 pe-6 py-0"},{default:s(()=>[t(kt,{ref_key:"turnoverChartRef",ref:Ya},null,512)]),_:1})):z("",!0),t(r,{cols:"12",lg:"6",xl:"5",class:"pa-0 mb-6 mb-sm-0"},{default:s(()=>[t($a,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-3 pb-4 pb-sm-5",elevation:"4",rounded:"lg",height:"100%"},{default:s(()=>[t(ca,{class:"d-flex align-center"},{default:s(()=>[t(A,{class:"h-100"},{default:s(()=>[t(r,{cols:"12",class:"d-flex flex-column justify-center"},{default:s(()=>[t(A,null,{default:s(()=>e[93]||(e[93]=[N("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),t(A,null,{default:s(()=>[t(r,{cols:"12",sm:"4"},{default:s(()=>[t(pa,{modelValue:i.value.companyId,"onUpdate:modelValue":[e[0]||(e[0]=l=>i.value.companyId=l),va],items:Al.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:"",filter:(l,C)=>{const Y=`${l.title}`.toLowerCase(),R=C.toLowerCase();return Y.includes(R)}},null,8,["modelValue","items","filter"])]),_:1}),t(r,{cols:"12",sm:"4"},{default:s(()=>[t(pa,{modelValue:i.value.department,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value.department=l),items:B.value,label:"部門","item-title":l=>l!=null&&l.name&&(l!=null&&l.departmentId)?`${l.name} (${l.departmentId})`:"","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!i.value.companyId,loading:!B.value.length&&!!i.value.companyId,filter:(l,C)=>{const Y=l!=null&&l.name&&(l!=null&&l.departmentId)?`${l.name} ${l.departmentId}`.toLowerCase():"",R=C.toLowerCase();return Y.includes(R)},"no-data-text":"找不到相關部門"},null,8,["modelValue","items","item-title","disabled","loading","filter"])]),_:1}),t(r,{cols:"12",sm:"4"},{default:s(()=>[t(J,{modelValue:i.value.role,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value.role=l),items:Ka.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(A,null,{default:s(()=>[t(r,{cols:"12",sm:"4"},{default:s(()=>[t(J,{modelValue:i.value.employmentStatus,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value.employmentStatus=l),items:Qa.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),t(r,{cols:"12",sm:"4"},{default:s(()=>[t(J,{modelValue:i.value.guideLicense,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value.guideLicense=l),items:xl,label:"導遊領隊證","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",sm:"4"},{default:s(()=>[t(J,{modelValue:i.value.disabilityStatus,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.disabilityStatus=l),items:wl,label:"身心障礙身份","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(A,{class:"d-flex align-center"},{default:s(()=>[t(r,{cols:"12",sm:"4"},{default:s(()=>[t(J,{modelValue:i.value.formStatus,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.formStatus=l),items:Cl,label:"表單狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(r,null,{default:s(()=>[t(A,{class:"border rounded"},{default:s(()=>[t(r,{cols:"12",sm:"6",class:"pa-2"},{default:s(()=>[t(J,{modelValue:i.value.dateType,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value.dateType=l),items:Vl.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),t(r,{cols:"12",sm:"6",class:"pa-2"},{default:s(()=>[t(o,{modelValue:i.value.dateRange,"onUpdate:modelValue":e[8]||(e[8]=l=>i.value.dateRange=l),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","ok-text":"確認","cancel-text":"取消"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(A,{class:"mt-5"},{default:s(()=>[t(r,{cols:"6",sm:"4",class:"pe-0 py-0"},{default:s(()=>[N("div",Lt,[e[96]||(e[96]=N("label",{class:"text-grey-darken-1 search-label"},"原住民身分",-1)),t(ja,{modelValue:i.value.indigenousStatus,"onUpdate:modelValue":e[9]||(e[9]=l=>i.value.indigenousStatus=l),column:"",class:"custom-chip-group"},{default:s(()=>[t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"是",label:""},{default:s(()=>e[94]||(e[94]=[g(" 是 ")])),_:1}),t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"否",label:""},{default:s(()=>e[95]||(e[95]=[g(" 否 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(r,{cols:"6",sm:"4",class:"pe-0 py-0"},{default:s(()=>[N("div",zt,[e[99]||(e[99]=N("label",{class:"text-grey-darken-1 search-label"},"旅遊經理人",-1)),t(ja,{modelValue:i.value.tourManager,"onUpdate:modelValue":e[10]||(e[10]=l=>i.value.tourManager=l),column:"",class:"custom-chip-group"},{default:s(()=>[t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"是",label:""},{default:s(()=>e[97]||(e[97]=[g(" 是 ")])),_:1}),t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"否",label:""},{default:s(()=>e[98]||(e[98]=[g(" 否 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(r,{cols:"12",sm:"4",class:"pe-0 py-0"},{default:s(()=>[N("div",jt,[e[102]||(e[102]=N("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),t(ja,{modelValue:i.value.gender,"onUpdate:modelValue":e[11]||(e[11]=l=>i.value.gender=l),column:"",class:"custom-chip-group"},{default:s(()=>[t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:s(()=>e[100]||(e[100]=[g(" 男性 ")])),_:1}),t(re,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:s(()=>e[101]||(e[101]=[g(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(A,null,{default:s(()=>[t(_a),t(r,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[t(A,null,{default:s(()=>[t(r,{cols:"3"},{default:s(()=>[t(Q,{color:"grey",block:"",onClick:ot},{default:s(()=>[t(oe,null,{default:s(()=>e[103]||(e[103]=[g("mdi-refresh")])),_:1})]),_:1})]),_:1}),t(r,null,{default:s(()=>[t(Q,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:Pe.value,block:"",onClick:e[12]||(e[12]=()=>{console.log("Current search criteria:",i.value.value),Ra()})},{default:s(()=>e[104]||(e[104]=[g(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(A,{class:"elevation-4 rounded-lg py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:s(()=>[t(r,{cols:"12",class:"ps-3 pb-6"},{default:s(()=>e[105]||(e[105]=[N("h3",null," 員工管理 ",-1)])),_:1}),t(r,{cols:"12"},{default:s(()=>[t(A,null,{default:s(()=>[t(r,null,{default:s(()=>[t(A,null,{default:s(()=>[t(r,null,{default:s(()=>[t(Q,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:e[13]||(e[13]=l=>ll(null))},{default:s(()=>e[106]||(e[106]=[g(" 新增使用者 ")])),_:1})]),_:1}),t(r,{sm:"4",lg:"3",xl:"2"},{default:s(()=>[t(A,{class:"d-flex align-center"},{default:s(()=>[n(x)?(k(),T(r,{key:0,cols:"2",class:"ps-lg-5"},{default:s(()=>[Ea(t(oe,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[Aa,"可搜尋員編、姓名、個人Email、公司Email、手機、分機、職稱、地址、備註","start"]])]),_:1})):z("",!0),t(r,null,{default:s(()=>[t(I,{modelValue:ma.value,"onUpdate:modelValue":e[14]||(e[14]=l=>ma.value=l),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(r,{cols:"12"},{default:s(()=>[(k(),T(wt,{key:da.value,"items-per-page":Na.value,"onUpdate:itemsPerPage":[e[15]||(e[15]=l=>Na.value=l),e[17]||(e[17]=l=>ce(!1))],"sort-by":Pa.value,"onUpdate:sortBy":[e[16]||(e[16]=l=>Pa.value=l),e[18]||(e[18]=l=>ce(!1))],page:_.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:ne.value,headers:Kl.value,"header-props":b,loading:Pe.value,"items-length":La.value,search:al.value,hover:"","onUpdate:page":rt},{item:s(({item:l,index:C})=>{var Y,R;return[N("tr",{class:ft({"odd-row":C%2===0,"even-row":C%2!==0})},[N("td",null,M(l.userId),1),N("td",null,M(l.name),1),n(de)?(k(),H("td",_t,M(l.email),1)):z("",!0),n(E)?(k(),H("td",qt,M(l.cellphone),1)):z("",!0),n(x)?(k(),H("td",Ft,M(((Y=l.company)==null?void 0:Y.name)||""),1)):z("",!0),n(x)?(k(),H("td",Jt,M(((R=l.department)==null?void 0:R.name)||""),1)):z("",!0),N("td",null,M(l.extNumber),1),n(X)?(k(),H("td",Ht,M(Zl(l.role)),1)):z("",!0),n(E)?(k(),H("td",Wt,M(l.employmentStatus),1)):z("",!0),n(de)?(k(),H("td",Zt,[t(il,null,{activator:s(({props:ue})=>[Ea((k(),T(re,Ua(ue,{color:Wa(l.formStatus),variant:"outlined",size:"small",label:"",loading:l._id===V.value,disabled:l._id===V.value}),{default:s(()=>[g(M(l.formStatus),1)]),_:2},1040,["color","loading","disabled"])),[[Aa,"更改表單狀態"]])]),default:s(()=>[t(bl,null,{default:s(()=>[(k(),H(Re,null,Ba(Za,ue=>t(fl,{key:ue,active:l.formStatus===ue,onClick:Z=>Ce(l._id,ue)},{default:s(()=>[t(yl,null,{default:s(()=>[g(M(ue),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:2},1024)]),_:2},1024)])):z("",!0),N("td",Gt,[t(Q,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:W.value,ripple:!1,onClick:ue=>ll(l)},{default:s(()=>[t(oe,null,{default:s(()=>e[107]||(e[107]=[g("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),l.isFirstLogin?Ea((k(),T(Q,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:W.value,ripple:!1,onClick:ue=>nt(l)},{default:s(()=>[t(oe,null,{default:s(()=>e[108]||(e[108]=[g("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[Aa,"發送初始密碼"]]):z("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(dl,{modelValue:te.value.open,"onUpdate:modelValue":e[19]||(e[19]=l=>te.value.open=l),persistent:"","max-width":"360"},{default:s(()=>[t($a,{class:"rounded-lg pa-4"},{default:s(()=>[e[113]||(e[113]=N("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),N("div",Kt,[e[109]||(e[109]=g(" 確定要發送系統生成的初始密碼給 ")),N("span",Qt,M(te.value.userName),1),e[110]||(e[110]=g(" 嗎？ "))]),t(ml,{class:"pa-4 pt-0"},{default:s(()=>[t(_a),t(Q,{color:"grey",variant:"outlined",size:"small",onClick:tl},{default:s(()=>e[111]||(e[111]=[g(" 取消 ")])),_:1}),t(Q,{color:"teal-darken-1",variant:"outlined",size:"small",loading:te.value.loading,onClick:at},{default:s(()=>e[112]||(e[112]=[g(" 確認發送 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(dl,{modelValue:q.value.open,"onUpdate:modelValue":e[88]||(e[88]=l=>q.value.open=l),persistent:"",width:Bl.value},{default:s(()=>[t(Nt,{disabled:n(Oa),onSubmit:yt(n(lt),["prevent"])},{default:s(()=>[t($a,{class:"rounded-lg px-4 py-6"},{default:s(()=>[N("div",Xt,[g(M(q.value.id?"員工資料編輯":"新增員工")+" ",1),t(il,null,{activator:s(({props:l})=>[Ea((k(),T(re,Ua(l,{color:Wa(n(ve).value.value),variant:"outlined",size:W.value,label:"",class:"ml-2",loading:c.value,disabled:c.value}),{default:s(()=>[g(M(n(ve).value.value),1)]),_:2},1040,["color","size","loading","disabled"])),[[Aa,"點擊更改表單狀態","start"]])]),default:s(()=>[t(bl,null,{default:s(()=>[(k(),H(Re,null,Ba(Za,l=>t(fl,{key:l,active:n(ve).value.value===l,onClick:C=>y.value?Rl(l):n(ve).value.value=l},{default:s(()=>[t(yl,null,{default:s(()=>[g(M(l),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:1})]),_:1})]),N("div",en,[t(Pt,{modelValue:ya.value,"onUpdate:modelValue":e[20]||(e[20]=l=>ya.value=l),color:"blue-grey-darken-2","align-tabs":"center","mobile-breakpoint":"sm",density:"compact",height:"40"},{default:s(()=>[t(Fa,{value:"basic",class:"tab-title"},{default:s(()=>[t(oe,{start:""},{default:s(()=>e[114]||(e[114]=[g(" mdi-account-outline ")])),_:1}),e[115]||(e[115]=g(" 個人資訊 "))]),_:1}),t(Fa,{value:"employment",class:"tab-title"},{default:s(()=>[t(oe,{start:""},{default:s(()=>e[116]||(e[116]=[g(" mdi-briefcase-outline ")])),_:1}),e[117]||(e[117]=g(" 任職資訊 "))]),_:1}),t(Fa,{value:"insurance",class:"tab-title"},{default:s(()=>[t(oe,{start:""},{default:s(()=>e[118]||(e[118]=[g(" mdi-shield-account-outline ")])),_:1}),e[119]||(e[119]=g(" 保險及薪轉資訊 "))]),_:1})]),_:1},8,["modelValue"])]),Ee.value&&y.value?(k(),T(ca,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:s(()=>[t(Dt,{indeterminate:"",color:"blue-grey-darken-2",size:w.value},null,8,["size"])]),_:1})):(k(),T(Rt,{key:1,modelValue:ya.value,"onUpdate:modelValue":e[86]||(e[86]=l=>ya.value=l),class:"mx-1 overflow-y-auto"},{default:s(()=>[t(Ja,{value:"basic"},{default:s(()=>[t(ca,{class:"mt-3 pa-3"},{default:s(()=>[t(A,null,{default:s(()=>[t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n($e).value.value,"onUpdate:modelValue":e[21]||(e[21]=l=>n($e).value.value=l),"error-messages":n($e).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Be).value.value,"onUpdate:modelValue":e[22]||(e[22]=l=>n(Be).value.value=l),"error-messages":n(Be).errorMessage.value,label:"英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(we).value.value,"onUpdate:modelValue":e[23]||(e[23]=l=>n(we).value.value=l),"error-messages":n(we).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(ie).value.value,"onUpdate:modelValue":e[24]||(e[24]=l=>n(ie).value.value=l),items:$l.value,"error-messages":n(ie).errorMessage.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(ua).value.value,"onUpdate:modelValue":e[25]||(e[25]=l=>n(ua).value.value=l),"error-messages":n(ua).errorMessage.value,items:Il,"item-title":"title","item-value":"value",label:"身心障礙身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(ra).value.value,"onUpdate:modelValue":e[26]||(e[26]=l=>n(ra).value.value=l),"error-messages":n(ra).errorMessage.value,items:kl,"item-title":"title","item-value":"value",label:"原住民身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(o,{modelValue:n(pe).value.value,"onUpdate:modelValue":e[27]||(e[27]=l=>n(pe).value.value=l),"error-messages":n(pe).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:n(Ol),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[28]||(e[28]=l=>n(pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Me).value.value,"onUpdate:modelValue":e[29]||(e[29]=l=>n(Me).value.value=l),"error-messages":n(Me).errorMessage.value,label:"室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Te).value.value,"onUpdate:modelValue":e[30]||(e[30]=l=>n(Te).value.value=l),"error-messages":n(Te).errorMessage.value,label:"手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"6",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ae).value.value,"onUpdate:modelValue":e[31]||(e[31]=l=>n(Ae).value.value=l),"error-messages":n(Ae).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(ge).value.value,"onUpdate:modelValue":e[32]||(e[32]=l=>n(ge).value.value=l),"error-messages":n(ge).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ne).value.value,"onUpdate:modelValue":e[33]||(e[33]=l=>n(Ne).value.value=l),"error-messages":n(Ne).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":s(()=>[t(Et,{location:"top","close-delay":"200"},{activator:s(({tprops:l})=>[t(oe,Ua(l,{icon:"mdi-content-copy",onClick:ut}),null,16)]),default:s(()=>[e[120]||(e[120]=g(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12"},{default:s(()=>[t(A,{class:"d-flex align-center my-2"},{default:s(()=>[t(r,{cols:"3",sm:"4"},{default:s(()=>[t(ga,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),t(r,{cols:"6",sm:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[121]||(e[121]=[g(" 緊急連絡人資訊 ")])),_:1}),t(r,{cols:"3",sm:"4"},{default:s(()=>[t(ga)]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Je).value.value,"onUpdate:modelValue":e[34]||(e[34]=l=>n(Je).value.value=l),"error-messages":n(Je).errorMessage.value,label:"緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(He).value.value,"onUpdate:modelValue":e[35]||(e[35]=l=>n(He).value.value=l),"error-messages":n(He).errorMessage.value,label:"緊急聯絡人室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(We).value.value,"onUpdate:modelValue":e[36]||(e[36]=l=>n(We).value.value=l),"error-messages":n(We).errorMessage.value,label:"緊急聯絡人手機",type:"text",maxlength:"10",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ze).value.value,"onUpdate:modelValue":e[37]||(e[37]=l=>n(Ze).value.value=l),"error-messages":n(Ze).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Ja,{value:"employment"},{default:s(()=>[t(ca,{class:"mt-3 pa-3"},{default:s(()=>[t(A,null,{default:s(()=>[y.value?(k(),T(r,{key:0,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Fe).value.value,"onUpdate:modelValue":e[38]||(e[38]=l=>n(Fe).value.value=l),"error-messages":n(Fe).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):z("",!0),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-2"},{default:s(()=>[t(pa,{modelValue:j.value,"onUpdate:modelValue":[e[39]||(e[39]=l=>j.value=l),va],"error-messages":n(be).errorMessage.value,items:Ul.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:"",hint:"可輸入公司編號、名稱搜尋","persistent-hint":"",error:!!n(be).errorMessage.value,filter:(l,C)=>{const Y=`${l.title}`.toLowerCase(),R=C.toLowerCase();return Y.includes(R)}},null,8,["modelValue","error-messages","items","error","filter"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(pa,{modelValue:n(fe).value.value,"onUpdate:modelValue":e[40]||(e[40]=l=>n(fe).value.value=l),items:B.value,"error-messages":n(fe).errorMessage.value,"item-title":l=>l!=null&&l.name&&(l!=null&&l.departmentId)?`${l.name} (${l.departmentId})`:"","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:"",hint:"可輸入部門編號、名稱搜尋","persistent-hint":"",loading:!B.value.length&&!!j.value,filter:(l,C)=>{const Y=l!=null&&l.name&&(l!=null&&l.departmentId)?`${l.name} ${l.departmentId}`.toLowerCase():"",R=C.toLowerCase();return Y.includes(R)},"no-data-text":"找不到相關部門"},null,8,["modelValue","items","error-messages","item-title","loading","filter"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(ze).value.value,"onUpdate:modelValue":e[41]||(e[41]=l=>n(ze).value.value=l),"error-messages":n(ze).errorMessage.value,label:"職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(je).value.value,"onUpdate:modelValue":e[42]||(e[42]=l=>n(je).value.value=l),"error-messages":n(je).errorMessage.value,items:Ka.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(o,{modelValue:n(me).value.value,"onUpdate:modelValue":e[43]||(e[43]=l=>n(me).value.value=l),"error-messages":n(me).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:n(Ll),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[44]||(e[44]=l=>n(me).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(ye).value.value,"onUpdate:modelValue":e[45]||(e[45]=l=>n(ye).value.value=l),"error-messages":n(ye).errorMessage.value,items:Qa.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),n(se).value.value?(k(),T(r,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(o,{modelValue:n(se).value.value,"onUpdate:modelValue":e[46]||(e[46]=l=>n(se).value.value=l),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(zl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[47]||(e[47]=l=>n(se).value.value=null)},null,8,["modelValue","hint"])]),_:1})):z("",!0),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Oe).value.value,"onUpdate:modelValue":e[48]||(e[48]=l=>n(Oe).value.value=l),"error-messages":n(Oe).errorMessage.value,label:"分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Le).value.value,"onUpdate:modelValue":e[49]||(e[49]=l=>n(Le).value.value=l),"error-messages":n(Le).errorMessage.value,label:"列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ye).value.value,"onUpdate:modelValue":e[50]||(e[50]=l=>n(Ye).value.value=l),"error-messages":n(Ye).errorMessage.value,label:"基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(J,{modelValue:n(aa).value.value,"onUpdate:modelValue":e[51]||(e[51]=l=>n(aa).value.value=l),"error-messages":n(aa).errorMessage.value,items:Sl,"item-title":"title","item-value":"value",label:"旅遊經理人",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(o,{modelValue:n(xe).value.value,"onUpdate:modelValue":e[52]||(e[52]=l=>n(xe).value.value=l),"error-messages":n(xe).errorMessage.value,label:"觀光局申報到職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Wl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[53]||(e[53]=l=>n(xe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",md:"8",lg:"6",class:"pb-0"},{default:s(()=>[t(Bt,{modelValue:n(ea).value.value,"onUpdate:modelValue":e[54]||(e[54]=l=>n(ea).value.value=l),"error-messages":n(ea).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12"},{default:s(()=>[t(A,{class:"d-flex align-center my-2"},{default:s(()=>[t(r,{cols:"3",sm:"4"},{default:s(()=>[t(ga,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),t(r,{cols:"6",sm:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[122]||(e[122]=[g(" 系統帳號資訊 ")])),_:1}),t(r,{cols:"3",sm:"4"},{default:s(()=>[t(ga,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ue).value.value,"onUpdate:modelValue":e[55]||(e[55]=l=>n(Ue).value.value=l),"error-messages":n(Ue).errorMessage.value,label:"*公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(_e).value.value,"onUpdate:modelValue":e[56]||(e[56]=l=>n(_e).value.value=l),"error-messages":n(_e).errorMessage.value,label:"科威帳號",type:Da.value?"text":"password","append-inner-icon":Da.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[57]||(e[57]=l=>Da.value=!Da.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(qe).value.value,"onUpdate:modelValue":e[58]||(e[58]=l=>n(qe).value.value=l),"error-messages":n(qe).errorMessage.value,label:"科威密碼",type:Va.value?"text":"password","append-inner-icon":Va.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[59]||(e[59]=l=>Va.value=!Va.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(la).value.value,"onUpdate:modelValue":e[60]||(e[60]=l=>n(la).value.value=l),"error-messages":n(la).errorMessage.value,label:"YSRC帳號",type:Sa.value?"text":"password","append-inner-icon":Sa.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[61]||(e[61]=l=>Sa.value=!Sa.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(ta).value.value,"onUpdate:modelValue":e[62]||(e[62]=l=>n(ta).value.value=l),"error-messages":n(ta).errorMessage.value,label:"YSRC密碼",type:Ia.value?"text":"password","append-inner-icon":Ia.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[63]||(e[63]=l=>Ia.value=!Ia.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(na).value.value,"onUpdate:modelValue":e[64]||(e[64]=l=>n(na).value.value=l),"error-messages":n(na).errorMessage.value,label:"YS168帳號",type:ka.value?"text":"password","append-inner-icon":ka.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[65]||(e[65]=l=>ka.value=!ka.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(sa).value.value,"onUpdate:modelValue":e[66]||(e[66]=l=>n(sa).value.value=l),"error-messages":n(sa).errorMessage.value,label:"YS168密碼",type:ha.value?"text":"password","append-inner-icon":ha.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[67]||(e[67]=l=>ha.value=!ha.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),t(r,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Ge).value.value,"onUpdate:modelValue":e[68]||(e[68]=l=>n(Ge).value.value=l),"error-messages":n(Ge).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),t(Ja,{value:"insurance"},{default:s(()=>[t(ca,{class:"mt-3 pa-3"},{default:s(()=>[t(A,null,{default:s(()=>[t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(De).value.value,"onUpdate:modelValue":e[69]||(e[69]=l=>n(De).value.value=l),"error-messages":n(De).errorMessage.value,label:"健保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(jl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[70]||(e[70]=l=>n(De).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(Ve).value.value,"onUpdate:modelValue":e[71]||(e[71]=l=>n(Ve).value.value=l),"error-messages":n(Ve).errorMessage.value,label:"健保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(_l),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[72]||(e[72]=l=>n(Ve).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(Se).value.value,"onUpdate:modelValue":e[73]||(e[73]=l=>n(Se).value.value=l),"error-messages":n(Se).errorMessage.value,label:"勞保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(ql),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[74]||(e[74]=l=>n(Se).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(Ie).value.value,"onUpdate:modelValue":e[75]||(e[75]=l=>n(Ie).value.value=l),"error-messages":n(Ie).errorMessage.value,label:"勞保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Fl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[76]||(e[76]=l=>n(Ie).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(J,{modelValue:n(oa).value.value,"onUpdate:modelValue":e[77]||(e[77]=l=>n(oa).value.value=l),"error-messages":n(oa).errorMessage.value,items:hl,"item-title":"title","item-value":"value",label:"勞退自提比率",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(ke).value.value,"onUpdate:modelValue":e[78]||(e[78]=l=>n(ke).value.value=l),"error-messages":n(ke).errorMessage.value,label:"勞退自提加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Jl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[79]||(e[79]=l=>n(ke).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(o,{modelValue:n(he).value.value,"onUpdate:modelValue":e[80]||(e[80]=l=>n(he).value.value=l),"error-messages":n(he).errorMessage.value,label:"勞保自提退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(Hl),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[81]||(e[81]=l=>n(he).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(pa,{modelValue:n(Ke).value.value,"onUpdate:modelValue":e[82]||(e[82]=l=>n(Ke).value.value=l),items:Pl.value,"error-messages":n(Ke).errorMessage.value,label:"薪轉銀行",variant:"outlined",density:"compact","item-title":"title","item-value":"value",clearable:"",hint:"可輸入銀行代碼或銀行名稱搜尋","persistent-hint":""},{selection:s(({item:l})=>[g(M(l.title),1)]),_:1},8,["modelValue","items","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Qe).value.value,"onUpdate:modelValue":e[83]||(e[83]=l=>n(Qe).value.value=l),"error-messages":n(Qe).errorMessage.value,label:"薪轉分行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[t(I,{modelValue:n(Xe).value.value,"onUpdate:modelValue":e[84]||(e[84]=l=>n(Xe).value.value=l),"error-messages":n(Xe).errorMessage.value,label:"薪轉帳戶號碼",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),t(r,{cols:"12",class:"mt-10"},{default:s(()=>[t(ga,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),t(r,{cols:"12"},{default:s(()=>[t(Ot,{modelValue:$.value,"onUpdate:modelValue":e[85]||(e[85]=l=>$.value=l),errors:P.value},null,8,["modelValue","errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])),t(ml,{class:"px-4 mt-4"},{default:s(()=>[t(Ut,null,{default:s(({isHovering:l,props:C})=>[y.value?(k(),T(Q,Ua({key:0},C,{color:l?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:W.value,onClick:e[87]||(e[87]=Y=>D.value=!0)}),{default:s(()=>e[123]||(e[123]=[g(" 永久刪除 ")])),_:2},1040,["color","size"])):z("",!0)]),_:1}),t(_a),t(Q,{color:"red-lighten-1",variant:"outlined",size:W.value,loading:n(Oa),onClick:za},{default:s(()=>e[124]||(e[124]=[g(" 取消 ")])),_:1},8,["size","loading"]),t(Q,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:W.value,loading:n(Oa),disabled:y.value&&!dt.value},{default:s(()=>e[125]||(e[125]=[g(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),t(St,{modelValue:xa.value,"onUpdate:modelValue":e[89]||(e[89]=l=>xa.value=l),onConfirm:e[90]||(e[90]=l=>{n(se).value.value=l}),onCancel:e[91]||(e[91]=l=>n(ye).value.value="在職")},null,8,["modelValue"]),t(ht,{modelValue:D.value,"onUpdate:modelValue":e[92]||(e[92]=l=>D.value=l),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((f=v.value)==null?void 0:f.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${((S=v.value)==null?void 0:S.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((u=v.value)==null?void 0:u.name)||"","input-label":"員工姓名",onConfirm:st},null,8,["modelValue","message","expected-name"])],64)}}},hn=Ha(an,[["__scopeId","data-v-2414fd63"]]);export{hn as default};
