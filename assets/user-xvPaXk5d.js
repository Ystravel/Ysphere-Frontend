import{aY as Yl,p as Le,m as Ol,a as Ll,f as Bt,g as _e,l as At,n as Ut,_ as Tt,aZ as Mt,x as h,o as L,s as ul,z as ue,a_ as Yt,c as l,K as J,u as ze,ag as Oe,aQ as Ot,a$ as Lt,b0 as _t,b1 as _l,b2 as zt,F as jt,b3 as Wt,ah as qt,b4 as Ft,v as rl,X as Ht,aS as zl,J as Xt,b5 as Gt,U as Se,H as me,aJ as Jt,b6 as Zt,b7 as Kt,D as jl,b8 as Qt,b9 as en,ba as an,h as ln,t as Ue,R as tn,q as nn,bb as Il,bc as sn,a0 as dl,a6 as A,a7 as X,a8 as s,af as _,ao as ne,ad as C,an as H,ac as n,ap as Ha,ay as fe,a5 as Wl,ae as Z,w as on,ai as Wa,ab as be,ax as B,a1 as un,a2 as rn,P as dn,aX as kl,A as xl,as as cn,at as Cl,au as mn,am as xa,bd as nl,aa as sl,az as wl,aj as vn,aw as Pl,a9 as pn,aV as gn}from"./index-BSHHmFvL.js";import{l as Nl}from"./lodash-DHyxJ22h.js";import{c as Rl,a as x,d as le,f as ol,g as El,h as $l,u as fn,b}from"./index.esm-gxkY-Lvs.js";import{u as de,_ as bn,E as yn,a as Vn}from"./useROCDate-ihHLbZnp.js";import{C as hn}from"./ConfirmDeleteDialogWithTextField-CUCoy9Ze.js";import{V as Dn}from"./VCombobox-A46ZinLQ.js";import{V as q,a as d}from"./VRow-BZtZZacG.js";import{V as Sn}from"./VContainer-DGOFbiwD.js";import{V as Ca}from"./VAutocomplete-BzoGnF6J.js";import{V as te,a as In}from"./VDataTableServer-Dh1ezoNn.js";import{b as Bl,V as Al,a as Ul}from"./VList-ClhDlZs2.js";import{V as kn}from"./VForm-ClPLOnlI.js";import{V as xn}from"./VTooltip-DpI51t7g.js";import{V as wa}from"./VDivider-CoXs1m4h.js";import{V as Cn}from"./VHover-CqfwTLXf.js";import{T as ja}from"./index-BfYKya-U.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-D8zIeezc.js";const wn=o=>{const{touchstartX:c,touchendX:i,touchstartY:u,touchendY:I}=o,f=.5,g=16;o.offsetX=i-c,o.offsetY=I-u,Math.abs(o.offsetY)<f*Math.abs(o.offsetX)&&(o.left&&i<c-g&&o.left(o),o.right&&i>c+g&&o.right(o)),Math.abs(o.offsetX)<f*Math.abs(o.offsetY)&&(o.up&&I<u-g&&o.up(o),o.down&&I>u+g&&o.down(o))};function Pn(o,c){var u;const i=o.changedTouches[0];c.touchstartX=i.clientX,c.touchstartY=i.clientY,(u=c.start)==null||u.call(c,{originalEvent:o,...c})}function Nn(o,c){var u;const i=o.changedTouches[0];c.touchendX=i.clientX,c.touchendY=i.clientY,(u=c.end)==null||u.call(c,{originalEvent:o,...c}),wn(c)}function Rn(o,c){var u;const i=o.changedTouches[0];c.touchmoveX=i.clientX,c.touchmoveY=i.clientY,(u=c.move)==null||u.call(c,{originalEvent:o,...c})}function En(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:o.left,right:o.right,up:o.up,down:o.down,start:o.start,move:o.move,end:o.end};return{touchstart:i=>Pn(i,c),touchend:i=>Nn(i,c),touchmove:i=>Rn(i,c)}}function $n(o,c){var k;const i=c.value,u=i!=null&&i.parent?o.parentElement:o,I=(i==null?void 0:i.options)??{passive:!0},f=(k=c.instance)==null?void 0:k.$.uid;if(!u||!f)return;const g=En(c.value);u._touchHandlers=u._touchHandlers??Object.create(null),u._touchHandlers[f]=g,Yl(g).forEach(N=>{u.addEventListener(N,g[N],I)})}function Bn(o,c){var f,g;const i=(f=c.value)!=null&&f.parent?o.parentElement:o,u=(g=c.instance)==null?void 0:g.$.uid;if(!(i!=null&&i._touchHandlers)||!u)return;const I=i._touchHandlers[u];Yl(I).forEach(k=>{i.removeEventListener(k,I[k])}),delete i._touchHandlers[u]}const ql={mounted:$n,unmounted:Bn},Fl=Symbol.for("vuetify:v-window"),Hl=Symbol.for("vuetify:v-window-group"),Xl=Le({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:o=>typeof o=="boolean"||o==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ol(),...Ll(),...Bt()},"VWindow"),Tl=_e()({name:"VWindow",directives:{Touch:ql},props:Xl(),emits:{"update:modelValue":o=>!0},setup(o,c){let{slots:i}=c;const{themeClasses:u}=At(o),{isRtl:I}=Ut(),{t:f}=Tt(),g=Mt(o,Hl),k=h(),N=L(()=>I.value?!o.reverse:o.reverse),U=ul(!1),R=L(()=>{const T=o.direction==="vertical"?"y":"x",K=(N.value?!U.value:U.value)?"-reverse":"";return`v-window-${T}${K}-transition`}),S=ul(0),m=h(void 0),Y=L(()=>g.items.value.findIndex(T=>g.selected.value.includes(T.id)));ue(Y,(T,j)=>{const K=g.items.value.length,re=K-1;K<=2?U.value=T<j:T===re&&j===0?U.value=!0:T===0&&j===re?U.value=!1:U.value=T<j}),Yt(Fl,{transition:R,isReversed:U,transitionCount:S,transitionHeight:m,rootRef:k});const p=L(()=>o.continuous||Y.value!==0),y=L(()=>o.continuous||Y.value!==g.items.value.length-1);function O(){p.value&&g.prev()}function w(){y.value&&g.next()}const V=L(()=>{const T=[],j={icon:I.value?o.nextIcon:o.prevIcon,class:`v-window__${N.value?"right":"left"}`,onClick:g.prev,"aria-label":f("$vuetify.carousel.prev")};T.push(p.value?i.prev?i.prev({props:j}):l(J,j,null):l("div",null,null));const K={icon:I.value?o.prevIcon:o.nextIcon,class:`v-window__${N.value?"left":"right"}`,onClick:g.next,"aria-label":f("$vuetify.carousel.next")};return T.push(y.value?i.next?i.next({props:K}):l(J,K,null):l("div",null,null)),T}),E=L(()=>o.touch===!1?o.touch:{...{left:()=>{N.value?O():w()},right:()=>{N.value?w():O()},start:j=>{let{originalEvent:K}=j;K.stopPropagation()}},...o.touch===!0?{}:o.touch});return ze(()=>Oe(l(o.tag,{ref:k,class:["v-window",{"v-window--show-arrows-on-hover":o.showArrows==="hover"},u.value,o.class],style:o.style},{default:()=>{var T,j;return[l("div",{class:"v-window__container",style:{height:m.value}},[(T=i.default)==null?void 0:T.call(i,{group:g}),o.showArrows!==!1&&l("div",{class:"v-window__controls"},[V.value])]),(j=i.additional)==null?void 0:j.call(i,{group:g})]}}),[[Ot("touch"),E.value]])),{group:g}}}),Gl=Le({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ol(),...Lt(),..._t()},"VWindowItem"),Ml=_e()({name:"VWindowItem",directives:{Touch:ql},props:Gl(),emits:{"group:selected":o=>!0},setup(o,c){let{slots:i}=c;const u=_l(Fl),I=zt(o,Hl),{isBooted:f}=jt();if(!u||!I)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const g=ul(!1),k=L(()=>f.value&&(u.isReversed.value?o.reverseTransition!==!1:o.transition!==!1));function N(){!g.value||!u||(g.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,u.transitionCount.value===0&&(u.transitionHeight.value=void 0)))}function U(){var p;g.value||!u||(g.value=!0,u.transitionCount.value===0&&(u.transitionHeight.value=rl((p=u.rootRef.value)==null?void 0:p.clientHeight)),u.transitionCount.value+=1)}function R(){N()}function S(p){g.value&&Ht(()=>{!k.value||!g.value||!u||(u.transitionHeight.value=rl(p.clientHeight))})}const m=L(()=>{const p=u.isReversed.value?o.reverseTransition:o.transition;return k.value?{name:typeof p!="string"?u.transition.value:p,onBeforeEnter:U,onAfterEnter:N,onEnterCancelled:R,onBeforeLeave:U,onAfterLeave:N,onLeaveCancelled:R,onEnter:S}:!1}),{hasContent:Y}=Wt(o,I.isSelected);return ze(()=>l(Ft,{transition:m.value,disabled:!f.value},{default:()=>{var p;return[Oe(l("div",{class:["v-window-item",I.selectedClass.value,o.class],style:o.style},[Y.value&&((p=i.default)==null?void 0:p.call(i))]),[[qt,I.isSelected.value]])]}})),{groupItem:I}}}),il=Symbol.for("vuetify:v-tabs"),An=Le({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...zl(Xt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),qa=_e()({name:"VTab",props:An(),setup(o,c){let{slots:i,attrs:u}=c;const{textColorClasses:I,textColorStyles:f}=Gt(o,"sliderColor"),g=h(),k=h(),N=L(()=>o.direction==="horizontal"),U=L(()=>{var S,m;return((m=(S=g.value)==null?void 0:S.group)==null?void 0:m.isSelected.value)??!1});function R(S){var Y,p;let{value:m}=S;if(m){const y=(p=(Y=g.value)==null?void 0:Y.$el.parentElement)==null?void 0:p.querySelector(".v-tab--selected .v-tab__slider"),O=k.value;if(!y||!O)return;const w=getComputedStyle(y).color,V=y.getBoundingClientRect(),E=O.getBoundingClientRect(),T=N.value?"x":"y",j=N.value?"X":"Y",K=N.value?"right":"bottom",re=N.value?"width":"height",Xa=V[T],Ga=E[T],ve=Xa>Ga?V[K]-E[K]:V[T]-E[T],Ja=Math.sign(ve)>0?N.value?"right":"bottom":Math.sign(ve)<0?N.value?"left":"top":"center",Za=(Math.abs(ve)+(Math.sign(ve)<0?V[re]:E[re]))/Math.max(V[re],E[re])||0,Pa=V[re]/E[re]||0,Na=1.5;Zt(O,{backgroundColor:[w,"currentcolor"],transform:[`translate${j}(${ve}px) scale${j}(${Pa})`,`translate${j}(${ve/Na}px) scale${j}(${(Za-1)/Na+1})`,"none"],transformOrigin:Array(3).fill(Ja)},{duration:225,easing:Kt})}}return ze(()=>{const S=J.filterProps(o);return l(J,me({symbol:il,ref:g,class:["v-tab",o.class],style:o.style,tabindex:U.value?0:-1,role:"tab","aria-selected":String(U.value),active:!1},S,u,{block:o.fixed,maxWidth:o.fixed?300:void 0,"onGroup:selected":R}),{...i,default:()=>{var m;return l(Se,null,[((m=i.default)==null?void 0:m.call(i))??o.text,!o.hideSlider&&l("div",{ref:k,class:["v-tab__slider",I.value],style:f.value},null)])}})}),Jt({},g)}}),Un=Le({...zl(Xl(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Jl=_e()({name:"VTabsWindow",props:Un(),emits:{"update:modelValue":o=>!0},setup(o,c){let{slots:i}=c;const u=_l(il,null),I=jl(o,"modelValue"),f=L({get(){var g;return I.value!=null||!u?I.value:(g=u.items.value.find(k=>u.selected.value.includes(k.id)))==null?void 0:g.value},set(g){I.value=g}});return ze(()=>{const g=Tl.filterProps(o);return l(Tl,me({_as:"VTabsWindow"},g,{modelValue:f.value,"onUpdate:modelValue":k=>f.value=k,class:["v-tabs-window",o.class],style:o.style,mandatory:!1,touch:!1}),i)}),{}}}),Tn=Le({...Gl()},"VTabsWindowItem"),Fa=_e()({name:"VTabsWindowItem",props:Tn(),setup(o,c){let{slots:i}=c;return ze(()=>{const u=Ml.filterProps(o);return l(Ml,me({_as:"VTabsWindowItem"},u,{class:["v-tabs-window-item",o.class],style:o.style}),i)}),{}}});function Mn(o){return o?o.map(c=>sn(c)?c:{text:c,value:c}):[]}const Yn=Le({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Qt({mandatory:"force",selectedClass:"v-tab-item--selected"}),...en(),...Ll()},"VTabs"),On=_e()({name:"VTabs",props:Yn(),emits:{"update:modelValue":o=>!0},setup(o,c){let{attrs:i,slots:u}=c;const I=jl(o,"modelValue"),f=L(()=>Mn(o.items)),{densityClasses:g}=an(o),{backgroundColorClasses:k,backgroundColorStyles:N}=ln(Ue(o,"bgColor")),{scopeId:U}=tn();return nn({VTab:{color:Ue(o,"color"),direction:Ue(o,"direction"),stacked:Ue(o,"stacked"),fixed:Ue(o,"fixedTabs"),sliderColor:Ue(o,"sliderColor"),hideSlider:Ue(o,"hideSlider")}}),ze(()=>{const R=Il.filterProps(o),S=!!(u.window||o.items.length>0);return l(Se,null,[l(Il,me(R,{modelValue:I.value,"onUpdate:modelValue":m=>I.value=m,class:["v-tabs",`v-tabs--${o.direction}`,`v-tabs--align-tabs-${o.alignTabs}`,{"v-tabs--fixed-tabs":o.fixedTabs,"v-tabs--grow":o.grow,"v-tabs--stacked":o.stacked},g.value,k.value,o.class],style:[{"--v-tabs-height":rl(o.height)},N.value,o.style],role:"tablist",symbol:il},U,i),{default:()=>{var m;return[((m=u.default)==null?void 0:m.call(u))??f.value.map(Y=>{var p;return((p=u.tab)==null?void 0:p.call(u,{item:Y}))??l(qa,me(Y,{key:Y.text,value:Y.value}),{default:u[`tab.${Y.value}`]?()=>{var y;return(y=u[`tab.${Y.value}`])==null?void 0:y.call(u,{item:Y})}:void 0})})]}}),S&&l(Jl,me({modelValue:I.value,"onUpdate:modelValue":m=>I.value=m,key:"tabs-window"},U),{default:()=>{var m;return[f.value.map(Y=>{var p;return((p=u.item)==null?void 0:p.call(u,{item:Y}))??l(Fa,{value:Y.value},{default:()=>{var y;return(y=u[`item.${Y.value}`])==null?void 0:y.call(u,{item:Y})}})}),(m=u.window)==null?void 0:m.call(u)]}})])}),{}}}),oe={0:"無",1:"華語導遊",2:"外語導遊",3:"華語領隊",4:"外語領隊"},Ln={class:"d-flex align-center flex-wrap"},_n={__name:"GuideLicenseSelection",props:{modelValue:{type:Array,default:()=>[]},errorMessages:{type:[String,Array],default:""}},emits:["update:modelValue"],setup(o,{emit:c}){const i=o,u=c,I=Object.entries(oe).filter(([R])=>R!=="0").map(([R,S])=>({value:Number(R),title:S})),f=h(i.modelValue.length===0||i.modelValue.length===1&&i.modelValue[0]===0?[{value:0,title:oe[0]}]:i.modelValue.filter(R=>R!==0).map(R=>({value:R,title:oe[R]}))),g=L(()=>f.value.length===1&&f.value[0].value===0),k=R=>{if(!R||R.length===0){f.value=[{value:0,title:oe[0]}],u("update:modelValue",[0]);return}const S=R.filter(m=>m&&(typeof m.value=="number"||typeof m=="number")).map(m=>typeof m=="number"?m:m.value).filter(m=>m!==0);S.length===0?(f.value=[{value:0,title:oe[0]}],u("update:modelValue",[0])):(f.value=S.map(m=>({value:m,title:oe[m]})),u("update:modelValue",S))},N=()=>{f.value=[{value:0,title:oe[0]}],u("update:modelValue",[0])},U=R=>{const S=f.value.filter(m=>m.value!==R.value);S.length===0?(f.value=[{value:0,title:oe[0]}],u("update:modelValue",[0])):(f.value=S,u("update:modelValue",S.map(m=>m.value)))};return ue(()=>i.modelValue,R=>{R.length===0||R.length===1&&R[0]===0?f.value=[{value:0,title:oe[0]}]:f.value=R.filter(S=>S!==0).map(S=>({value:S,title:oe[S]}))},{deep:!0}),(R,S)=>(A(),X(Dn,{modelValue:f.value,"onUpdate:modelValue":[S[0]||(S[0]=m=>f.value=m),k],items:n(I),label:"導遊領隊證",variant:"outlined",density:"compact","error-messages":i.errorMessages,multiple:"",chips:!g.value,clearable:"","onClick:clear":N},{selection:s(()=>[_("div",Ln,[g.value?(A(),ne(Se,{key:0},[C(H(n(oe)[0]),1)],64)):(A(!0),ne(Se,{key:1},Ha(f.value,m=>(A(),X(fe,{key:m.value,class:"ma-1",closable:"",size:"small","onClick:close":Y=>U(m)},{default:s(()=>[C(H(n(oe)[m.value]),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1},8,["modelValue","items","error-messages","chips"]))}},zn=dl(_n,[["__scopeId","data-v-a2b768ed"]]),jn={class:"d-flex justify-space-between align-center mb-4"},Wn={class:"d-flex justify-space-between align-center mb-2 mt-1"},qn={__name:"DependentInsurance",props:{modelValue:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(o,{emit:c}){const{convertToROCDate:i}=de(),u=o,I=c,f=p=>{if(!p)return null;if(p instanceof Date)return p;try{const y=new Date(p);return isNaN(y.getTime())?null:y}catch{return null}},k=h((p=>(p||[]).map(y=>({...y,dependentBirthDate:f(y.dependentBirthDate),dependentInsuranceStartDate:f(y.dependentInsuranceStartDate),dependentInsuranceEndDate:f(y.dependentInsuranceEndDate)})))(u.modelValue)),N=h({}),U=(p,y)=>{var V;const O=`${p}-${y}`;if(!N.value[O])return"";const w=k.value[p];if(y==="dependentName"&&!((V=w.dependentName)!=null&&V.trim()))return"請輸入受保人姓名";if(y==="dependentIDNumber"){const E=/^[A-Za-z][12]\d{8}$/,T=w.dependentIDNumber;if(!(T!=null&&T.trim()))return"請輸入身分證號碼";if(!E.test(T))return"身分證號碼格式錯誤"}return y==="dependentBirthDate"&&!w.dependentBirthDate?"請選擇出生日期":""},R=()=>{k.value.length<4&&(k.value.push({dependentName:"",dependentIDNumber:"",dependentRelationship:"",dependentBirthDate:null,dependentInsuranceStartDate:null,dependentInsuranceEndDate:null}),I("update:modelValue",k.value))},S=p=>{k.value.splice(p,1),Object.keys(N.value).forEach(y=>{y.startsWith(`${p}-`)&&delete N.value[y]}),I("update:modelValue",k.value)},m=(p,y)=>{N.value[`${p}-${y}`]=!0};ue(()=>u.modelValue,p=>{const y=p.map(V=>({...V,dependentBirthDate:V.dependentBirthDate instanceof Date?V.dependentBirthDate:f(V.dependentBirthDate),dependentInsuranceStartDate:V.dependentInsuranceStartDate instanceof Date?V.dependentInsuranceStartDate:f(V.dependentInsuranceStartDate),dependentInsuranceEndDate:V.dependentInsuranceEndDate instanceof Date?V.dependentInsuranceEndDate:f(V.dependentInsuranceEndDate)})),O=JSON.stringify(y),w=JSON.stringify(k.value);O!==w&&(k.value=y)},{deep:!0}),ue(k,p=>{const y=p.map(V=>({...V,dependentBirthDate:V.dependentBirthDate instanceof Date?V.dependentBirthDate:f(V.dependentBirthDate),dependentInsuranceStartDate:V.dependentInsuranceStartDate instanceof Date?V.dependentInsuranceStartDate:f(V.dependentInsuranceStartDate),dependentInsuranceEndDate:V.dependentInsuranceEndDate instanceof Date?V.dependentInsuranceEndDate:f(V.dependentInsuranceEndDate)})),O=JSON.stringify(y),w=JSON.stringify(k.value);O!==w&&I("update:modelValue",y)},{deep:!0}),ue(k,p=>{I("update:modelValue",p)},{deep:!0});const Y=p=>{if(!p)return"";if(p instanceof Date)return i(p);try{const y=new Date(p);return isNaN(y.getTime())?"":i(y)}catch{return""}};return(p,y)=>{const O=Wl("v-date-input");return A(),X(d,{cols:"12",class:"px-0"},{default:s(()=>[_("div",jn,[y[1]||(y[1]=_("div",{class:"text-blue-grey-darken-2 ms-1 info-title",style:{"font-size":"15px"}}," 眷屬加保資料 ",-1)),k.value.length<4?(A(),X(J,{key:0,color:"blue-grey-darken-2",variant:"outlined",size:"small","prepend-icon":"mdi-account-plus",onClick:R},{default:s(()=>y[0]||(y[0]=[C(" 新增眷屬 ")])),_:1})):Z("",!0)]),l(on,{group:""},{default:s(()=>[(A(!0),ne(Se,null,Ha(k.value,(w,V)=>(A(),X(Wa,{key:V,class:"px-4 mb-3",elevation:"0",style:{border:"1px solid #aaa"}},{default:s(()=>[_("div",Wn,[_("h5",null,"眷屬 "+H(V+1),1),l(J,{icon:"",color:"red-lighten-1",variant:"plain",size:"small",onClick:E=>S(V)},{default:s(()=>[l(be,null,{default:s(()=>y[2]||(y[2]=[C("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),l(q,{class:"mb-3"},{default:s(()=>[l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:w.dependentName,"onUpdate:modelValue":E=>w.dependentName=E,"error-messages":U(V,"dependentName"),label:"*眷屬姓名",variant:"outlined",density:"compact",clearable:"",onBlur:E=>m(V,"dependentName")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:w.dependentIDNumber,"onUpdate:modelValue":E=>w.dependentIDNumber=E,"error-messages":U(V,"dependentIDNumber"),label:"*眷屬身分證號碼",variant:"outlined",density:"compact",clearable:"",maxlength:"10",onBlur:E=>m(V,"dependentIDNumber")},null,8,["modelValue","onUpdate:modelValue","error-messages","onBlur"])]),_:2},1024),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(O,{modelValue:w.dependentBirthDate,"onUpdate:modelValue":E=>w.dependentBirthDate=E,"error-messages":U(V,"dependentBirthDate"),label:"*眷屬生日","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:Y(w.dependentBirthDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認",onBlur:E=>m(V,"dependentBirthDate"),"onClick:clear":E=>w.dependentBirthDate=null},null,8,["modelValue","onUpdate:modelValue","error-messages","hint","onBlur","onClick:clear"])]),_:2},1024),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:w.dependentRelationship,"onUpdate:modelValue":E=>w.dependentRelationship=E,label:"眷屬關係",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(O,{modelValue:w.dependentInsuranceStartDate,"onUpdate:modelValue":E=>w.dependentInsuranceStartDate=E,label:"加保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(i)(w.dependentInsuranceStartDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":E=>w.dependentInsuranceStartDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(O,{modelValue:w.dependentInsuranceEndDate,"onUpdate:modelValue":E=>w.dependentInsuranceEndDate=E,label:"退保日期","prepend-icon":"",variant:"outlined",density:"compact",clearable:"",hint:n(i)(w.dependentInsuranceEndDate),"persistent-hint":"","cancel-text":"取消","ok-text":"確認","onClick:clear":E=>w.dependentInsuranceEndDate=null},null,8,["modelValue","onUpdate:modelValue","hint","onClick:clear"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},Fn=dl(qn,[["__scopeId","data-v-e895a5af"]]),Hn={class:"d-flex flex-column gap-2"},Xn={class:"d-flex flex-column gap-2"},Gn={class:"d-flex flex-column gap-2"},Jn={key:0},Zn={key:1},Kn={key:2},Qn={key:3},es={key:4},as={key:5},ls={key:6},ts={class:"d-flex align-center overflow-hidden h-25"},ns={class:"list-content ps-4 py-3 mb-4"},ss={style:{"font-weight":"800"},class:"text-cyan-darken-2"},os={class:"card-title px-4 py-3 d-flex justify-space-between"},us={class:"mb-4"},rs={__name:"user",setup(o){const{apiAuth:c}=mn(),i=un(),u=rn(),{smAndUp:I,mdAndUp:f,lgAndUp:g,xlAndUp:k,name:N}=dn(),U=L(()=>I.value?"default":"small"),R=L(()=>I.value?"64":"default"),S=h(!1),m=h(null),Y=h(1),p=h(!1),y={class:"header-bg"},O=h([]),w=h(""),V=h(!1),E=L(()=>{const a={};return(O.value||[]).forEach((v,P)=>{var $,r;($=v.dependentName)!=null&&$.trim()||(a[`dependentInsurance.${P}.dependentName`]="請輸入受保人姓名"),(r=v.dependentIDNumber)!=null&&r.trim()||(a[`dependentInsurance.${P}.dependentIDNumber`]="請輸入身分證號碼"),v.dependentBirthDate||(a[`dependentInsurance.${P}.dependentBirthDate`]="請選擇出生日期")}),a}),T=async(a,e)=>{var v,P;try{w.value=a;const{data:$}=await c.patch(`/user/${a}`,{formStatus:e});if($.success){const r=ce.value.findIndex(t=>t._id===a);r!==-1&&(ce.value[r].formStatus=e),Da.value++,u({text:"表單狀態更新成功",snackbarProps:{color:"teal-lighten-1"}})}else throw new Error($.message||"更新失敗")}catch($){console.error("更新表單狀態失敗:",$),u({text:((P=(v=$.response)==null?void 0:v.data)==null?void 0:P.message)||"更新表單狀態失敗",snackbarProps:{color:"error"}})}finally{w.value=""}},j=h([{title:"入職日期",value:"hireDate"},{title:"離職日期",value:"resignationDate"}]),K=[{title:"否",value:!1},{title:"是",value:!0}],re=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],Xa=[{title:"否",value:!1},{title:"是",value:!0}],Ga=[{title:"1%",value:1},{title:"2%",value:2},{title:"3%",value:3},{title:"4%",value:4},{title:"5%",value:5},{title:"6%",value:6}],ve=a=>{switch(a){case"已完成":return"green-darken-1";case"尚未完成":return"pink-lighten-1";case"尚缺資料":return"amber-darken-3";default:return"grey"}},Ja=[{title:"華語導遊",value:1},{title:"外語導遊",value:2},{title:"華語領隊",value:3},{title:"外語領隊",value:4}],cl=[{title:"尚未完成",value:"尚未完成"},{title:"尚缺資料",value:"尚缺資料"},{title:"已完成",value:"已完成"}],Za=[{title:"否",value:"否"},{title:"輕度",value:"輕度"},{title:"中度",value:"中度"}],Pa=["尚未完成","尚缺資料","已完成"],Na=[{code:"008",name:"華南商業銀行"},{code:"004",name:"臺灣銀行"},{code:"005",name:"台灣土地銀行"},{code:"006",name:"合作金庫銀行"},{code:"007",name:"第一商業銀行"},{code:"009",name:"彰化商業銀行"},{code:"010",name:"花旗(台灣)(原華僑銀行)"},{code:"011",name:"上海商業銀行"},{code:"012",name:"台北富邦銀行"},{code:"013",name:"國泰世華商業銀行"},{code:"016",name:"高雄銀行"},{code:"017",name:"兆豐國際商業銀行"},{code:"021",name:"花旗銀行"},{code:"024",name:"美國運通銀行"},{code:"025",name:"首都銀行"},{code:"039",name:"荷蘭銀行"},{code:"040",name:"中華開發"},{code:"050",name:"台灣中小企業銀行"},{code:"052",name:"渣打國際商銀(原新竹商銀)"},{code:"053",name:"台中商業銀行"},{code:"054",name:"京城商銀"},{code:"057",name:"台東區中小企業銀行"},{code:"072",name:"德意志銀行"},{code:"073",name:"東亞銀行"},{code:"081",name:"匯豐銀行"},{code:"101",name:"稻江商銀"},{code:"102",name:"華泰商業銀行"},{code:"103",name:"新光商業銀行"},{code:"108",name:"陽信商業銀行"},{code:"118",name:"板信商業銀行"},{code:"147",name:"三信商業銀行"},{code:"700",name:"中華郵政"},{code:"803",name:"聯邦商業銀行"},{code:"805",name:"遠東商業銀行"},{code:"806",name:"元大銀行"},{code:"807",name:"永豐銀行"},{code:"808",name:"玉山商業銀行"},{code:"809",name:"萬泰商業銀行"},{code:"810",name:"星展銀行"},{code:"812",name:"台新國際商業銀行"},{code:"815",name:"日盛國際商業銀行"},{code:"816",name:"安泰商業銀行"},{code:"822",name:"中國信託商業銀行"}],Zl=L(()=>Na.map(a=>({title:`(${a.code}) ${a.name}`,value:a.code}))),Kl=async a=>{var e,v;if(he.value!==a){V.value=!0;try{const{data:P}=await c.patch(`/user/${ae.value.id}`,{formStatus:a});if(P.success){he.value.value=a;const $=ce.value.findIndex(r=>r._id===ae.value.id);$!==-1&&(ce.value[$].formStatus=a),Da.value++,u({text:"表單狀態更新成功",snackbarProps:{color:"teal-lighten-1"}})}else throw new Error(P.message||"更新失敗")}catch(P){console.error("更新表單狀態失敗:",P),u({text:((v=(e=P.response)==null?void 0:e.data)==null?void 0:v.message)||"更新表單狀態失敗",snackbarProps:{color:"error"}})}finally{V.value=!1}}},Ra=h("basic"),Ea=h(!1),$a=h(!1),Ba=h(!1),Aa=h(!1),Ua=h(!1),Ta=h(!1),Ma=h(!1),Ka=h(null),Ya=h(""),Qa=h(!1),je=h(!1),ae=h({open:!1,id:""}),el=h(null),ml=h(null),ie=h({open:!1,userId:"",userName:"",loading:!1}),Q=h(null),F=h([]),Ql=h([]),vl=h(Object.entries(kl).map(([a,e])=>({value:Number(a),title:e}))),et=L(()=>[...Oa.value].sort((a,e)=>{const v=a.companyId||"",P=e.companyId||"";return v.localeCompare(P)}).map(a=>({title:`${a.name} (${a.companyId})`,value:a._id}))),Oa=h([]),at=L(()=>[...[...Oa.value].sort((a,e)=>{const v=a.companyId||"",P=e.companyId||"";return v.localeCompare(P)}).map(a=>({title:`${a.name} (${a.companyId})`,value:a._id}))]),pl=h([{title:"在職",value:"在職"},{title:"離職",value:"離職"},{title:"退休",value:"退休"},{title:"留職停薪",value:"留職停薪"}]),lt=h([{title:"男性",value:"男性"},{title:"女性",value:"女性"}]),tt=L(()=>k.value?"1280":g.value?"1080":f.value?"800":I.value?"600":"100%"),nt=Rl({dependentName:x().required("請輸入受保人姓名"),dependentRelationship:x(),dependentBirthDate:le().nullable().required("請輸入受保人生日"),dependentIDNumber:x().matches(/^[A-Za-z][12]\d{8}$/,"身分證號碼格式錯誤").required("請輸入受保人身分證號碼"),dependentInsuranceStartDate:le().nullable(),dependentInsuranceEndDate:le().nullable()}),st=Rl({email:x().required("請輸入公司 email").email("請輸入正確的 email 格式"),personalEmail:x().email("請輸入正確的 email 格式").nullable(),IDNumber:x().matches(/^[A-Za-z][12]\d{8}$/,"身分證格式錯誤").required("請輸入身分證號碼"),gender:x().required("請選擇姓別"),name:x().required("請輸入姓名"),englishName:x().nullable(),phoneNumber:x().nullable(),cellphone:x().nullable().test("is-valid-cellphone","手機號碼格式錯誤",a=>a?/^09\d{8}$/.test(a):!0),salary:x().nullable(),extNumber:x().nullable(),printNumber:x().nullable(),birthDate:le().nullable().required("請選擇生日"),permanentAddress:x().required("請輸入戶籍地址"),contactAddress:x().required("請輸入聯絡地址"),company:x().required("請選擇所屬公司"),department:x().required("請選擇部門"),jobTitle:x().nullable(),role:ol().required("請選擇使用者身分別"),cowellAccount:x().nullable(),cowellPassword:x().nullable(),userId:x(),employmentStatus:x().required("請選擇任職狀態"),hireDate:le().nullable().required("請選擇入職日期"),resignationDate:le().nullable(),emergencyName:x().nullable(),emergencyPhoneNumber:x().nullable(),emergencyCellphone:x().nullable().test("is-valid-cellphone","手機號碼格式錯誤",a=>a?/^09\d{8}$/.test(a):!0),emergencyRelationship:x().nullable(),note:x().nullable(),healthInsuranceStartDate:le().nullable(),healthInsuranceEndDate:le().nullable(),laborInsuranceStartDate:le().nullable(),laborInsuranceEndDate:le().nullable(),salaryBank:x().nullable(),salaryBankBranch:x().nullable(),salaryAccountNumber:x().nullable(),guideLicense:El().of(ol().oneOf([0,1,2,3,4],"導遊證類型必須是 0, 1, 2, 3,4 之一")).default([]),tourManager:$l().nullable(),YSRCAccount:x().nullable(),YSRCPassword:x().nullable(),YS168Account:x().nullable(),YS168Password:x().nullable(),disabilityStatus:x().nullable(),indigenousStatus:$l().nullable(),voluntaryPensionRate:ol().nullable().transform((a,e)=>e===""?null:a),voluntaryPensionStartDate:le().nullable(),voluntaryPensionEndDate:le().nullable(),dependentInsurance:El().of(nt).default([]),tourismReportDate:le().nullable(),formStatus:x().nullable()}),{handleSubmit:ot,isSubmitting:al,resetForm:gl}=fn({validationSchema:st,initialValues:{email:"",personalEmail:"",IDNumber:"",gender:"男性",name:"",englishName:"",phoneNumber:"",cellphone:"",salary:"",extNumber:"",printNumber:"",birthDate:null,permanentAddress:"",contactAddress:"",company:"",department:"",jobTitle:"",role:0,cowellAccount:"",cowellPassword:"",userId:"",employmentStatus:"在職",hireDate:new Date,resignationDate:null,emergencyName:"",emergencyPhoneNumber:"",emergencyCellphone:"",emergencyRelationship:"",note:"",healthInsuranceStartDate:null,healthInsuranceEndDate:null,laborInsuranceStartDate:null,laborInsuranceEndDate:null,salaryBank:"008",salaryBankBranch:"",salaryAccountNumber:"",guideLicense:[],tourManager:!1,YSRCAccount:"",YSRCPassword:"",YS168Account:"",YS168Password:"",disabilityStatus:"否",indigenousStatus:!1,voluntaryPensionRate:null,voluntaryPensionStartDate:null,voluntaryPensionEndDate:null,dependentInsurance:[],tourismReportDate:null,formStatus:"尚未完成"},validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,validateOnInput:!1,context:L(()=>({isEditing:S.value}))}),We=b("email"),qe=b("personalEmail"),Te=b("IDNumber"),ye=b("gender"),Fe=b("name"),He=b("englishName"),Xe=b("phoneNumber"),Ge=b("cellphone"),Je=b("salary"),Ze=b("extNumber"),Ke=b("printNumber"),Ie=b("birthDate"),ke=b("permanentAddress"),Me=b("contactAddress"),xe=b("company",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),Ce=b("department",void 0,{validateOnValueUpdate:!0,validateOnChange:!0}),Qe=b("jobTitle"),ea=b("role"),aa=b("cowellAccount"),la=b("cowellPassword"),ta=b("userId",void 0,{validateOnValueUpdate:!1,transform:a=>a??""}),we=b("employmentStatus"),Ve=b("hireDate"),pe=b("resignationDate"),na=b("emergencyName"),sa=b("emergencyPhoneNumber"),oa=b("emergencyCellphone"),ua=b("emergencyRelationship"),ra=b("note"),Pe=b("healthInsuranceStartDate"),Ne=b("healthInsuranceEndDate"),Re=b("laborInsuranceStartDate"),Ee=b("laborInsuranceEndDate"),da=b("salaryBank"),ia=b("salaryBankBranch"),ca=b("salaryAccountNumber"),ma=b("guideLicense"),va=b("tourManager"),pa=b("YSRCAccount"),ga=b("YSRCPassword"),fa=b("YS168Account"),ba=b("YS168Password"),ya=b("disabilityStatus"),Va=b("indigenousStatus"),ha=b("voluntaryPensionRate"),$e=b("voluntaryPensionStartDate"),Be=b("voluntaryPensionEndDate"),fl=b("dependentInsurance"),Ae=b("tourismReportDate"),he=b("formStatus"),{rocDate:ut}=de(Ie),{rocDate:rt}=de(Ve),{rocDate:dt}=de(pe),{rocDate:it}=de(Pe),{rocDate:ct}=de(Ne),{rocDate:mt}=de(Re),{rocDate:vt}=de(Ee),{rocDate:pt}=de($e),{rocDate:gt}=de(Be),{rocDate:ft}=de(Ae),La=h(10),_a=h([{key:"userId",order:"asc"}]),ee=h(1),ce=h([]),Da=h(0),Sa=[{title:"員工編號",align:"left",sortable:!0,key:"userId"},{title:"姓名",align:"left",sortable:!0,key:"name"},{title:"公司Email",align:"left",sortable:!0,key:"email"},{title:"手機",align:"left",sortable:!0,key:"cellphone"},{title:"所屬公司",align:"left",sortable:!0,key:"company.name"},{title:"部門",align:"left",sortable:!0,key:"department.name"},{title:"分機",align:"left",sortable:!0,key:"extNumber"},{title:"身分別",align:"left",sortable:!0,key:"role"},{title:"狀態",align:"left",sortable:!0,key:"employmentStatus"},{title:"表單狀態",align:"left",sortable:!0,key:"formStatus"},{title:"操作",align:"left",sortable:!1,key:"action"}],Ye=h(!0),ll=h(0),bl=h(""),D=h({}),Ia=h(""),bt=a=>kl[a]||"未知",W=a=>a?new Date(a):null,yt=L(()=>i.isSuperAdmin||i.isHR||i.isAdmin),Vt=L(()=>["xl","xxl"].includes(N.value)?Sa:["lg"].includes(N.value)?Sa.filter(a=>a.key!=="employmentStatus"&&a.key!=="cellphone"):["md"].includes(N.value)?Sa.filter(a=>a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"&&a.key!=="formStatus"):["sm"].includes(N.value)?Sa.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="employmentStatus"&&a.key!=="formStatus"):Sa.filter(a=>a.key!=="company.name"&&a.key!=="department.name"&&a.key!=="cellphone"&&a.key!=="email"&&a.key!=="role"&&a.key!=="employmentStatus"&&a.key!=="formStatus")),ht=async()=>{try{const{data:a}=await c.get("/department/all");Ql.value=a.result}catch(a){console.error("加載部門失敗",a),u({text:"加載部門失敗",snackbarProps:{color:"red-lighten-1"}})}},Dt=async()=>{try{const{data:a}=await c.get("/company/all");a.success&&(Oa.value=a.result)}catch(a){console.error("載入公司列表失敗:",a),u({text:"載入公司列表失敗",snackbarProps:{color:"red-lighten-1"}})}},St=async()=>{if(!D.value.companyId){F.value=[];return}try{const{data:a}=await c.get("/department/all",{params:{companyId:D.value.companyId}});a.success?F.value=a.result||[]:(console.warn("找不到該公司的部門"),F.value=[])}catch(a){console.error("載入部門失敗:",a),u({text:"載入部門失敗",snackbarProps:{color:"red-lighten-1"}}),F.value=[]}},De=async(a,e)=>{a?ee.value=1:e&&(ee.value=e),await za()},za=async()=>{var a,e,v,P;Ye.value=!0;try{const $=M=>{if(M==="是")return!0;if(M==="否")return!1},r={page:ee.value,itemsPerPage:La.value,sortBy:((a=_a.value[0])==null?void 0:a.key)||"userId",sortOrder:((e=_a.value[0])==null?void 0:e.order)||"asc",quickSearch:Ia.value,...D.value,department:D.value.department,indigenousStatus:$(D.value.indigenousStatus),tourManager:$(D.value.tourManager)};Object.keys(r).forEach(M=>{r[M]===void 0&&delete r[M]}),D.value.dateType&&D.value.dateRange&&D.value.dateRange.length>0&&(r.dateType=D.value.dateType,r.startDate=D.value.dateRange[0].toISOString(),r.endDate=D.value.dateRange[D.value.dateRange.length-1].toISOString()),console.log("Query params:",r);const{data:t}=await c.get("/user/search",{params:r});t.success&&(ce.value=t.result.data,ll.value=t.result.totalItems)}catch($){console.error("搜索失败:",$),u({text:((P=(v=$==null?void 0:$.response)==null?void 0:v.data)==null?void 0:P.message)||"搜索失败",snackbarProps:{color:"error"}})}finally{Ye.value=!1}},It=async()=>{var a,e;try{ie.value.loading=!0,await c.post(`/user/${ie.value.userId}/send-initial-password`);const v=ce.value.findIndex(P=>P._id===ie.value.userId);v!==-1&&(ce.value[v].isFirstLogin=!1),u({text:"初始密碼已發送成功",snackbarProps:{color:"teal-lighten-1"}}),Vl()}catch(v){console.error("發送初始密碼失敗:",v),u({text:((e=(a=v==null?void 0:v.response)==null?void 0:a.data)==null?void 0:e.message)||"發送初始密碼失敗",snackbarProps:{color:"red-lighten-1"}})}finally{ie.value.loading=!1}},kt=ot(async a=>{var e,v,P,$;try{if(!Q.value){xe.errorMessage.value="請選擇公司",u({text:"請選擇公司",snackbarProps:{color:"red-lighten-1"}});return}if(S.value){const r=ee.value,t={...a,company:Q.value,dependentInsurance:O.value,healthInsuranceStartDate:a.healthInsuranceStartDate,healthInsuranceEndDate:a.healthInsuranceEndDate,laborInsuranceStartDate:a.laborInsuranceStartDate,laborInsuranceEndDate:a.laborInsuranceEndDate,voluntaryPensionStartDate:a.voluntaryPensionStartDate,voluntaryPensionEndDate:a.voluntaryPensionEndDate,birthDate:a.birthDate,hireDate:a.hireDate,tourismReportDate:a.tourismReportDate,resignationDate:a.resignationDate},{data:M}=await c.patch(`/user/${ae.value.id}`,t),G=ce.value.findIndex(z=>z._id===ae.value.id);G!==-1&&(ce.value[G]={...M.result,company:Oa.value.find(z=>z._id===Q.value),department:{_id:a.department,name:((e=F.value.find(z=>z._id===a.department))==null?void 0:e.name)||""}}),await De(!1,r)}else{const r={...a,company:Q.value,dependentInsurance:O.value};console.log("送出的資料:",{email:r.email,personalEmail:r.personalEmail,name:r.name,englishName:r.englishName,gender:r.gender,IDNumber:r.IDNumber,phoneNumber:r.phoneNumber,cellphone:r.cellphone,birthDate:r.birthDate,permanentAddress:r.permanentAddress,contactAddress:r.contactAddress,emergencyName:r.emergencyName,emergencyPhoneNumber:r.emergencyPhoneNumber,emergencyCellphone:r.emergencyCellphone,emergencyRelationship:r.emergencyRelationship,company:r.company,department:r.department,jobTitle:r.jobTitle,role:r.role,employmentStatus:r.employmentStatus,hireDate:r.hireDate,salary:r.salary,formStatus:r.formStatus,extNumber:r.extNumber,printNumber:r.printNumber,cowellAccount:r.cowellAccount,cowellPassword:r.cowellPassword,YSRCAccount:r.YSRCAccount,YSRCPassword:r.YSRCPassword,YS168Account:r.YS168Account,YS168Password:r.YS168Password,guideLicense:r.guideLicense,tourManager:r.tourManager,disabilityStatus:r.disabilityStatus,indigenousStatus:r.indigenousStatus,healthInsuranceStartDate:r.healthInsuranceStartDate,healthInsuranceEndDate:r.healthInsuranceEndDate,laborInsuranceStartDate:r.laborInsuranceStartDate,laborInsuranceEndDate:r.laborInsuranceEndDate,voluntaryPensionRate:r.voluntaryPensionRate,voluntaryPensionStartDate:r.voluntaryPensionStartDate,voluntaryPensionEndDate:r.voluntaryPensionEndDate,tourismReportDate:r.tourismReportDate,salaryBank:r.salaryBank,salaryBankBranch:r.salaryBankBranch,salaryAccountNumber:r.salaryAccountNumber,dependentInsurance:r.dependentInsurance}),await c.post("/user",r),await De(!0)}await Promise.all([(v=Ka.value)==null?void 0:v.refreshChart(),(P=el.value)==null?void 0:P.refreshChart(),($=ml.value)==null?void 0:$.refreshData()]),u({text:S.value?"員工資料更新成功":"員工新增成功",snackbarProps:{color:"teal-lighten-1"}}),tl()}catch(r){const t=xt(r);u({text:t,snackbarProps:{color:"red-lighten-1"}})}}),xt=a=>a.response?{Email已註冊:"Email已經被註冊,請使用其他Email",身分證號碼已註冊:"身分證號碼已經被使用,請確認是否輸入正確",手機號碼已註冊:"手機號碼已經被使用,請確認是否輸入正確",分機號碼已註冊:"分機號碼已經被使用,請使用其他號碼",列印編號已註冊:"列印編號已經存在,請使用其他編號",員工編號已註冊:"員工編號已經被使用,請重新輸入",科威帳號已註冊:"科威帳號已經被使用,請使用其他帳號",科威密碼已註冊:"科威密碼已經被使用,請使用其他密碼"}[a.response.data.message]||a.response.data.message:"發生錯誤",yl=async a=>{var e,v;if(je.value=!0,!yt.value){u({text:"權限不足",snackbarProps:{color:"red-lighten-1"}});return}je.value=!0,Qa.value=!0,Y.value=ee.value,ae.value.open=!0,a?(S.value=!0,ae.value.id=a._id,a.company&&(Q.value=a.company._id,xe.value.value=a.company._id,await ka(a.company._id),a.department&&a.department._id&&(Ce.value.value=a.department._id)),We.value.value=a.email,qe.value.value=a.personalEmail,Fe.value.value=a.name,He.value.value=a.englishName,ye.value.value=a.gender,Te.value.value=a.IDNumber,Xe.value.value=a.phoneNumber,Ge.value.value=a.cellphone,Ie.value.value=W(a.birthDate),ke.value.value=a.permanentAddress,Me.value.value=a.contactAddress,na.value.value=a.emergencyName,sa.value.value=a.emergencyPhoneNumber,oa.value.value=a.emergencyCellphone,ua.value.value=a.emergencyRelationship,ta.value.value=a.userId??"",Qe.value.value=a.jobTitle,Je.value.value=a.salary,ea.value.value=a.role,Ze.value.value=a.extNumber,Ke.value.value=a.printNumber,we.value.value=a.employmentStatus,Ve.value.value=W(a.hireDate),pe.value.value=W(a.resignationDate),ra.value.value=a.note??"",he.value.value=a.formStatus,aa.value.value=a.cowellAccount,la.value.value=a.cowellPassword,pa.value.value=a.YSRCAccount,ga.value.value=a.YSRCPassword,fa.value.value=a.YS168Account,ba.value.value=a.YS168Password,ma.value.value=a.guideLicense,va.value.value=a.tourManager,ya.value.value=a.disabilityStatus,Va.value.value=a.indigenousStatus,Pe.value.value=W(a.healthInsuranceStartDate),Ne.value.value=W(a.healthInsuranceEndDate),Re.value.value=W(a.laborInsuranceStartDate),Ee.value.value=W(a.laborInsuranceEndDate),ha.value.value=a.voluntaryPensionRate,$e.value.value=W(a.voluntaryPensionStartDate),Be.value.value=W(a.voluntaryPensionEndDate),Ae.value.value=W(a.tourismReportDate),da.value.value=a.salaryBank,ia.value.value=a.salaryBankBranch,ca.value.value=a.salaryAccountNumber,O.value=a.dependentInsurance||[],fl.value.value=a.dependentInsurance||[],m.value={email:a.email,personalEmail:a.personalEmail,name:a.name,englishName:a.englishName,gender:a.gender,IDNumber:a.IDNumber,phoneNumber:a.phoneNumber,cellphone:a.cellphone,birthDate:W(a.birthDate),permanentAddress:a.permanentAddress,contactAddress:a.contactAddress,emergencyName:a.emergencyName,emergencyPhoneNumber:a.emergencyPhoneNumber,emergencyCellphone:a.emergencyCellphone,emergencyRelationship:a.emergencyRelationship,company:(e=a.company)==null?void 0:e._id,department:(v=a.department)==null?void 0:v._id,userId:a.userId??"",jobTitle:a.jobTitle,salary:a.salary,role:a.role,extNumber:a.extNumber,printNumber:a.printNumber,employmentStatus:a.employmentStatus,hireDate:W(a.hireDate),resignationDate:W(a.resignationDate),note:a.note??"",formStatus:a.formStatus,cowellAccount:a.cowellAccount,cowellPassword:a.cowellPassword,YSRCAccount:a.YSRCAccount,YSRCPassword:a.YSRCPassword,YS168Account:a.YS168Account,YS168Password:a.YS168Password,guideLicense:a.guideLicense??[],tourManager:a.tourManager,disabilityStatus:a.disabilityStatus,indigenousStatus:a.indigenousStatus,healthInsuranceStartDate:W(a.healthInsuranceStartDate),healthInsuranceEndDate:W(a.healthInsuranceEndDate),laborInsuranceStartDate:W(a.laborInsuranceStartDate),laborInsuranceEndDate:W(a.laborInsuranceEndDate),voluntaryPensionRate:a.voluntaryPensionRate,voluntaryPensionStartDate:W(a.voluntaryPensionStartDate),voluntaryPensionEndDate:W(a.voluntaryPensionEndDate),tourismReportDate:W(a.tourismReportDate),salaryBank:a.salaryBank,salaryBankBranch:a.salaryBankBranch,salaryAccountNumber:a.salaryAccountNumber,dependentInsurance:a.dependentInsurance||[]},console.log("originalData:",m.value),localStorage.setItem("userTablePage",ee.value.toString())):(S.value=!1,ae.value.id="",m.value=null,Q.value=null,F.value=[],O.value=[],fl.value.value=[],gl(),Ve.value.value=new Date),setTimeout(()=>{je.value=!1,Qa.value=!1},300)},tl=()=>{ae.value.open=!1,Q.value=null,F.value=[],m.value=null,O.value=[],gl()},Ct=a=>{ie.value={open:!0,userId:a._id,userName:a.name,loading:!1}},Vl=()=>{ie.value={open:!1,userId:"",userName:"",loading:!1}},wt=async()=>{var a,e,v,P,$;try{Ye.value=!0,await c.delete(`/user/${ae.value.id}`),tl(),await De(!0),await((a=Ka.value)==null?void 0:a.refreshChart()),await((e=el.value)==null?void 0:e.refreshChart()),await((v=ml.value)==null?void 0:v.refreshData()),u({text:"員工刪除成功",snackbarProps:{color:"teal-lighten-1"}})}catch(r){console.error("Delete user error:",r),u({text:(($=(P=r==null?void 0:r.response)==null?void 0:P.data)==null?void 0:$.message)||"刪除失敗",snackbarProps:{color:"red-lighten-1"}})}finally{Ye.value=!1,p.value=!1}},Pt=()=>{ke.value.value&&(Me.value.value=ke.value.value)},Nt=a=>{a<1&&(a=1);const e=Math.ceil(ll.value/La.value);a>e&&(a=e),ee.value!==a&&(ee.value=a,localStorage.removeItem("userTablePage"),De(!1))},Rt=()=>{D.value={role:"",companyId:"",department:"",gender:"",employmentStatus:"",dateType:"",dateRange:[],indigenousStatus:"",tourManager:"",guideLicense:"",disabilityStatus:"",formStatus:""},F.value=[],bl.value="",Ia.value="",ee.value=1,za()},Et=L(()=>{if(!S.value)return!0;if(!m.value)return!1;const a={email:We.value.value,personalEmail:qe.value.value,name:Fe.value.value,englishName:He.value.value,gender:ye.value.value,IDNumber:Te.value.value,permanentAddress:ke.value.value,contactAddress:Me.value.value,phoneNumber:Xe.value.value,cellphone:Ge.value.value,emergencyName:na.value.value,emergencyPhoneNumber:sa.value.value,emergencyCellphone:oa.value.value,emergencyRelationship:ua.value.value,birthDate:Ie.value.value,hireDate:Ve.value.value,resignationDate:pe.value.value,healthInsuranceStartDate:Pe.value.value,healthInsuranceEndDate:Ne.value.value,laborInsuranceStartDate:Re.value.value,laborInsuranceEndDate:Ee.value.value,voluntaryPensionStartDate:$e.value.value,voluntaryPensionEndDate:Be.value.value,tourismReportDate:Ae.value.value,company:Q.value,department:Ce.value.value,jobTitle:Qe.value.value,role:ea.value.value,extNumber:Ze.value.value,printNumber:Ke.value.value,employmentStatus:we.value.value,salary:Je.value.value,note:ra.value.value??"",tourManager:va.value.value,guideLicense:ma.value.value,disabilityStatus:ya.value.value,indigenousStatus:Va.value.value,voluntaryPensionRate:ha.value.value,salaryBank:da.value.value,salaryBankBranch:ia.value.value,salaryAccountNumber:ca.value.value,cowellAccount:aa.value.value,cowellPassword:la.value.value,YSRCAccount:pa.value.value,YSRCPassword:ga.value.value,YS168Account:fa.value.value,YS168Password:ba.value.value,userId:ta.value.value,formStatus:he.value.value},e=["email","personalEmail","name","englishName","gender","IDNumber","permanentAddress","contactAddress","phoneNumber","cellphone"].some(r=>m.value[r]!==a[r]),v=["birthDate","hireDate","resignationDate","healthInsuranceStartDate","healthInsuranceEndDate","laborInsuranceStartDate","laborInsuranceEndDate","voluntaryPensionStartDate","voluntaryPensionEndDate","tourismReportDate"].some(r=>{const t=m.value[r]?new Date(m.value[r]).getTime():null,M=a[r]?new Date(a[r]).getTime():null;return t!==M}),P=(()=>{const r=m.value.dependentInsurance||[],t=O.value||[];return r.length!==t.length?(console.log("Dependents length changed"),!0):t.some((M,G)=>{const z=r[G];return z?["dependentName","dependentIDNumber","dependentRelationship","dependentBirthDate","dependentInsuranceStartDate","dependentInsuranceEndDate"].some(se=>{if(se.includes("Date")){const Dl=z[se]?new Date(z[se]).getTime():null,Sl=M[se]?new Date(M[se]).getTime():null;return console.log(`Comparing ${se}:`,Dl,Sl),Dl!==Sl}else return console.log(`Comparing ${se}:`,z[se],M[se]),z[se]!==M[se]}):!0})})();console.log("Dependents changed:",P);const $=["company","department","jobTitle","role","extNumber","printNumber","employmentStatus","salary","note","tourManager","guideLicense","disabilityStatus","indigenousStatus","voluntaryPensionRate","salaryBank","salaryBankBranch","salaryAccountNumber","emergencyName","emergencyPhoneNumber","emergencyCellphone","emergencyRelationship","cowellAccount","cowellPassword","YSRCAccount","YSRCPassword","YS168Account","YS168Password","userId","formStatus"].some(r=>Array.isArray(m.value[r])?JSON.stringify(m.value[r])!==JSON.stringify(a[r]):m.value[r]!==a[r]);return console.log("Changes detected:",{basicInfoChanged:e,datesChanged:v,dependentsChanged:P,otherFieldsChanged:$}),e||v||P||$}),ka=async a=>{var e;try{if(ae.value.open?Q.value=a:D.value={...D.value,companyId:a,department:""},!a){F.value=[];return}console.log("正在載入公司ID的部門:",a);const{data:v}=await c.get("/department/all",{params:{companyId:a,itemsPerPage:100}});console.log("API 返回的部門數據:",v),v.success?(F.value=((e=v.result)==null?void 0:e.data)||[],console.log("設置過濾後的部門列表:",F.value)):(console.warn("找不到該公司的部門"),F.value=[])}catch(v){console.error("載入部門失敗:",v),u({text:"載入部門資料失敗",snackbarProps:{color:"red-lighten-1"}}),F.value=[]}},$t=Nl.debounce(a=>{De(!0)},300),hl=Nl.debounce(a=>{ee.value=1,za()},300);return ue(Ia,a=>{hl(a)}),ue(Q,async a=>{a!=null?(xe.value.value=a,Ce.value.value="",await ka(a)):(xe.value.value=null,Ce.value.value="",F.value=[])}),ue(()=>D.value.companyId,async a=>{a?await ka(a):F.value=[]}),ue(()=>D.value.dateRange,a=>{console.log("選擇的日期區間:",a)}),ue(xe.value,a=>{a&&a.value!==null&&a.value!==void 0&&(Q.value=a.value)}),ue(we.value,a=>{je.value||(a==="離職"?Ma.value=!0:(Ma.value=!1,pe.value.value=null))}),ue(()=>Te.value.value,a=>{if(!a){ye.value.value=null,Ya.value="";return}if(a.length===10&&a!==Ya.value&&!Qa.value&&/^[A-Za-z][12]\d{8}$/.test(a)){const v=a.charAt(1);v==="1"?(ye.value.value="男性",Ya.value=a,u({text:"已自動設定性別為男性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}})):v==="2"&&(ye.value.value="女性",Ya.value=a,u({text:"已自動設定性別為女性",snackbarProps:{color:"teal-lighten-1",timeout:1e3}}))}}),xl(async()=>{const a=localStorage.getItem("userTablePage");a&&(ee.value=parseInt(a),Da.value++),await Dt(),await ht(),await St(),await De(!0)}),xl(()=>{const a=localStorage.getItem("userTablePage");a&&parseInt(a)>0?(ee.value=parseInt(a),Da.value++,localStorage.removeItem("userTablePage")):ee.value=1}),cn(()=>{$t.cancel(),hl.cancel()}),(a,e)=>{var P,$,r;const v=Wl("v-date-input");return A(),ne(Se,null,[l(Sn,{"max-width":"2500"},{default:s(()=>[l(q,{class:"py-0 mt-2 ma-sm-1 ma-md-6"},{default:s(()=>[n(k)?(A(),X(d,{key:0,class:"ps-4 pe-6 py-0"},{default:s(()=>[l(yn,{ref_key:"chartRef",ref:Ka},null,512)]),_:1})):Z("",!0),n(g)?(A(),X(d,{key:1,class:"ps-4 pe-6 py-0"},{default:s(()=>[l(Vn,{ref_key:"turnoverChartRef",ref:el},null,512)]),_:1})):Z("",!0),l(d,{cols:"12",lg:"6",xl:"5",class:"pa-0 mb-6 mb-sm-0"},{default:s(()=>[l(Wa,{class:"d-flex mx-3 mx-sm-4 px-4 pt-2 pt-sm-3 pb-4 pb-sm-5",elevation:"4",rounded:"lg",height:"100%"},{default:s(()=>[l(xa,{class:"d-flex align-center"},{default:s(()=>[l(q,{class:"h-100"},{default:s(()=>[l(d,{cols:"12",class:"d-flex flex-column justify-center"},{default:s(()=>[l(q,null,{default:s(()=>e[93]||(e[93]=[_("h6",{style:{"font-size":"16px"},class:"ps-3 mb-1"}," 搜尋篩選 ",-1)])),_:1}),l(q,null,{default:s(()=>[l(d,{cols:"12",sm:"4"},{default:s(()=>[l(Ca,{modelValue:D.value.companyId,"onUpdate:modelValue":[e[0]||(e[0]=t=>D.value.companyId=t),ka],items:at.value,label:"公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:"",filter:(t,M)=>{const G=`${t.title}`.toLowerCase(),z=M.toLowerCase();return G.includes(z)}},null,8,["modelValue","items","filter"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(Ca,{modelValue:D.value.department,"onUpdate:modelValue":e[1]||(e[1]=t=>D.value.department=t),items:F.value,label:"部門","item-title":t=>t!=null&&t.name&&(t!=null&&t.departmentId)?`${t.name} (${t.departmentId})`:"","item-value":"_id",variant:"outlined",density:"compact","hide-details":"",clearable:"",disabled:!D.value.companyId,loading:!F.value.length&&!!D.value.companyId,filter:(t,M)=>{const G=t!=null&&t.name&&(t!=null&&t.departmentId)?`${t.name} ${t.departmentId}`.toLowerCase():"",z=M.toLowerCase();return G.includes(z)},"no-data-text":"找不到相關部門"},null,8,["modelValue","items","item-title","disabled","loading","filter"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(te,{modelValue:D.value.role,"onUpdate:modelValue":e[2]||(e[2]=t=>D.value.role=t),items:vl.value,label:"身分別","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),l(q,null,{default:s(()=>[l(d,{cols:"12",sm:"4"},{default:s(()=>[l(te,{modelValue:D.value.employmentStatus,"onUpdate:modelValue":e[3]||(e[3]=t=>D.value.employmentStatus=t),items:pl.value,label:"任職狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(te,{modelValue:D.value.guideLicense,"onUpdate:modelValue":e[4]||(e[4]=t=>D.value.guideLicense=t),items:Ja,label:"導遊領隊證","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",sm:"4"},{default:s(()=>[l(te,{modelValue:D.value.disabilityStatus,"onUpdate:modelValue":e[5]||(e[5]=t=>D.value.disabilityStatus=t),items:Za,label:"身心障礙身份","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(q,{class:"d-flex align-center"},{default:s(()=>[l(d,{cols:"12",sm:"4"},{default:s(()=>[l(te,{modelValue:D.value.formStatus,"onUpdate:modelValue":e[6]||(e[6]=t=>D.value.formStatus=t),items:cl,label:"表單狀態","item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),l(d,null,{default:s(()=>[l(q,{class:"border rounded"},{default:s(()=>[l(d,{cols:"12",sm:"6",class:"pa-2"},{default:s(()=>[l(te,{modelValue:D.value.dateType,"onUpdate:modelValue":e[7]||(e[7]=t=>D.value.dateType=t),items:j.value,label:"日期類型",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",sm:"6",class:"pa-2"},{default:s(()=>[l(v,{modelValue:D.value.dateRange,"onUpdate:modelValue":e[8]||(e[8]=t=>D.value.dateRange=t),label:"日期區間",variant:"outlined",density:"compact","hide-details":"",multiple:"range","prepend-icon":"",clearable:"","ok-text":"確認","cancel-text":"取消"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(q,{class:"mt-5"},{default:s(()=>[l(d,{cols:"6",sm:"4",class:"pe-0 py-0"},{default:s(()=>[_("div",Hn,[e[96]||(e[96]=_("label",{class:"text-grey-darken-1 search-label"},"原住民身分",-1)),l(nl,{modelValue:D.value.indigenousStatus,"onUpdate:modelValue":e[9]||(e[9]=t=>D.value.indigenousStatus=t),column:"",class:"custom-chip-group"},{default:s(()=>[l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"是",label:""},{default:s(()=>e[94]||(e[94]=[C(" 是 ")])),_:1}),l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"否",label:""},{default:s(()=>e[95]||(e[95]=[C(" 否 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),l(d,{cols:"6",sm:"4",class:"pe-0 py-0"},{default:s(()=>[_("div",Xn,[e[99]||(e[99]=_("label",{class:"text-grey-darken-1 search-label"},"旅遊經理人",-1)),l(nl,{modelValue:D.value.tourManager,"onUpdate:modelValue":e[10]||(e[10]=t=>D.value.tourManager=t),column:"",class:"custom-chip-group"},{default:s(()=>[l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"是",label:""},{default:s(()=>e[97]||(e[97]=[C(" 是 ")])),_:1}),l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"否",label:""},{default:s(()=>e[98]||(e[98]=[C(" 否 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),l(d,{cols:"12",sm:"4",class:"pe-0 py-0"},{default:s(()=>[_("div",Gn,[e[102]||(e[102]=_("label",{class:"text-grey-darken-1 search-label"},"性別",-1)),l(nl,{modelValue:D.value.gender,"onUpdate:modelValue":e[11]||(e[11]=t=>D.value.gender=t),column:"",class:"custom-chip-group"},{default:s(()=>[l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"男性",label:""},{default:s(()=>e[100]||(e[100]=[C(" 男性 ")])),_:1}),l(fe,{filter:"",variant:"outlined",color:"blue-grey-darken-2",value:"女性",label:""},{default:s(()=>e[101]||(e[101]=[C(" 女性 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(q,null,{default:s(()=>[l(sl),l(d,{cols:"12",class:"d-flex justify-end gap-2"},{default:s(()=>[l(q,null,{default:s(()=>[l(d,{cols:"3"},{default:s(()=>[l(J,{color:"grey",block:"",onClick:Rt},{default:s(()=>[l(be,null,{default:s(()=>e[103]||(e[103]=[C("mdi-refresh")])),_:1})]),_:1})]),_:1}),l(d,null,{default:s(()=>[l(J,{"prepend-icon":"mdi-magnify",color:"cyan-darken-2",loading:Ye.value,block:"",onClick:e[12]||(e[12]=()=>{console.log("Current search criteria:",D.value.value),za()})},{default:s(()=>e[104]||(e[104]=[C(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(q,{class:"elevation-4 rounded-lg py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-10 mx-0 mx-sm-4 mx-md-10 mb-4 bg-white"},{default:s(()=>[l(d,{cols:"12",class:"ps-3 pb-6"},{default:s(()=>e[105]||(e[105]=[_("h3",null," 員工管理 ",-1)])),_:1}),l(d,{cols:"12"},{default:s(()=>[l(q,null,{default:s(()=>[l(d,null,{default:s(()=>[l(q,null,{default:s(()=>[l(d,null,{default:s(()=>[l(J,{"prepend-icon":"mdi-account-plus",variant:"outlined",color:"blue-grey-darken-2",onClick:e[13]||(e[13]=t=>yl(null))},{default:s(()=>e[106]||(e[106]=[C(" 新增使用者 ")])),_:1})]),_:1}),l(d,{sm:"4",lg:"3",xl:"2"},{default:s(()=>[l(q,{class:"d-flex align-center"},{default:s(()=>[n(f)?(A(),X(d,{key:0,cols:"2",class:"ps-lg-5"},{default:s(()=>[Oe(l(be,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2"},null,512),[[ja,"可搜尋員編、姓名、個人Email、公司Email、手機、分機、職稱、地址、備註","start"]])]),_:1})):Z("",!0),l(d,null,{default:s(()=>[l(B,{modelValue:Ia.value,"onUpdate:modelValue":e[14]||(e[14]=t=>Ia.value=t),label:"搜尋","append-inner-icon":"mdi-magnify","base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12"},{default:s(()=>[(A(),X(In,{key:Da.value,"items-per-page":La.value,"onUpdate:itemsPerPage":[e[15]||(e[15]=t=>La.value=t),e[17]||(e[17]=t=>De(!1))],"sort-by":_a.value,"onUpdate:sortBy":[e[16]||(e[16]=t=>_a.value=t),e[18]||(e[18]=t=>De(!1))],page:ee.value,density:"compact",class:"rounded-ts-lg rounded-te-lg py-3","items-per-page-options":[10,20,50],items:ce.value,headers:Vt.value,"header-props":y,loading:Ye.value,"items-length":ll.value,search:bl.value,hover:"","onUpdate:page":Nt},{item:s(({item:t,index:M})=>{var G,z;return[_("tr",{class:vn({"odd-row":M%2===0,"even-row":M%2!==0})},[_("td",null,H(t.userId),1),_("td",null,H(t.name),1),n(g)?(A(),ne("td",Jn,H(t.email),1)):Z("",!0),n(k)?(A(),ne("td",Zn,H(t.cellphone),1)):Z("",!0),n(f)?(A(),ne("td",Kn,H(((G=t.company)==null?void 0:G.name)||""),1)):Z("",!0),n(f)?(A(),ne("td",Qn,H(((z=t.department)==null?void 0:z.name)||""),1)):Z("",!0),_("td",null,H(t.extNumber),1),n(I)?(A(),ne("td",es,H(bt(t.role)),1)):Z("",!0),n(k)?(A(),ne("td",as,H(t.employmentStatus),1)):Z("",!0),n(g)?(A(),ne("td",ls,[l(wl,null,{activator:s(({props:ge})=>[Oe((A(),X(fe,me(ge,{color:ve(t.formStatus),variant:"outlined",size:"small",label:"",loading:t._id===w.value,disabled:t._id===w.value}),{default:s(()=>[C(H(t.formStatus),1)]),_:2},1040,["color","loading","disabled"])),[[ja,"更改表單狀態"]])]),default:s(()=>[l(Bl,null,{default:s(()=>[(A(),ne(Se,null,Ha(Pa,ge=>l(Al,{key:ge,active:t.formStatus===ge,onClick:se=>T(t._id,ge)},{default:s(()=>[l(Ul,null,{default:s(()=>[C(H(ge),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:2},1024)]),_:2},1024)])):Z("",!0),_("td",ts,[l(J,{icon:"",color:"light-blue-darken-4",variant:"plain",width:"28",size:U.value,ripple:!1,onClick:ge=>yl(t)},{default:s(()=>[l(be,null,{default:s(()=>e[107]||(e[107]=[C("mdi-pencil")])),_:1})]),_:2},1032,["size","onClick"]),t.isFirstLogin?Oe((A(),X(J,{key:0,icon:"",color:"teal-darken-1",variant:"plain",width:"28",class:"ms-2",size:U.value,ripple:!1,onClick:ge=>Ct(t)},{default:s(()=>[l(be,null,{default:s(()=>e[108]||(e[108]=[C("mdi-key-variant")])),_:1})]),_:2},1032,["size","onClick"])),[[ja,"發送初始密碼"]]):Z("",!0)])],2)]}),_:1},8,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Cl,{modelValue:ie.value.open,"onUpdate:modelValue":e[19]||(e[19]=t=>ie.value.open=t),persistent:"","max-width":"360"},{default:s(()=>[l(Wa,{class:"rounded-lg pa-4"},{default:s(()=>[e[113]||(e[113]=_("div",{class:"card-title pa-4"}," 發送初始密碼 ",-1)),_("div",ns,[e[109]||(e[109]=C(" 確定要發送系統生成的初始密碼給 ")),_("span",ss,H(ie.value.userName),1),e[110]||(e[110]=C(" 嗎？ "))]),l(Pl,{class:"pa-4 pt-0"},{default:s(()=>[l(sl),l(J,{color:"grey",variant:"outlined",size:"small",onClick:Vl},{default:s(()=>e[111]||(e[111]=[C(" 取消 ")])),_:1}),l(J,{color:"teal-darken-1",variant:"outlined",size:"small",loading:ie.value.loading,onClick:It},{default:s(()=>e[112]||(e[112]=[C(" 確認發送 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Cl,{modelValue:ae.value.open,"onUpdate:modelValue":e[88]||(e[88]=t=>ae.value.open=t),persistent:"",width:tt.value},{default:s(()=>[l(kn,{disabled:n(al),onSubmit:pn(n(kt),["prevent"])},{default:s(()=>[l(Wa,{class:"rounded-lg px-4 py-6"},{default:s(()=>[_("div",os,[C(H(ae.value.id?"員工資料編輯":"新增員工")+" ",1),l(wl,null,{activator:s(({props:t})=>[Oe((A(),X(fe,me(t,{color:ve(n(he).value.value),variant:"outlined",size:U.value,label:"",class:"ml-2",loading:V.value,disabled:V.value}),{default:s(()=>[C(H(n(he).value.value),1)]),_:2},1040,["color","size","loading","disabled"])),[[ja,"點擊更改表單狀態","start"]])]),default:s(()=>[l(Bl,null,{default:s(()=>[(A(),ne(Se,null,Ha(Pa,t=>l(Al,{key:t,active:n(he).value.value===t,onClick:M=>S.value?Kl(t):n(he).value.value=t},{default:s(()=>[l(Ul,null,{default:s(()=>[C(H(t),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:1})]),_:1})]),_("div",us,[l(On,{modelValue:Ra.value,"onUpdate:modelValue":e[20]||(e[20]=t=>Ra.value=t),color:"blue-grey-darken-2","align-tabs":"center","mobile-breakpoint":"sm",density:"compact",height:"40"},{default:s(()=>[l(qa,{value:"basic",class:"tab-title"},{default:s(()=>[l(be,{start:""},{default:s(()=>e[114]||(e[114]=[C(" mdi-account-outline ")])),_:1}),e[115]||(e[115]=C(" 個人資訊 "))]),_:1}),l(qa,{value:"employment",class:"tab-title"},{default:s(()=>[l(be,{start:""},{default:s(()=>e[116]||(e[116]=[C(" mdi-briefcase-outline ")])),_:1}),e[117]||(e[117]=C(" 任職資訊 "))]),_:1}),l(qa,{value:"insurance",class:"tab-title"},{default:s(()=>[l(be,{start:""},{default:s(()=>e[118]||(e[118]=[C(" mdi-shield-account-outline ")])),_:1}),e[119]||(e[119]=C(" 保險及薪轉資訊 "))]),_:1})]),_:1},8,["modelValue"])]),je.value&&S.value?(A(),X(xa,{key:0,class:"d-flex justify-center align-center",style:{height:"600px"}},{default:s(()=>[l(gn,{indeterminate:"",color:"blue-grey-darken-2",size:R.value},null,8,["size"])]),_:1})):(A(),X(Jl,{key:1,modelValue:Ra.value,"onUpdate:modelValue":e[86]||(e[86]=t=>Ra.value=t),class:"mx-1 overflow-y-auto"},{default:s(()=>[l(Fa,{value:"basic"},{default:s(()=>[l(xa,{class:"mt-3 pa-3"},{default:s(()=>[l(q,null,{default:s(()=>[l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Fe).value.value,"onUpdate:modelValue":e[21]||(e[21]=t=>n(Fe).value.value=t),"error-messages":n(Fe).errorMessage.value,label:"*姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(He).value.value,"onUpdate:modelValue":e[22]||(e[22]=t=>n(He).value.value=t),"error-messages":n(He).errorMessage.value,label:"英文名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Te).value.value,"onUpdate:modelValue":e[23]||(e[23]=t=>n(Te).value.value=t),"error-messages":n(Te).errorMessage.value,label:"*身分證號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(ye).value.value,"onUpdate:modelValue":e[24]||(e[24]=t=>n(ye).value.value=t),items:lt.value,"error-messages":n(ye).errorMessage.value,label:"*性別",variant:"outlined",density:"compact"},null,8,["modelValue","items","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(ya).value.value,"onUpdate:modelValue":e[25]||(e[25]=t=>n(ya).value.value=t),"error-messages":n(ya).errorMessage.value,items:re,"item-title":"title","item-value":"value",label:"身心障礙身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(Va).value.value,"onUpdate:modelValue":e[26]||(e[26]=t=>n(Va).value.value=t),"error-messages":n(Va).errorMessage.value,items:Xa,"item-title":"title","item-value":"value",label:"原住民身份",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(v,{modelValue:n(Ie).value.value,"onUpdate:modelValue":e[27]||(e[27]=t=>n(Ie).value.value=t),"error-messages":n(Ie).errorMessage.value,label:"*生日","prepend-icon":"",variant:"outlined",density:"compact",hint:n(ut),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[28]||(e[28]=t=>n(Ie).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Xe).value.value,"onUpdate:modelValue":e[29]||(e[29]=t=>n(Xe).value.value=t),"error-messages":n(Xe).errorMessage.value,label:"室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"2",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ge).value.value,"onUpdate:modelValue":e[30]||(e[30]=t=>n(Ge).value.value=t),"error-messages":n(Ge).errorMessage.value,label:"手機號碼",maxlength:"10",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(qe).value.value,"onUpdate:modelValue":e[31]||(e[31]=t=>n(qe).value.value=t),"error-messages":n(qe).errorMessage.value,label:"個人Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ke).value.value,"onUpdate:modelValue":e[32]||(e[32]=t=>n(ke).value.value=t),"error-messages":n(ke).errorMessage.value,label:"*戶籍地址",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Me).value.value,"onUpdate:modelValue":e[33]||(e[33]=t=>n(Me).value.value=t),"error-messages":n(Me).errorMessage.value,label:"*聯絡地址",type:"text",variant:"outlined",density:"compact",clearable:""},{"append-inner":s(()=>[l(xn,{location:"top","close-delay":"200"},{activator:s(({tprops:t})=>[l(be,me(t,{icon:"mdi-content-copy",onClick:Pt}),null,16)]),default:s(()=>[e[120]||(e[120]=C(" 複製戶籍地址 "))]),_:1})]),_:1},8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12"},{default:s(()=>[l(q,{class:"d-flex align-center my-2"},{default:s(()=>[l(d,{cols:"3",sm:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(d,{cols:"6",sm:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[121]||(e[121]=[C(" 緊急連絡人資訊 ")])),_:1}),l(d,{cols:"3",sm:"4"},{default:s(()=>[l(wa)]),_:1})]),_:1})]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(na).value.value,"onUpdate:modelValue":e[34]||(e[34]=t=>n(na).value.value=t),"error-messages":n(na).errorMessage.value,label:"緊急聯絡人姓名",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(sa).value.value,"onUpdate:modelValue":e[35]||(e[35]=t=>n(sa).value.value=t),"error-messages":n(sa).errorMessage.value,label:"緊急聯絡人室內電話",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(oa).value.value,"onUpdate:modelValue":e[36]||(e[36]=t=>n(oa).value.value=t),"error-messages":n(oa).errorMessage.value,label:"緊急聯絡人手機",type:"text",maxlength:"10",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ua).value.value,"onUpdate:modelValue":e[37]||(e[37]=t=>n(ua).value.value=t),"error-messages":n(ua).errorMessage.value,label:"緊急聯絡人關係",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Fa,{value:"employment"},{default:s(()=>[l(xa,{class:"mt-3 pa-3"},{default:s(()=>[l(q,null,{default:s(()=>[S.value?(A(),X(d,{key:0,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ta).value.value,"onUpdate:modelValue":e[38]||(e[38]=t=>n(ta).value.value=t),"error-messages":n(ta).errorMessage.value,label:"*員工編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})):Z("",!0),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-2"},{default:s(()=>[l(Ca,{modelValue:Q.value,"onUpdate:modelValue":[e[39]||(e[39]=t=>Q.value=t),ka],"error-messages":n(xe).errorMessage.value,items:et.value,label:"*所屬公司","item-title":"title","item-value":"value",variant:"outlined",density:"compact",clearable:"",hint:"可輸入公司編號、名稱搜尋","persistent-hint":"",error:!!n(xe).errorMessage.value,filter:(t,M)=>{const G=`${t.title}`.toLowerCase(),z=M.toLowerCase();return G.includes(z)}},null,8,["modelValue","error-messages","items","error","filter"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(Ca,{modelValue:n(Ce).value.value,"onUpdate:modelValue":e[40]||(e[40]=t=>n(Ce).value.value=t),items:F.value,"error-messages":n(Ce).errorMessage.value,"item-title":t=>t!=null&&t.name&&(t!=null&&t.departmentId)?`${t.name} (${t.departmentId})`:"","item-value":"_id",label:"*選擇部門",variant:"outlined",density:"compact",clearable:"",hint:"可輸入部門編號、名稱搜尋","persistent-hint":"",loading:!F.value.length&&!!Q.value,filter:(t,M)=>{const G=t!=null&&t.name&&(t!=null&&t.departmentId)?`${t.name} ${t.departmentId}`.toLowerCase():"",z=M.toLowerCase();return G.includes(z)},"no-data-text":"找不到相關部門"},null,8,["modelValue","items","error-messages","item-title","loading","filter"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Qe).value.value,"onUpdate:modelValue":e[41]||(e[41]=t=>n(Qe).value.value=t),"error-messages":n(Qe).errorMessage.value,label:"職稱",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(ea).value.value,"onUpdate:modelValue":e[42]||(e[42]=t=>n(ea).value.value=t),"error-messages":n(ea).errorMessage.value,items:vl.value,"item-title":"title","item-value":"value",label:"*權限",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(v,{modelValue:n(Ve).value.value,"onUpdate:modelValue":e[43]||(e[43]=t=>n(Ve).value.value=t),"error-messages":n(Ve).errorMessage.value,label:"*入職日期","prepend-icon":"",variant:"outlined",density:"compact",hint:n(rt),"persistent-hint":"",clearable:"","cancel-text":"取消","ok-text":"確認","onClick:clear":e[44]||(e[44]=t=>n(Ve).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(we).value.value,"onUpdate:modelValue":e[45]||(e[45]=t=>n(we).value.value=t),"error-messages":n(we).errorMessage.value,items:pl.value,"item-title":"title","item-value":"value",label:"*任職狀態",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages","items"])]),_:1}),n(pe).value.value?(A(),X(d,{key:1,cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(v,{modelValue:n(pe).value.value,"onUpdate:modelValue":e[46]||(e[46]=t=>n(pe).value.value=t),label:"離職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(dt),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[47]||(e[47]=t=>n(pe).value.value=null)},null,8,["modelValue","hint"])]),_:1})):Z("",!0),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ze).value.value,"onUpdate:modelValue":e[48]||(e[48]=t=>n(Ze).value.value=t),"error-messages":n(Ze).errorMessage.value,label:"分機號碼",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Ke).value.value,"onUpdate:modelValue":e[49]||(e[49]=t=>n(Ke).value.value=t),"error-messages":n(Ke).errorMessage.value,label:"列印編號",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(Je).value.value,"onUpdate:modelValue":e[50]||(e[50]=t=>n(Je).value.value=t),"error-messages":n(Je).errorMessage.value,label:"基本薪資",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(te,{modelValue:n(va).value.value,"onUpdate:modelValue":e[51]||(e[51]=t=>n(va).value.value=t),"error-messages":n(va).errorMessage.value,items:K,"item-title":"title","item-value":"value",label:"旅遊經理人",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(v,{modelValue:n(Ae).value.value,"onUpdate:modelValue":e[52]||(e[52]=t=>n(Ae).value.value=t),"error-messages":n(Ae).errorMessage.value,label:"觀光局申報到職日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(ft),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[53]||(e[53]=t=>n(Ae).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",md:"8",lg:"6",class:"pb-0"},{default:s(()=>[l(zn,{modelValue:n(ma).value.value,"onUpdate:modelValue":e[54]||(e[54]=t=>n(ma).value.value=t),"error-messages":n(ma).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12"},{default:s(()=>[l(q,{class:"d-flex align-center my-2"},{default:s(()=>[l(d,{cols:"3",sm:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(d,{cols:"6",sm:"4",class:"text-blue-grey-darken-1 info-title"},{default:s(()=>e[122]||(e[122]=[C(" 系統帳號資訊 ")])),_:1}),l(d,{cols:"3",sm:"4"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1})]),_:1})]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(We).value.value,"onUpdate:modelValue":e[55]||(e[55]=t=>n(We).value.value=t),"error-messages":n(We).errorMessage.value,label:"*公司Email",type:"email",variant:"outlined",density:"compact",clearable:"",autocomplete:"username"},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(aa).value.value,"onUpdate:modelValue":e[56]||(e[56]=t=>n(aa).value.value=t),"error-messages":n(aa).errorMessage.value,label:"科威帳號",type:Ea.value?"text":"password","append-inner-icon":Ea.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[57]||(e[57]=t=>Ea.value=!Ea.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(la).value.value,"onUpdate:modelValue":e[58]||(e[58]=t=>n(la).value.value=t),"error-messages":n(la).errorMessage.value,label:"科威密碼",type:$a.value?"text":"password","append-inner-icon":$a.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[59]||(e[59]=t=>$a.value=!$a.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(pa).value.value,"onUpdate:modelValue":e[60]||(e[60]=t=>n(pa).value.value=t),"error-messages":n(pa).errorMessage.value,label:"YSRC帳號",type:Ba.value?"text":"password","append-inner-icon":Ba.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[61]||(e[61]=t=>Ba.value=!Ba.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ga).value.value,"onUpdate:modelValue":e[62]||(e[62]=t=>n(ga).value.value=t),"error-messages":n(ga).errorMessage.value,label:"YSRC密碼",type:Aa.value?"text":"password","append-inner-icon":Aa.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[63]||(e[63]=t=>Aa.value=!Aa.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(fa).value.value,"onUpdate:modelValue":e[64]||(e[64]=t=>n(fa).value.value=t),"error-messages":n(fa).errorMessage.value,label:"YS168帳號",type:Ua.value?"text":"password","append-inner-icon":Ua.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[65]||(e[65]=t=>Ua.value=!Ua.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ba).value.value,"onUpdate:modelValue":e[66]||(e[66]=t=>n(ba).value.value=t),"error-messages":n(ba).errorMessage.value,label:"YS168密碼",type:Ta.value?"text":"password","append-inner-icon":Ta.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact",clearable:"",autocomplete:"new-password","onClick:appendInner":e[67]||(e[67]=t=>Ta.value=!Ta.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),l(d,{cols:"12",sm:"6",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ra).value.value,"onUpdate:modelValue":e[68]||(e[68]=t=>n(ra).value.value=t),"error-messages":n(ra).errorMessage.value,label:"備註",type:"text",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Fa,{value:"insurance"},{default:s(()=>[l(xa,{class:"mt-3 pa-3"},{default:s(()=>[l(q,null,{default:s(()=>[l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n(Pe).value.value,"onUpdate:modelValue":e[69]||(e[69]=t=>n(Pe).value.value=t),"error-messages":n(Pe).errorMessage.value,label:"健保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(it),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[70]||(e[70]=t=>n(Pe).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n(Ne).value.value,"onUpdate:modelValue":e[71]||(e[71]=t=>n(Ne).value.value=t),"error-messages":n(Ne).errorMessage.value,label:"健保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(ct),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[72]||(e[72]=t=>n(Ne).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n(Re).value.value,"onUpdate:modelValue":e[73]||(e[73]=t=>n(Re).value.value=t),"error-messages":n(Re).errorMessage.value,label:"勞保加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(mt),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[74]||(e[74]=t=>n(Re).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n(Ee).value.value,"onUpdate:modelValue":e[75]||(e[75]=t=>n(Ee).value.value=t),"error-messages":n(Ee).errorMessage.value,label:"勞保退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(vt),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[76]||(e[76]=t=>n(Ee).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(te,{modelValue:n(ha).value.value,"onUpdate:modelValue":e[77]||(e[77]=t=>n(ha).value.value=t),"error-messages":n(ha).errorMessage.value,items:Ga,"item-title":"title","item-value":"value",label:"勞退自提比率",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n($e).value.value,"onUpdate:modelValue":e[78]||(e[78]=t=>n($e).value.value=t),"error-messages":n($e).errorMessage.value,label:"勞退自提加保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(pt),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[79]||(e[79]=t=>n($e).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(v,{modelValue:n(Be).value.value,"onUpdate:modelValue":e[80]||(e[80]=t=>n(Be).value.value=t),"error-messages":n(Be).errorMessage.value,label:"勞保自提退保日期","prepend-icon":"",variant:"outlined",density:"compact","persistent-hint":"",clearable:"",hint:n(gt),"cancel-text":"取消","ok-text":"確認","onClick:clear":e[81]||(e[81]=t=>n(Be).value.value=null)},null,8,["modelValue","error-messages","hint"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(Ca,{modelValue:n(da).value.value,"onUpdate:modelValue":e[82]||(e[82]=t=>n(da).value.value=t),items:Zl.value,"error-messages":n(da).errorMessage.value,label:"薪轉銀行",variant:"outlined",density:"compact","item-title":"title","item-value":"value",clearable:"",hint:"可輸入銀行代碼或銀行名稱搜尋","persistent-hint":""},{selection:s(({item:t})=>[C(H(t.title),1)]),_:1},8,["modelValue","items","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ia).value.value,"onUpdate:modelValue":e[83]||(e[83]=t=>n(ia).value.value=t),"error-messages":n(ia).errorMessage.value,label:"薪轉分行",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",sm:"6",md:"4",class:"pb-0"},{default:s(()=>[l(B,{modelValue:n(ca).value.value,"onUpdate:modelValue":e[84]||(e[84]=t=>n(ca).value.value=t),"error-messages":n(ca).errorMessage.value,label:"薪轉帳戶號碼",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12",class:"mt-10"},{default:s(()=>[l(wa,{color:"blue-grey-darken-2",opacity:"0.3"})]),_:1}),l(d,{cols:"12"},{default:s(()=>[l(Fn,{modelValue:O.value,"onUpdate:modelValue":e[85]||(e[85]=t=>O.value=t),errors:E.value},null,8,["modelValue","errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])),l(Pl,{class:"px-4 mt-4"},{default:s(()=>[l(Cn,null,{default:s(({isHovering:t,props:M})=>[S.value?(A(),X(J,me({key:0},M,{color:t?"red-lighten-1":"grey",variant:"outlined","prepend-icon":"mdi-delete",size:U.value,onClick:e[87]||(e[87]=G=>p.value=!0)}),{default:s(()=>e[123]||(e[123]=[C(" 永久刪除 ")])),_:2},1040,["color","size"])):Z("",!0)]),_:1}),l(sl),l(J,{color:"red-lighten-1",variant:"outlined",size:U.value,loading:n(al),onClick:tl},{default:s(()=>e[124]||(e[124]=[C(" 取消 ")])),_:1},8,["size","loading"]),l(J,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:U.value,loading:n(al),disabled:S.value&&!Et.value},{default:s(()=>e[125]||(e[125]=[C(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue","width"]),l(bn,{modelValue:Ma.value,"onUpdate:modelValue":e[89]||(e[89]=t=>Ma.value=t),onConfirm:e[90]||(e[90]=t=>{n(pe).value.value=t}),onCancel:e[91]||(e[91]=t=>n(we).value.value="在職")},null,8,["modelValue"]),l(hn,{modelValue:p.value,"onUpdate:modelValue":e[92]||(e[92]=t=>p.value=t),title:"確認刪除員工",message:`確定要刪除員工「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((P=m.value)==null?void 0:P.name)||""}</span>」(<span class='text-pink-lighten-1' style='font-weight: 800;'> ${(($=m.value)==null?void 0:$.userId)||""} </span>)嗎？ 此操作無法復原。`,"expected-name":((r=m.value)==null?void 0:r.name)||"","input-label":"員工姓名",onConfirm:wt},null,8,["modelValue","message","expected-name"])],64)}}},ws=dl(rs,[["__scopeId","data-v-a072ac7d"]]);export{ws as default};
