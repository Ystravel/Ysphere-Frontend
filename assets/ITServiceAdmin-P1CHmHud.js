import{aV as Te,x as _,aW as Pe,o as X,z as Ce,A as vt,B as bt,c as e,T as Ee,aX as ft,aY as yt,X as et,a9 as mt,U as De,a0 as ht,a2 as xt,P as kt,a7 as H,a8 as n,at as wt,a6 as C,ai as Ne,ak as _t,ad as w,am as je,ac as Se,au as zt,ab as ne,H as Fe,an as h,K as O,af as u,ag as ve,ae as He,aC as It,aD as tt,aF as Oe,ao as me,ap as lt,av as at,aa as ot,as as st}from"./index-CrP1mq-F.js";import{l as Vt}from"./lodash-DHyxJ22h.js";import{V as St}from"./VContainer-RhMuJ77C.js";import{a as I,V as R}from"./VRow-k1vMvfA4.js";import{V as Ct}from"./VAutocomplete-k3FCf5eq.js";import{V as Dt}from"./VTooltip-COY0GB7O.js";import{V as Re,a as Tt}from"./VDataTableServer-Bc-PJ1cb.js";import{b as nt,V as We,a as Ze}from"./VList-DWCzn2Q2.js";import{V as M}from"./VDivider-BXkJRSsW.js";import{T as ge}from"./index-CP22C5Se.js";import{V as Mt}from"./VForm-Dx2x598f.js";import{V as $t}from"./VTextarea-B9VH9SFi.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-BdjmP_zZ.js";function re(a,m){m===void 0&&(m={});var p=m.insertAt;if(a&&typeof document<"u"){var g=document.head||document.getElementsByTagName("head")[0],L=document.createElement("style");L.type="text/css",p==="top"&&g.firstChild?g.insertBefore(L,g.firstChild):g.appendChild(L),L.styleSheet?L.styleSheet.cssText=a:L.appendChild(document.createTextNode(a))}}re(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");re('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');re(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");re(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");re(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");re(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const D="vel",$=Te({name:"SvgIcon",props:{type:{type:String,default:""}},setup:a=>()=>e("svg",{class:`${D}-icon icon`,"aria-hidden":"true"},[e("use",{"xlink:href":`#icon-${a.type}`},null)])}),Me=typeof window<"u",ie=()=>{};let gt=!1;if(Me)try{const a={};Object.defineProperty(a,"passive",{get(){gt=!0}}),window.addEventListener("test-passive",ie,a)}catch{}const it=function(a,m,p){let g=arguments.length>3&&arguments[3]!==void 0&&arguments[3];Me&&a.addEventListener(m,p,!!gt&&{capture:!1,passive:g})},rt=(a,m,p)=>{Me&&a.removeEventListener(m,p)},Lt=a=>{a.preventDefault()},Bt=Object.prototype.toString,Qe=a=>m=>Bt.call(m).slice(8,-1)===a,qt=a=>!!a&&Qe("Object")(a),ut=a=>!!a&&Qe("String")(a);function At(a){return a!=null}const Yt=Te({name:"Toolbar",props:{zoomIn:{type:Function,default:ie},zoomOut:{type:Function,default:ie},rotateLeft:{type:Function,default:ie},rotateRight:{type:Function,default:ie},resize:{type:Function,default:ie},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:a=>()=>e("div",{class:`${D}-toolbar`},[!a.zoomDisabled&&e(De,null,[e("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:a.zoomIn},[e($,{type:"zoomin"},null)]),e("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:a.zoomOut},[e($,{type:"zoomout"},null)])]),e("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:a.resize},[e($,{type:"resize"},null)]),!a.rotateDisabled&&e(De,null,[e("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:a.rotateLeft},[e($,{type:"rotate-left"},null)]),e("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:a.rotateRight},[e($,{type:"rotate-right"},null)])])])}),Ut=()=>e("div",{class:`${D}-loading`},[e("div",{class:"ring"},null)]),Xt=()=>e("div",{class:`${D}-on-error`},[e("div",{class:"ring"},null),e($,{type:"img-broken"},null)]),Pt=(a,m)=>{let{slots:p}=m;return e("div",{class:`${D}-img-title`},[p.default?p.default():""])},Et=Te({name:"DefaultIcons",setup:()=>()=>e("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[e("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[e("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),e("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[e("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),e("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[e("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),e("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[e("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),e("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[e("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),e("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[e("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),e("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[e("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),e("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),e("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),e("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[e("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),e("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[e("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),e("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),be=Me?window:global;let dt=Date.now();function Nt(a){const m=Date.now(),p=Math.max(0,16-(m-dt)),g=setTimeout(a,p);return dt=m+p,g}function Ke(a){return(be.requestAnimationFrame||Nt).call(be,a)}function ct(a){(be.cancelAnimationFrame||be.clearTimeout).call(be,a)}function pt(a,m){const p=a.clientX-m.clientX,g=a.clientY-m.clientY;return Math.sqrt(p*p+g*g)}function Ge(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!yt(a)}var Je=Te({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":a=>!0,"on-prev":(a,m)=>!0,"on-next":(a,m)=>!0,"on-prev-click":(a,m)=>!0,"on-next-click":(a,m)=>!0,"on-index-change":(a,m)=>!0,"on-rotate":a=>!0},setup(a,m){let{emit:p,slots:g}=m;const{imgRef:L,imgState:P,setImgSize:fe}=(()=>{const t=_(),s=Pe({width:0,height:0,maxScale:1});return{imgRef:t,imgState:s,setImgSize:()=>{if(t.value){const{width:r,height:d,naturalWidth:x}=t.value;s.maxScale=x/r,s.width=r,s.height=d}}}})(),S=_(a.index),A=_(""),c=Pe({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),v=Pe({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),f=X(()=>{return t=a.imgs,Qe("Array")(t)?a.imgs.map(s=>typeof s=="string"?{src:s}:function(r){return qt(r)&&ut(r.src)}(s)?s:void 0).filter(At):ut(a.imgs)?[{src:a.imgs}]:[];var t}),ye=X(()=>f.value[S.value]),ee=X(()=>{var t;return(t=f.value[S.value])==null?void 0:t.src}),E=X(()=>{var t;return(t=f.value[S.value])==null?void 0:t.title}),W=X(()=>{var t;return(t=f.value[S.value])==null?void 0:t.alt}),te=X(()=>({cursor:v.loadError?"default":a.moveDisabled?v.dragging?"grabbing":"grab":"move",top:`calc(50% + ${c.top}px)`,left:`calc(50% + ${c.left}px)`,transition:v.dragging||v.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${c.scale}) rotate(${c.rotateDeg}deg)`})),le=()=>{p("hide")},Z=()=>{c.scale=1,c.lastScale=1,c.rotateDeg=0,c.top=0,c.left=0,v.loadError=!1,v.dragging=!1,v.loading=!0},K=(t,s)=>{const r=S.value;Z(),S.value=t,f.value[S.value]===f.value[t]&&et(()=>{v.loading=!1}),a.visible&&r!==t&&(s&&s(r,t),p("on-index-change",r,t))},Y=()=>{const t=S.value,s=a.loop?(t+1)%f.value.length:t+1;!a.loop&&s>f.value.length-1||K(s,(r,d)=>{p("on-next",r,d),p("on-next-click",r,d)})},B=()=>{const t=S.value;let s=t-1;if(t===0){if(!a.loop)return;s=f.value.length-1}K(s,(r,d)=>{p("on-prev",r,d),p("on-prev-click",r,d)})},ue=t=>{Math.abs(1-t)<.05?t=1:Math.abs(P.maxScale-t)<.05&&(t=P.maxScale),c.lastScale=c.scale,c.scale=t},ae=()=>{const t=c.scale+a.zoomScale;t<P.maxScale*a.maxZoom&&ue(t)},G=()=>{const t=c.scale-a.zoomScale;t>a.minZoom&&ue(t)},he=()=>{const t=c.rotateDeg%360;p("on-rotate",Math.abs(t<0?t+360:t))},N=()=>{c.rotateDeg-=90,he()},J=()=>{c.rotateDeg+=90,he()},k=()=>{c.scale=1,c.top=0,c.left=0},j=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!a.moveDisabled&&t===0},{onMouseDown:$e,onMouseMove:Q,onMouseUp:y}=((t,s,r)=>{let d,x=!1;return{onMouseDown:b=>{t.initX=t.lastX=b.clientX,t.initY=t.lastY=b.clientY,s.dragging=!0,x=!1,b.stopPropagation()},onMouseUp:b=>{r(b.button)&&ct(d),s.dragging=!1,x=!1},onMouseMove:b=>{if(s.dragging)if(r(b.button)){if(x)return;x=!0,d=Ke(()=>{const{top:T,left:U,lastY:V,lastX:se}=t;t.top=T-V+b.clientY,t.left=U-se+b.clientX,t.lastX=b.clientX,t.lastY=b.clientY,x=!1})}else t.lastX=b.clientX,t.lastY=b.clientY;b.stopPropagation()}}})(c,v,j),{onTouchStart:z,onTouchMove:Le,onTouchEnd:Be}=((t,s,r,d,x)=>{let b,T=!1;return{onTouchStart:U=>{const{touches:V}=U;V.length>1&&x()?(r.gesturing=!0,s.touches=V):(s.initX=s.lastX=V[0].clientX,s.initY=s.lastY=V[0].clientY,r.dragging=!0),U.stopPropagation()},onTouchMove:U=>{if(T)return;const{touches:V}=U,{lastX:se,lastY:_e,left:ze,top:Ie,scale:Ve}=s;if(!r.gesturing&&r.dragging){if(!V[0])return;const{clientX:F,clientY:q}=V[0];d()?b=Ke(()=>{s.lastX=F,s.lastY=q,s.top=Ie-_e+q,s.left=ze-se+F,T=!1}):(s.lastX=F,s.lastY=q)}else r.gesturing&&s.touches.length>1&&V.length>1&&x()&&(b=Ke(()=>{const F=(pt(s.touches[0],s.touches[1])-pt(V[0],V[1]))/t.width;s.touches=V;const q=Ve-1.3*F;q>.5&&q<1.5*t.maxScale&&(s.scale=q),T=!1}))},onTouchEnd:()=>{ct(b),r.dragging=!1,r.gesturing=!1,T=!1}}})(P,c,v,j,()=>!a.pinchDisabled),qe=()=>{a.dblclickDisabled||(c.scale!==P.maxScale?(c.lastScale=c.scale,c.scale=P.maxScale):c.scale=c.lastScale)},Ae=t=>{v.loadError||v.gesturing||v.loading||v.dragging||v.wheeling||!a.scrollDisabled||a.zoomDisabled||(v.wheeling=!0,setTimeout(()=>{v.wheeling=!1},80),t.deltaY<0?ae():G())},de=t=>{const s=t;a.visible&&(!a.escDisabled&&s.key==="Escape"&&a.visible&&le(),s.key==="ArrowLeft"&&(a.rtl?Y():B()),s.key==="ArrowRight"&&(a.rtl?B():Y()))},Ye=()=>{a.maskClosable&&le()},Ue=()=>{fe()},oe=()=>{v.loading=!1},ce=t=>{v.loading=!1,v.loadError=!0,p("on-error",t)},xe=()=>{a.visible&&fe()};Ce(()=>a.index,t=>{t<0||t>=f.value.length||K(t)}),Ce(()=>v.dragging,(t,s)=>{const r=!t&&s;if(!j()&&r){const d=c.lastX-c.initX,x=c.lastY-c.initY,b=a.swipeTolerance;Math.abs(d)>Math.abs(x)&&(d<-1*b?Y():d>b&&B())}}),Ce(()=>a.visible,t=>{if(t){Z();const s=f.value.length;if(s===0)return S.value=0,v.loading=!1,void et(()=>v.loadError=!0);S.value=a.index>=s?s-1:a.index<0?0:a.index,a.scrollDisabled&&ke()}else a.scrollDisabled&&pe()});const ke=()=>{document&&(A.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},pe=()=>{document&&(document.body.style.overflowY=A.value)};vt(()=>{it(document,"keydown",de),it(window,"resize",xe)}),bt(()=>{rt(document,"keydown",de),rt(window,"resize",xe),a.scrollDisabled&&pe()});const we=()=>v.loading?g.loading?g.loading({key:"loading"}):e(Ut,{key:"img-loading"},null):v.loadError?g.onerror?g.onerror({key:"onerror"}):e(Xt,{key:"img-on-error"},null):e("div",{class:`${D}-img-wrapper`,style:te.value,key:"img-wrapper"},[e("img",{alt:W.value,ref:L,draggable:"false",class:`${D}-img`,src:ee.value,onMousedown:$e,onMouseup:y,onMousemove:Q,onTouchstart:z,onTouchmove:Le,onTouchend:Be,onLoad:Ue,onDblclick:qe,onDragstart:t=>{t.preventDefault()}},null)]),Xe=()=>{if(g["prev-btn"])return g["prev-btn"]({prev:B});if(f.value.length<=1)return;const t=!a.loop&&S.value<=0;return e("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(t?"disable":""),onClick:B},[a.rtl?e($,{type:"next"},null):e($,{type:"prev"},null)])},i=()=>{if(g["next-btn"])return g["next-btn"]({next:Y});if(f.value.length<=1)return;const t=!a.loop&&S.value>=f.value.length-1;return e("div",{role:"button","aria-label":"next image button",class:"btn__next "+(t?"disable":""),onClick:Y},[a.rtl?e($,{type:"prev"},null):e($,{type:"next"},null)])},l=()=>{if(!(a.titleDisabled||v.loading||v.loadError))return g.title?g.title({currentImg:ye.value}):E.value?e(Pt,null,{default:()=>[E.value]}):void 0},o=()=>{let t;if(a.visible)return e("div",{onTouchmove:Lt,class:[`${D}-modal`,a.rtl?"is-rtl":""],onClick:mt(Ye,["self"]),onWheel:Ae},[e(Et,null,null),e(Ee,{name:`${D}-fade`,mode:"out-in"},Ge(t=we())?t:{default:()=>[t]}),e("img",{style:"display:none;",src:ee.value,onError:ce,onLoad:oe},null),e("div",{class:`${D}-btns-wrapper`},[Xe(),i(),l(),g["close-btn"]?g["close-btn"]({close:le}):e("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:le},[e($,{type:"close"},null)]),g.toolbar?g.toolbar({toolbarMethods:{zoomIn:ae,zoomOut:G,rotate:N,rotateLeft:N,rotateRight:J,resize:k},zoomIn:ae,zoomOut:G,rotate:N,rotateLeft:N,rotateRight:J,resize:k}):e(Yt,{zoomIn:ae,zoomOut:G,resize:k,rotateLeft:N,rotateRight:J,rotateDisabled:a.rotateDisabled,zoomDisabled:a.zoomDisabled},null)])])};return()=>{let t;if(a.teleport){let s;return e(ft,{to:a.teleport},{default:()=>[e(Ee,{name:`${D}-fade`},Ge(s=o())?s:{default:()=>[s]})]})}return e(Ee,{name:`${D}-fade`},Ge(t=o())?t:{default:()=>[t]})}}});const jt=Object.assign(Je,{install:a=>{a.component(Je.name,Je)}}),Ft={class:"d-flex justify-space-between align-center mb-2 mb-sm-4"},Ht={class:"ms-1"},Ot={key:1},Rt={class:"d-flex justify-center align-center"},Wt={class:"ps-3 pt-3 pb-5 card-title d-inline"},Zt={key:0,style:{"font-size":"12px"},class:"text-grey-darken-1"},Kt={class:"d-flex flex-column gap-4"},Gt={class:"list-content"},Jt={class:"list-content"},Qt={class:"list-content"},el={class:"list-content"},tl={class:"list-content"},ll={class:"list-content"},al={class:"list-content"},ol={class:"list-content"},sl={style:{"white-space":"pre-wrap"},class:"list-content"},nl={class:"list-content"},il={style:{"white-space":"pre-wrap"},class:"list-content"},rl={key:0,class:"text-grey text-caption mt-1"},ul={__name:"ITServiceAdmin",setup(a){const{apiAuth:m}=wt(),p=xt(),{smAndUp:g,mdAndUp:L,xlAndUp:P,width:fe}=kt(),S=X(()=>fe.value>=2200),A=X(()=>g.value?"default":"small"),c=i=>{if(!i)return"";const l=new Date(i),o=T=>String(T).padStart(2,"0"),t=l.getFullYear(),s=o(l.getMonth()+1),r=o(l.getDate()),d=o(l.getHours()),x=o(l.getMinutes()),b=o(l.getSeconds());return`${t}/${s}/${r} ${d}:${x}:${b}`},v=_(!1),f=_([]),ye=_(0),ee=_(10),E=_(1),W=_([]),te=_(""),le={class:"header-bg"},Z=_([]),K=_(!1),Y=_(""),B=_([]),ue=_(!1),ae=async()=>{var i,l;try{console.log("開始載入處理者清單");const{data:o}=await m.get("/serviceTicket/assignees");console.log("API 回應資料:",o),o.success&&Array.isArray(o.result)?B.value=o.result:(console.error("API 回傳的資料格式不正確:",o),B.value=[])}catch(o){console.error("載入處理者清單失敗:",o),o.response&&console.error("錯誤回應:",o.response.data),p({text:((l=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:l.message)||"載入處理者清單失敗",snackbarProps:{color:"error"}}),B.value=[]}},G=_(0),he=()=>{G.value+=1},N=async(i,l)=>{var o,t;try{ue.value=!0;const{data:s}=await m.patch(`/serviceTicket/${i._id}`,{assigneeId:l}),r=s.result.assigneeId,d=f.value.findIndex(x=>x._id===i._id);d!==-1&&(f.value[d]={...f.value[d],assigneeId:r}),p({text:l?"處理者更新成功":"已移除指派",snackbarProps:{color:"success"}}),he()}catch(s){console.error("更新處理者失敗:",s),p({text:((t=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:t.message)||"更新處理者失敗",snackbarProps:{color:"error"}})}finally{ue.value=!1}},J=_({status:null,category:null,priority:null}),k=_({requesterId:null,category:null,priority:null,status:null}),j=[{title:"維修編號",align:"start",key:"ticketId",sortable:!0,minWidth:"120px"},{title:"標題",align:"start",key:"title",sortable:!0,minWidth:"120px"},{title:"申請人",align:"start",key:"requesterId.name",sortable:!0,minWidth:"100px"},{title:"分機",align:"start",key:"requesterId.extNumber",sortable:!0,minWidth:"100px"},{title:"類別",align:"start",key:"category",sortable:!0},{title:"優先度",align:"start",key:"priority",sortable:!0,minWidth:"100px"},{title:"狀態",align:"start",key:"status",sortable:!0},{title:"地點",align:"start",key:"location",sortable:!0,minWidth:"64px"},{title:"圖片",align:"center",key:"attachments",sortable:!1,minWidth:"100px"},{title:"處理者",align:"start",key:"assigneeId",sortable:!0,minWidth:"100px"},{title:"問題描述",align:"start",key:"description",sortable:!1},{title:"操作",align:"center",key:"actions",sortable:!1}],$e=X(()=>S.value?j:P.value?j.filter(i=>!["description","category","location","assigneeId.name"].includes(i.key)):L.value?j.filter(i=>!["description","category","location","assigneeId.name"].includes(i.key)):j.filter(i=>["ticketId","requesterId.name","requesterId.extNumber","title","status","actions","attachments"].includes(i.key))),Q=_({visible:!1,index:0,imgs:[]}),y=_({show:!1,ticket:null,solution:"",loading:!1,error:"",pendingStatus:null}),z=_({show:!1,ticket:null}),Le=i=>{z.value={show:!0,ticket:i}},Be=i=>({待處理:"grey-darken-1",處理中:"blue",待確認:"orange-darken-1",已完成:"green",已取消:"red"})[i]||"grey",qe=i=>({低:"green",中:"blue",高:"orange-darken-1",緊急:"red"})[i]||"grey",Ae=Vt.debounce(async i=>{K.value=!0;try{const{data:l}=await m.get("/user/suggestions",{params:{search:i}});l.success&&(Z.value=l.result)}catch(l){console.error("搜索申請人失敗:",l),Z.value=[]}finally{K.value=!1}},300),de=()=>{Y.value="",Z.value=[],k.value.requesterId=null},Ye=()=>{k.value={requesterId:null,category:null,priority:null,status:null},te.value="",de(),ce()},Ue=async(i,l)=>{if(l==="已完成"&&!i.solution){ke(i,l);return}await we(i,l)},oe=async()=>{var i,l,o;v.value=!0;try{const t={page:E.value,limit:ee.value,sort:W.value.length?`${W.value[0].order==="desc"?"-":""}${W.value[0].key}`:"-createdAt",search:te.value};(i=k.value.requesterId)!=null&&i._id&&(t.requesterId=k.value.requesterId._id),k.value.category&&(t.category=k.value.category),k.value.priority&&(t.priority=k.value.priority),k.value.status&&(t.status=k.value.status);const{data:s}=await m.get("/serviceTicket/all",{params:t});s.success&&(f.value=s.result.data,ye.value=s.result.total)}catch(t){console.error("獲取維修請求失敗:",t),p({text:((o=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:o.message)||"獲取維修請求失敗",snackbarProps:{color:"error"}})}finally{v.value=!1}},ce=async()=>{E.value=1,await oe()},xe=i=>{Q.value={visible:!0,index:0,imgs:i.map(l=>({src:l.url,title:l.publicId}))}},ke=(i,l=null)=>{y.value={show:!0,ticket:i,solution:i.solution||"",loading:!1,error:"",pendingStatus:l}},pe=()=>{y.value={show:!1,ticket:null,solution:"",loading:!1,error:"",pendingStatus:null}},we=async(i,l)=>{var o,t;try{const{data:s}=await m.patch(`/serviceTicket/${i._id}`,{status:l}),r=f.value.findIndex(d=>d._id===i._id);r!==-1&&(f.value[r]={...s.result,requesterId:{...f.value[r].requesterId,...s.result.requesterId}}),p({text:"狀態更新成功",snackbarProps:{color:"success"}})}catch(s){console.error("更新狀態失敗:",s),p({text:((t=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:t.message)||"更新狀態失敗",snackbarProps:{color:"error"}})}},Xe=async i=>{var l,o,t,s,r;if(i==null||i.preventDefault(),!((l=y.value.solution)!=null&&l.trim())){y.value.error="請輸入處理方案";return}y.value.loading=!0;try{const{data:d}=await m.patch(`/serviceTicket/${y.value.ticket._id}`,{solution:y.value.solution}),x=f.value.findIndex(b=>b._id===y.value.ticket._id);x!==-1&&(f.value[x]={...d.result,requesterId:{...f.value[x].requesterId,...d.result.requesterId}}),p({text:"處理方案儲存成功",snackbarProps:{color:"teal-lighten-1"}}),y.value.pendingStatus&&await we(f.value[x],y.value.pendingStatus),pe()}catch(d){console.error("儲存處理方案失敗:",d),y.value.error=((t=(o=d==null?void 0:d.response)==null?void 0:o.data)==null?void 0:t.message)||"儲存處理方案失敗",p({text:((r=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:r.message)||"儲存處理方案失敗",snackbarProps:{color:"red-lighten-1"}})}finally{y.value.loading=!1}};return Ce([()=>J.value.status,()=>J.value.category,()=>J.value.priority],()=>{E.value=1,oe()}),vt(async()=>{console.log("組件載入");try{await ae(),await oe()}catch(i){console.error("初始化失敗:",i)}}),(i,l)=>(C(),H(St,{"max-width":"2200"},{default:n(()=>[e(R,{class:"pt-md-5"},{default:n(()=>[e(I,{cols:"12",lg:"4",xl:"3"},{default:n(()=>[e(R,null,{default:n(()=>[e(I,{cols:"12",class:"mt-1 px-lg-10"},{default:n(()=>[e(Ne,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-4 px-sm-4 px-xl-8"},{default:n(()=>[e(_t,{class:"font-weight-bold d-flex align-center"},{default:n(()=>l[14]||(l[14]=[w(" 搜尋條件 ")])),_:1}),e(je,{class:"pa-2"},{default:n(()=>[e(R,null,{default:n(()=>[e(I,{cols:"12",sm:"6",lg:"12"},{default:n(()=>[e(Ct,{modelValue:k.value.requesterId,"onUpdate:modelValue":l[0]||(l[0]=o=>k.value.requesterId=o),"search-input":Y.value,"onUpdate:searchInput":l[1]||(l[1]=o=>Y.value=o),items:Z.value,loading:K.value,label:"申請人","return-object":"","item-props":o=>({title:`${o.name} (${o.userId})`,value:o}),variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:search":Se(Ae),"onClick:clear":de},zt({selection:n(({item:o})=>{var t;return[w(h((t=o==null?void 0:o.props)==null?void 0:t.title),1)]}),_:2},[Se(g)?{name:"append-inner",fn:n(()=>[e(Dt,{location:"top","close-delay":"200"},{activator:n(({props:o})=>[e(ne,Fe(o,{icon:"mdi-information",size:"18"}),null,16)]),default:n(()=>[l[15]||(l[15]=w(" 輸入員編、姓名查詢 "))]),_:1})]),key:"0"}:void 0]),1032,["modelValue","search-input","items","loading","item-props","onUpdate:search"])]),_:1}),e(I,{cols:"12",sm:"6",lg:"12"},{default:n(()=>[e(Re,{modelValue:k.value.category,"onUpdate:modelValue":l[2]||(l[2]=o=>k.value.category=o),items:["硬體問題","軟體問題","網路問題","帳號權限","其他"],label:"類別",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",sm:"6",lg:"12"},{default:n(()=>[e(Re,{modelValue:k.value.priority,"onUpdate:modelValue":l[3]||(l[3]=o=>k.value.priority=o),items:["低","中","高","緊急"],label:"優先度",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",sm:"6",lg:"12"},{default:n(()=>[e(Re,{modelValue:k.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>k.value.status=o),items:["待處理","處理中","待確認","已完成","已取消"],label:"狀態",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(R,null,{default:n(()=>[e(I,{cols:"12",class:"d-flex justify-end gap-2"},{default:n(()=>[e(R,{class:"d-flex justify-space-between"},{default:n(()=>[e(I,{cols:"3"},{default:n(()=>[e(O,{color:"grey",width:"40",block:"",onClick:Ye},{default:n(()=>[e(ne,null,{default:n(()=>l[16]||(l[16]=[w("mdi-refresh")])),_:1})]),_:1})]),_:1}),e(I,{cols:"9",class:"ps-0"},{default:n(()=>[e(O,{color:"blue-grey-darken-1","prepend-icon":"mdi-magnify",loading:v.value,block:"",onClick:ce},{default:n(()=>l[17]||(l[17]=[w(" 搜尋 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{cols:"12",lg:"8",xl:"9",class:"px-6 ps-lg-4 pe-lg-12 mb-6"},{default:n(()=>[e(R,{class:"elevation-4 rounded-xl py-4 py-sm-8 px-1 px-sm-4 px-md-10 mt-1 bg-white"},{default:n(()=>[e(I,{cols:"12"},{default:n(()=>[u("div",Ft,[e(R,null,{default:n(()=>[e(I,null,{default:n(()=>l[18]||(l[18]=[u("h3",null,"IT維修服務管理",-1)])),_:1}),e(I,{cols:"6",sm:"5",md:"4",xl:"3",class:"d-flex align-center"},{default:n(()=>[Se(g)?ve((C(),H(ne,{key:0,icon:"mdi-information",size:"small",color:"blue-grey-darken-2",class:"me-4"},null,512)),[[ge,"可搜尋維修編號、標題、分機、地點、問題描述","start"]]):He("",!0),e(It,{modelValue:te.value,"onUpdate:modelValue":[l[5]||(l[5]=o=>te.value=o),ce],label:"搜尋","append-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),e(I,{cols:"12"},{default:n(()=>[(C(),H(Tt,{key:G.value,"items-per-page":ee.value,"onUpdate:itemsPerPage":l[6]||(l[6]=o=>ee.value=o),"sort-by":W.value,"onUpdate:sortBy":l[7]||(l[7]=o=>W.value=o),page:E.value,"onUpdate:page":l[8]||(l[8]=o=>E.value=o),headers:$e.value,items:f.value,loading:v.value,"items-length":ye.value,"items-per-page-options":[10,20,50],"header-props":le,hover:"",density:"comfortable",class:"rounded-lg","onUpdate:options":oe},{"item.status":n(({item:o})=>[e(tt,null,{activator:n(({props:t})=>[ve((C(),H(Oe,Fe(t,{color:Be(o.status),variant:"outlined",label:"",size:"small"}),{default:n(()=>[w(h(o.status),1)]),_:2},1040,["color"])),[[ge,"點擊更改狀態","start"]])]),default:n(()=>[e(nt,null,{default:n(()=>[(C(),me(De,null,lt(["待處理","處理中","待確認","已完成","已取消"],t=>e(We,{key:t,active:o.status===t,onClick:s=>Ue(o,t)},{default:n(()=>[e(Ze,null,{default:n(()=>[w(h(t),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:2},1024)]),_:2},1024)]),"item.priority":n(({item:o})=>[e(Oe,{color:qe(o.priority),variant:"outlined",size:"small"},{default:n(()=>[w(h(o.priority),1)]),_:2},1032,["color"])]),"item.requesterId.extNumber":n(({item:o})=>{var t;return[w(h(((t=o.requesterId)==null?void 0:t.extNumber)||"-"),1)]}),"item.assigneeId":n(({item:o})=>[e(tt,null,{activator:n(({props:t})=>[ve((C(),H(Oe,Fe(t,{color:o.assigneeId?"blue":"grey",variant:"outlined",label:"",size:"small"}),{default:n(()=>{var s;return[w(h((s=o.assigneeId)!=null&&s.name?`${o.assigneeId.name} (${o.assigneeId.userId})`:"尚未指派"),1)]}),_:2},1040,["color"])),[[ge,"點擊選擇處理者","start"]])]),default:n(()=>[e(nt,null,{default:n(()=>[(C(!0),me(De,null,lt(B.value,t=>{var s;return C(),H(We,{key:t._id,active:((s=o.assigneeId)==null?void 0:s._id)===t._id,onClick:r=>N(o,t._id)},{default:n(()=>[e(Ze,null,{default:n(()=>[w(h(t.name)+" ("+h(t.userId)+")",1)]),_:2},1024)]),_:2},1032,["active","onClick"])}),128)),e(M),e(We,{onClick:t=>N(o,null)},{default:n(()=>[e(Ze,{class:"text-grey"},{default:n(()=>l[19]||(l[19]=[w(" 移除指派 ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),"item.attachments":n(({item:o})=>{var t;return[(t=o.attachments)!=null&&t.length?ve((C(),H(O,{key:0,icon:"",variant:"plain",color:"blue-grey-darken-1",ripple:!1,onClick:s=>xe(o.attachments)},{default:n(()=>[e(ne,{size:"small"},{default:n(()=>l[20]||(l[20]=[w(" mdi-image-multiple ")])),_:1}),u("span",Ht,"*"+h(o.attachments.length),1)]),_:2},1032,["onClick"])),[[ge,`查看${o.attachments.length}張圖片`,"start"]]):(C(),me("span",Ot,"無"))]}),"item.actions":n(({item:o})=>[u("div",Rt,[e(I,{cols:"6",sm:"4",md:"3",lg:"2",class:"pa-0"},{default:n(()=>[ve((C(),H(O,{icon:"",color:o.solution?"light-blue-darken-4":"green-darken-1",class:"me-2",variant:"plain",ripple:!1,size:A.value,onClick:t=>ke(o)},{default:n(()=>[e(ne,{size:"small"},{default:n(()=>[w(h(o.solution?"mdi-note-edit":"mdi-note-plus"),1)]),_:2},1024)]),_:2},1032,["color","size","onClick"])),[[ge,o.solution?"編輯處理方案":"新增處理方案","start"]])]),_:2},1024),e(I,{cols:"6",sm:"4",md:"3",lg:"2",class:"pa-0"},{default:n(()=>[e(O,{color:"blue-grey-darken-2",variant:"plain",ripple:!1,size:A.value,onClick:t=>Le(o)},{default:n(()=>[e(ne,{size:A.value},{default:n(()=>l[21]||(l[21]=[w(" mdi-book-open-variant-outline ")])),_:1},8,["size"])]),_:2},1032,["size","onClick"])]),_:2},1024)])]),_:2},1032,["items-per-page","sort-by","page","headers","items","loading","items-length"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Se(jt),{visible:Q.value.visible,imgs:Q.value.imgs,index:Q.value.index,"dblclick-closable":!0,onHide:l[9]||(l[9]=o=>Q.value.visible=!1)},null,8,["visible","imgs","index"]),e(st,{modelValue:y.value.show,"onUpdate:modelValue":l[11]||(l[11]=o=>y.value.show=o),persistent:"","max-width":"480"},{default:n(()=>[e(Mt,{onSubmit:mt(Xe,["prevent"])},{default:n(()=>[e(Ne,{class:"rounded-lg pa-4 pt-6"},{default:n(()=>{var o,t;return[u("div",Wt,[w(h((o=y.value.ticket)!=null&&o.solution?"編輯處理方案":"新增處理方案")+" ",1),(t=y.value.ticket)!=null&&t.solutionUpdatedAt?(C(),me("div",Zt,[l[22]||(l[22]=w(" ( ")),l[23]||(l[23]=u("span",null,"最後更新時間：",-1)),w(" "+h(c(y.value.ticket.solutionUpdatedAt))+" ) ",1)])):He("",!0)]),e(je,{class:"px-3"},{default:n(()=>[e($t,{modelValue:y.value.solution,"onUpdate:modelValue":l[10]||(l[10]=s=>y.value.solution=s),label:"處理方案",variant:"outlined",density:"compact","error-messages":y.value.error,rows:"10","auto-grow":"",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(at,null,{default:n(()=>{var s;return[e(ot),e(O,{color:"red-lighten-1",variant:"outlined",size:A.value,loading:y.value.loading,onClick:pe},{default:n(()=>l[24]||(l[24]=[w(" 取消 ")])),_:1},8,["size","loading"]),e(O,{color:"teal-darken-1",variant:"outlined",type:"submit",size:A.value,class:"ms-1",loading:y.value.loading,disabled:!((s=y.value.solution)!=null&&s.trim())},{default:n(()=>l[25]||(l[25]=[w(" 送出 ")])),_:1},8,["size","loading","disabled"])]}),_:1})]}),_:1})]),_:1})]),_:1},8,["modelValue"]),e(st,{modelValue:z.value.show,"onUpdate:modelValue":l[13]||(l[13]=o=>z.value.show=o),"max-width":"600"},{default:n(()=>[e(Ne,{class:"pa-4"},{default:n(()=>[l[38]||(l[38]=u("div",{class:"ps-6 pt-4 pb-1 pb-sm-3 card-title"}," 維修請求詳細資料 ",-1)),e(je,null,{default:n(()=>[e(R,null,{default:n(()=>[e(I,{cols:"12"},{default:n(()=>{var o,t,s,r,d,x,b,T,U,V,se,_e,ze,Ie,Ve,F,q;return[u("div",Kt,[u("div",null,[l[26]||(l[26]=u("div",{class:"text-grey-darken-1 list-title"}," 維修編號 ",-1)),u("div",Gt,h((o=z.value.ticket)==null?void 0:o.ticketId),1)]),e(M,{class:"my-2"}),u("div",null,[l[27]||(l[27]=u("div",{class:"text-grey-darken-1 list-title"}," 申請人 ",-1)),u("div",Jt,h((s=(t=z.value.ticket)==null?void 0:t.requesterId)==null?void 0:s.name)+" ("+h((d=(r=z.value.ticket)==null?void 0:r.requesterId)==null?void 0:d.userId)+") ",1)]),e(M,{class:"my-2"}),u("div",null,[l[28]||(l[28]=u("div",{class:"text-grey-darken-1 list-title"}," 分機號碼 ",-1)),u("div",Qt,h(((b=(x=z.value.ticket)==null?void 0:x.requesterId)==null?void 0:b.extNumber)||"-"),1)]),e(M,{class:"my-2"}),u("div",null,[l[29]||(l[29]=u("div",{class:"text-grey-darken-1 list-title"}," 標題 ",-1)),u("div",el,h((T=z.value.ticket)==null?void 0:T.title),1)]),e(M,{class:"my-2"}),u("div",null,[l[30]||(l[30]=u("div",{class:"text-grey-darken-1 list-title"}," 類別 ",-1)),u("div",tl,h((U=z.value.ticket)==null?void 0:U.category),1)]),e(M,{class:"my-2"}),u("div",null,[l[31]||(l[31]=u("div",{class:"text-grey-darken-1 list-title"}," 優先程度 ",-1)),u("div",ll,h((V=z.value.ticket)==null?void 0:V.priority),1)]),e(M,{class:"my-2"}),u("div",null,[l[32]||(l[32]=u("div",{class:"text-grey-darken-1 list-title"}," 狀態 ",-1)),u("div",al,h((se=z.value.ticket)==null?void 0:se.status),1)]),e(M,{class:"my-2"}),u("div",null,[l[33]||(l[33]=u("div",{class:"text-grey-darken-1 list-title"}," 地點 ",-1)),u("div",ol,h((_e=z.value.ticket)==null?void 0:_e.location),1)]),e(M,{class:"my-2"}),u("div",null,[l[34]||(l[34]=u("div",{class:"text-grey-darken-1 list-title"}," 問題描述 ",-1)),u("div",sl,h((ze=z.value.ticket)==null?void 0:ze.description),1)]),e(M,{class:"my-2"}),u("div",null,[l[35]||(l[35]=u("div",{class:"text-grey-darken-1 list-title"}," 處理者 ",-1)),u("div",nl,h(((Ve=(Ie=z.value.ticket)==null?void 0:Ie.assigneeId)==null?void 0:Ve.name)||"尚未指派"),1)]),e(M,{class:"my-2"}),u("div",null,[l[36]||(l[36]=u("div",{class:"text-grey-darken-1 list-title"}," 處理方案 ",-1)),u("div",il,h(((F=z.value.ticket)==null?void 0:F.solution)||"尚未填寫"),1),(q=z.value.ticket)!=null&&q.solutionUpdatedAt?(C(),me("div",rl," 最後更新："+h(c(z.value.ticket.solutionUpdatedAt)),1)):He("",!0)])])]}),_:1})]),_:1})]),_:1}),e(at,null,{default:n(()=>[e(ot),e(O,{color:"grey-darken-1",variant:"outlined",size:A.value,onClick:l[12]||(l[12]=o=>z.value.show=!1)},{default:n(()=>l[37]||(l[37]=[w(" 關閉 ")])),_:1},8,["size"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},zl=ht(ul,[["__scopeId","data-v-a23d5265"]]);export{zl as default};
